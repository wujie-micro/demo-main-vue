(function(e){function t(t){for(var o,c,l=t[0],s=t[1],a=t[2],d=0,f=[];d<l.length;d++)c=l[d],Object.prototype.hasOwnProperty.call(r,c)&&r[c]&&f.push(r[c][0]),r[c]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);u&&u(t);while(f.length)f.shift()();return i.push.apply(i,a||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,l=1;l<n.length;l++){var s=n[l];0!==r[s]&&(o=!1)}o&&(i.splice(t--,1),e=c(c.s=n[0]))}return e}var o={},r={app:0},i=[];function c(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=o,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)c.d(n,o,function(t){return e[t]}.bind(null,o));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var a=0;a<l.length;a++)t(l[a]);var u=s;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},"03cc":function(e,t,n){"use strict";n("a5f5")},"068e":function(e,t,n){},2154:function(e,t,n){"use strict";n("ed34")},"56d7":function(e,t,n){"use strict";n.r(t);n("caad");var o=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"nav"}},[n("router-link",{attrs:{to:"/home"}},[e._v("介绍")]),n("router-link",{attrs:{to:"/react16"}},[e._v("react16")]),n("router-link",{attrs:{to:"/react17"}},[e._v("react17"),n("span",{staticClass:"alive"},[e._v("保活")])]),n("router-link",{attrs:{to:"/vue2"}},[e._v("vue2")]),n("router-link",{attrs:{to:"/vue3"}},[e._v("vue3"),n("span",{staticClass:"alive"},[e._v("保活")])]),n("router-link",{attrs:{to:"/vite"}},[e._v("vite")]),n("router-link",{attrs:{to:"/angular12"}},[e._v("angular12")]),n("router-link",{attrs:{to:"/all"}},[e._v("all")])],1),n("div",{staticClass:"content"},[n("router-view")],1)])},i=[],c=(n("034f"),n("2877")),l={},s=Object(c["a"])(l,r,i,!1,null,null,null),a=s.exports,u=n("8c4f"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("div",{staticClass:"fixed"},[n("a",{staticClass:"docs",attrs:{href:"https://wujie-micro.github.io/doc/",target:"_blank"}},[e._v("文档")]),n("a",{staticClass:"docs",attrs:{href:"https://git.woa.com/wujie/wujie/tree/master/examples/main-vue/",target:"_blank"}},[e._v("仓库")]),n("a-tooltip",{attrs:{placement:"top"}},[n("template",{slot:"title"},[e._v("主应用为hash模式")]),n("a",{staticClass:"docs",attrs:{href:"https://wujie-micro.github.io/demo-main-react/",target:"_blank"}},[e._v("react主应用")])],2),n("a-tooltip",{attrs:{placement:"top"}},[n("template",{slot:"title"},[e._v("预加载+预执行")]),n("a-switch",{staticClass:"switch",attrs:{"checked-children":"预加载开","un-checked-children":"预加载关"},model:{value:e.preload,callback:function(t){e.preload=t},expression:"preload"}})],2),n("a-tooltip",{attrs:{placement:"top"}},[n("template",{slot:"title"},[e._v("主动降级，去除shadow+proxy")]),n("a-switch",{staticClass:"switch",attrs:{disabled:e.disable,"checked-children":"降级开","un-checked-children":"降级关"},model:{value:e.degrade,callback:function(t){e.degrade=t},expression:"degrade"}})],2)],1),n("h1",{staticClass:"header"},[n("img",{style:{width:"70px",height:"70px","margin-right":"15px"},attrs:{src:"https://vfiles.gtimg.cn/wupload/xy/test_wuji_damy/ySSMwW7H.svg"}}),n("span",{staticClass:"bland"},[e._v("无界")])]),n("h2",{staticClass:"subtitle"},[e._v("—极致的微前端框架")]),e._m(0)])},f=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"detail-content"},[n("div",{staticClass:"item"},[n("div",{staticClass:"title"},[e._v("极速 🚀")]),n("div",{staticClass:"detail"},[n("ul",[n("li",[e._v("极致预加载提速")]),n("li",[e._v("应用秒开无白屏")]),n("li",[e._v("应用丝滑般切换")])])])]),n("div",{staticClass:"item"},[n("div",{staticClass:"title"},[e._v("强大 💪")]),n("div",{staticClass:"detail"},[n("ul",[n("li",[e._v("多应用同时激活在线")]),n("li",[e._v("应用级别保活")]),n("li",[e._v("去中心化的通信")])])])]),n("div",{staticClass:"item"},[n("div",{staticClass:"title"},[e._v("简单 🤞")]),n("div",{staticClass:"detail"},[n("ul",[n("li",[e._v("更小的体积")]),n("li",[e._v("精简的API")]),n("li",[e._v("开箱即用")])])])])])}],h={name:"Home",data(){return{preload:"false"!==window.localStorage.getItem("preload"),degrade:"true"===window.localStorage.getItem("degrade")||!window.Proxy||!window.CustomElementRegistry,disable:!window.Proxy||!window.CustomElementRegistry}},watch:{preload(e){window.localStorage.setItem("preload",e),setTimeout(()=>window.location.reload(),1e3)},degrade(e){window.localStorage.setItem("degrade",e),setTimeout(()=>window.location.reload(),1e3)}}},p=h,m=(n("03cc"),n("2154"),Object(c["a"])(p,d,f,!1,null,"d6d8c884",null)),y=m.exports,v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("WujieVue",{attrs:{width:"100%",height:"100%",name:"react16",url:e.react16Url,sync:!0,fetch:e.fetch,props:e.props,attrs:e.attrs,degrade:e.degrade,plugins:e.plugins,prefix:{"prefix-dialog":"/dialog","prefix-location":"/location"},beforeLoad:e.lifecycles.beforeLoad,beforeMount:e.lifecycles.beforeMount,afterMount:e.lifecycles.afterMount,beforeUnmount:e.lifecycles.beforeUnmount,afterUnmount:e.lifecycles.afterUnmount,activated:e.lifecycles.activated,deactivated:e.lifecycles.deactivated,loadError:e.lifecycles.loadError}})},w=[];const g={"//localhost:7100":"//wujie-micro.github.io/demo-react17/","//localhost:7200":"//wujie-micro.github.io/demo-vue2/","//localhost:7300":"//wujie-micro.github.io/demo-vue3/","//localhost:7400":"//wujie-micro.github.io/demo-angular12/","//localhost:7500":"//wujie-micro.github.io/demo-vite/","//localhost:7600":"//wujie-micro.github.io/demo-react16/"};function b(e){return g[e]}function E(e,t){const n=!e.includes("//vfiles.gtimg.cn/");return window.fetch(e,{...t,credentials:n?"include":"omit"})}const _={beforeLoad:e=>console.log(e.__WUJIE.id+" beforeLoad 生命周期"),beforeMount:e=>console.log(e.__WUJIE.id+" beforeMount 生命周期"),afterMount:e=>console.log(e.__WUJIE.id+" afterMount 生命周期"),beforeUnmount:e=>console.log(e.__WUJIE.id+" beforeUnmount 生命周期"),afterUnmount:e=>console.log(e.__WUJIE.id+" afterUnmount 生命周期"),activated:e=>console.log(e.__WUJIE.id+" activated 生命周期"),deactivated:e=>console.log(e.__WUJIE.id+" deactivated 生命周期"),loadError:(e,t)=>console.log(e+" 加载失败",t)};var j=_;const x=[{htmlLoader:e=>(console.log("html-loader"),e),jsBeforeLoaders:[{callback(e){console.log("js-before-loader-callback",e.__WUJIE.id)}}],jsLoader:(e,t)=>(console.log("js-loader",t),e),jsAfterLoaders:[{callback(e){console.log("js-after-loader-callback",e.__WUJIE.id)}}],cssBeforeLoaders:[{src:"https://vfiles.gtimg.cn/wuji_dashboard/xy/test_wuji_damy/HDaBURp7.css"},{content:"img{width: 300px}"}],cssLoader:(e,t)=>(console.log("css-loader",t,e.slice(0,50)+"..."),e),cssAfterLoaders:[{src:"https://vfiles.gtimg.cn/wuji_dashboard/xy/test_wuji_damy/FQsK8IN6.css"},{content:"img{height: 300px}"}]}];var U=x,W={data(){return{react16Url:b("//localhost:7600"),props:{jump:this.jump},attrs:{src:b("//localhost:7600")},fetch:E,lifecycles:j,degrade:"true"===window.localStorage.getItem("degrade"),plugins:U}},methods:{jump(e){this.$router.push({name:e})}}},L=W,M=Object(c["a"])(L,v,w,!1,null,"5b70e240",null),O=M.exports,C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("WujieVue",{attrs:{width:"100%",height:"100%",name:"react17",url:e.react17Url,sync:!0,alive:!0,fetch:e.fetch,degrade:e.degrade,props:e.props,attrs:e.attrs,beforeLoad:e.lifecycles.beforeLoad,beforeMount:e.lifecycles.beforeMount,afterMount:e.lifecycles.afterMount,beforeUnmount:e.lifecycles.beforeUnmount,afterUnmount:e.lifecycles.afterUnmount,activated:e.lifecycles.activated,deactivated:e.lifecycles.deactivated,loadError:e.lifecycles.loadError}})},P=[],I={data(){return{react17Url:b("//localhost:7100"),props:{jump:this.jump},attrs:{src:b("//localhost:7100")},fetch:E,lifecycles:j,degrade:"true"===window.localStorage.getItem("degrade")}},methods:{jump(e){this.$router.push({name:e})}}},S=I,R=Object(c["a"])(S,C,P,!1,null,"2aca5b5a",null),A=R.exports,T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("WujieVue",{attrs:{width:"100%",height:"100%",name:"vue2",url:e.vue2Url,props:e.props,attrs:e.attrs,sync:!0,fetch:e.fetch,degrade:e.degrade,beforeLoad:e.lifecycles.beforeLoad,beforeMount:e.lifecycles.beforeMount,afterMount:e.lifecycles.afterMount,beforeUnmount:e.lifecycles.beforeUnmount,afterUnmount:e.lifecycles.afterUnmount,activated:e.lifecycles.activated,deactivated:e.lifecycles.deactivated,loadError:e.lifecycles.loadError}})},D=[],$={data(){return{vue2Url:b("//localhost:7200"),attrs:{src:b("//localhost:7200")},props:{jump:this.jump},fetch:E,degrade:"true"===window.localStorage.getItem("degrade"),lifecycles:j}},methods:{jump(e){this.$router.push({name:e})}}},J=$,k=Object(c["a"])(J,T,D,!1,null,"6052c5de",null),N=k.exports,F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("WujieVue",{attrs:{width:"100%",height:"100%",name:"vite",url:e.viteUrl,sync:!0,fetch:e.fetch,props:e.props,attrs:e.attrs,degrade:e.degrade,beforeLoad:e.lifecycles.beforeLoad,beforeMount:e.lifecycles.beforeMount,afterMount:e.lifecycles.afterMount,beforeUnmount:e.lifecycles.beforeUnmount,afterUnmount:e.lifecycles.afterUnmount,activated:e.lifecycles.activated,deactivated:e.lifecycles.deactivated,loadError:e.lifecycles.loadError}})},B=[],H={data(){return{viteUrl:b("//localhost:7500"),fetch:E,props:{jump:this.jump},attrs:{src:b("//localhost:7500")},degrade:"true"===window.localStorage.getItem("degrade"),lifecycles:j}},methods:{jump(e){this.$router.push({name:e})}}},Q=H,q=Object(c["a"])(Q,F,B,!1,null,"7606f450",null),Y=q.exports,V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("WujieVue",{attrs:{width:"100%",height:"100%",name:"vue3",url:e.vue3Url,sync:!0,fetch:e.fetch,alive:!0,props:e.props,attrs:e.attrs,degrade:e.degrade,beforeLoad:e.lifecycles.beforeLoad,beforeMount:e.lifecycles.beforeMount,afterMount:e.lifecycles.afterMount,beforeUnmount:e.lifecycles.beforeUnmount,afterUnmount:e.lifecycles.afterUnmount,activated:e.lifecycles.activated,deactivated:e.lifecycles.deactivated,loadError:e.lifecycles.loadError,plugins:[{cssExcludes:["https://stackpath.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"]}]}})},K=[],z={data(){return{vue3Url:b("//localhost:7300"),props:{jump:this.jump},attrs:{src:b("//localhost:7300")},lifecycles:j,fetch:(e,t)=>e.includes(b("//localhost:7300"))?E(e,t):window.fetch(e,t),degrade:"true"===window.localStorage.getItem("degrade")}},methods:{jump(e){this.$router.push({name:e})}}},X=z,G=Object(c["a"])(X,V,K,!1,null,"768b8aa0",null),Z=G.exports,ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("WujieVue",{staticClass:"angular-container",attrs:{name:"angular12",url:e.url,attrs:e.attrs,fetch:e.fetch,sync:!0,degrade:e.degrade,beforeLoad:e.lifecycles.beforeLoad,beforeMount:e.lifecycles.beforeMount,afterMount:e.lifecycles.afterMount,beforeUnmount:e.lifecycles.beforeUnmount,afterUnmount:e.lifecycles.afterUnmount,activated:e.lifecycles.activated,deactivated:e.lifecycles.deactivated,loadError:e.lifecycles.loadError}})},te=[],ne={data(){return{url:b("//localhost:7400"),attrs:{src:b("//localhost:7400")},fetch:E,degrade:"true"===window.localStorage.getItem("degrade"),lifecycles:j}}},oe=ne,re=(n("6ebd"),Object(c["a"])(oe,ee,te,!1,null,"7fcccadb",null)),ie=re.exports,ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{height:"100%",width:"100%"}},[n("WujieVue",{staticClass:"item",attrs:{name:"react16",url:e.react16Url,sync:!0,fetch:e.fetch,props:e.props,attrs:e.react16Attrs,degrade:e.degrade,prefix:{"prefix-dialog":"/dialog","prefix-location":"/location"},beforeLoad:e.lifecycles.beforeLoad,beforeMount:e.lifecycles.beforeMount,afterMount:e.lifecycles.afterMount,beforeUnmount:e.lifecycles.beforeUnmount,afterUnmount:e.lifecycles.afterUnmount,activated:e.lifecycles.activated,deactivated:e.lifecycles.deactivated,loadError:e.lifecycles.loadError}}),n("WujieVue",{staticClass:"item",attrs:{name:"react17",url:e.react17Url,sync:!0,fetch:e.fetch,props:e.props,attrs:e.react17Attrs,degrade:e.degrade,alive:!0,beforeLoad:e.lifecycles.beforeLoad,beforeMount:e.lifecycles.beforeMount,afterMount:e.lifecycles.afterMount,beforeUnmount:e.lifecycles.beforeUnmount,afterUnmount:e.lifecycles.afterUnmount,activated:e.lifecycles.activated,deactivated:e.lifecycles.deactivated,loadError:e.lifecycles.loadError}}),n("WujieVue",{staticClass:"item",attrs:{name:"vue2",url:e.vue2Url,props:e.props,attrs:e.vue2Attrs,sync:!0,fetch:e.fetch,degrade:e.degrade,beforeLoad:e.lifecycles.beforeLoad,beforeMount:e.lifecycles.beforeMount,afterMount:e.lifecycles.afterMount,beforeUnmount:e.lifecycles.beforeUnmount,afterUnmount:e.lifecycles.afterUnmount,activated:e.lifecycles.activated,deactivated:e.lifecycles.deactivated,loadError:e.lifecycles.loadError}}),n("WujieVue",{staticClass:"item",attrs:{name:"vue3",url:e.vue3Url,sync:!0,fetch:e.vue3Fetch,props:e.props,attrs:e.vue3Attrs,degrade:e.degrade,alive:!0,beforeLoad:e.lifecycles.beforeLoad,beforeMount:e.lifecycles.beforeMount,afterMount:e.lifecycles.afterMount,beforeUnmount:e.lifecycles.beforeUnmount,afterUnmount:e.lifecycles.afterUnmount,activated:e.lifecycles.activated,deactivated:e.lifecycles.deactivated,loadError:e.lifecycles.loadError}}),n("WujieVue",{staticClass:"item",attrs:{name:"vite",url:e.vite,sync:!0,fetch:e.fetch,props:e.props,attrs:e.viteAttrs,degrade:e.degrade,beforeLoad:e.lifecycles.beforeLoad,beforeMount:e.lifecycles.beforeMount,afterMount:e.lifecycles.afterMount,beforeUnmount:e.lifecycles.beforeUnmount,afterUnmount:e.lifecycles.afterUnmount,activated:e.lifecycles.activated,deactivated:e.lifecycles.deactivated,loadError:e.lifecycles.loadError}}),n("WujieVue",{staticClass:"item",attrs:{name:"angular12",url:e.angular12Url,sync:!0,fetch:e.fetch,props:e.props,attrs:e.angular12Attrs,degrade:e.degrade,beforeLoad:e.lifecycles.beforeLoad,beforeMount:e.lifecycles.beforeMount,afterMount:e.lifecycles.afterMount,beforeUnmount:e.lifecycles.beforeUnmount,afterUnmount:e.lifecycles.afterUnmount,activated:e.lifecycles.activated,deactivated:e.lifecycles.deactivated,loadError:e.lifecycles.loadError}})],1)},le=[],se={data(){return{react16Url:b("//localhost:7600"),react17Url:b("//localhost:7100"),vue2Url:b("//localhost:7200"),vue3Url:b("//localhost:7300"),vite:b("//localhost:7500"),angular12Url:b("//localhost:7400"),react16Attrs:{src:b("//localhost:7600")},react17Attrs:{src:b("//localhost:7100")},vue2Attrs:{src:b("//localhost:7200")},vue3Attrs:{src:b("//localhost:7300")},viteAttrs:{src:b("//localhost:7500")},angular12Attrs:{src:b("//localhost:7400")},props:{jump:this.jump},degrade:"true"===window.localStorage.getItem("degrade"),fetch:E,lifecycles:j,vue3Fetch:(e,t)=>e.includes(b("//localhost:7300"))?E(e,t):window.fetch(e,t)}},methods:{jump(e){this.$router.push({name:e})}}},ae=se,ue=(n("97b6"),Object(c["a"])(ae,ce,le,!1,null,"43e2171e",null)),de=ue.exports,fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"contain",staticStyle:{height:"100%",width:"100%"}})},he=[];n("d9e2");const pe="data-wujie-id",me="data-wujie-Flag",ye="data-wujie-attach-css-flag",ve="wujie_iframe",we="_wujie_all_event",ge="position: fixed; z-index: 2147483647; visibility: hidden; inset: 0px; backface-visibility: hidden;",be="url参数为空",Ee="子应用调用reload无法生效",_e="此报错可以忽略，iframe主动中断主应用代码在子应用运行",je="事件订阅数量为空",xe="window上不存在fetch属性，需要自行polyfill",Ue="监听事件回调函数不存在",We="当前浏览器不支持无界，子应用将采用iframe方式渲染",Le="脚本请求出现错误",Me="样式请求出现错误",Oe="无界组件短时间重复渲染了两次，可能存在性能问题请检查代码";function Ce(e){return"function"===typeof e}function Pe(e){return"LINK"===(null===e||void 0===e?void 0:e.toUpperCase())||"STYLE"===(null===e||void 0===e?void 0:e.toUpperCase())||"SCRIPT"===(null===e||void 0===e?void 0:e.toUpperCase())||"IFRAME"===(null===e||void 0===e?void 0:e.toUpperCase())}const Ie=window.Proxy&&window.CustomElementRegistry,Se="function"===typeof document.all&&"undefined"===typeof document.all,Re=new WeakMap,Ae=e=>{if(Re.has(e))return!0;const t=Se?"function"===typeof e&&"undefined"!==typeof e:"function"===typeof e;return t&&Re.set(e,t),t},Te=new WeakMap;function De(e){if(Te.has(e))return Te.get(e);const t=0===e.name.indexOf("bound ")&&!e.hasOwnProperty("prototype");return Te.set(e,t),t}const $e=new WeakMap;function Je(e){const t=e.prototype&&e.prototype.constructor===e&&Object.getOwnPropertyNames(e.prototype).length>1;if(t)return!0;if($e.has(e))return $e.get(e);let n=t;if(!n){const t=e.toString(),o=/^function\b\s[A-Z].*/,r=/^class\b/;n=o.test(t)||r.test(t)}return $e.set(e,n),n}function ke(e,t){const n=e[t];if(Ae(n)&&!De(n)&&!Je(n)){const t=Function.prototype.bind.call(n,e);for(const e in n)t[e]=n[e];return n.hasOwnProperty("prototype")&&!t.hasOwnProperty("prototype")&&Object.defineProperty(t,"prototype",{value:n.prototype,enumerable:!1,writable:!0}),t}return n}function Ne(e){return window.document.querySelector(`iframe[${pe}="${e}"]`)}function Fe(e){if(!e)throw Xe(be),new Error;const t=Be(e),n=t.protocol+"//"+t.host,o=t.pathname+t.search+t.hash;return{urlElement:t,appHostPath:n,appRoutePath:o}}function Be(e){const t=window.document.createElement("a");return t.href=e,t}function He(e){const t=e.search.replace("?","").split("&"),n={};return t.forEach(e=>{const[t,o]=e.split("=");t&&o&&(n[t]=o)}),n}function Qe(e){const t=He(Be(window.location.href));return Object.keys(t).includes(e)}function qe(e,t,n){const o=e.Element.prototype.setAttribute;t.prototype.setAttribute=function(e,t){let r=t;e===n&&(r=new URL(t,this.baseURI||"").href),o.call(this,e,r)};const r=Object.getOwnPropertyDescriptor(t.prototype,n),{enumerable:i,configurable:c,get:l,set:s}=r;Object.defineProperty(t.prototype,n,{enumerable:i,configurable:c,get:function(){return l.call(this)},set:function(e){s.call(this,new URL(e,this.baseURI).href)}})}function Ye(e,t){var n;let o=Be(window.location.href);const r=He(o);o=null;const i=window.decodeURIComponent(r[e]||""),c=null===(n=i.match(/^{([^}]*)}/))||void 0===n?void 0:n[1];return t&&c?i.replace(`{${c}}`,t[c]):i}const Ve=window.requestIdleCallback||(e=>setTimeout(e,1));function Ke(e){return"string"===typeof e?document.querySelector(e):e}function ze(e,t){null===console||void 0===console||console.warn("[wujie warn]: "+e,t)}function Xe(e,t){null===console||void 0===console||console.error("[wujie error]: "+e,t)}function Ge(e){const t=e.indexOf(">")+1,n=e.lastIndexOf("<");return e.substring(t,n)}function Ze(e){if("object"===typeof e)return"/";try{const{origin:t,pathname:n}=new URL(e,location.href),o=n.split("/");return o.pop(),`${t}${o.join("/")}/`}catch(t){return console.warn(t),""}}function et(e){return function(t,...n){return e.reduce((e,t)=>Ce(t)?t(e,...n):e,t||"")}}function tt(e){Promise.resolve().then(e)}function nt(e,t,...n){try{e.map(e=>e[t]).filter(e=>Ce(e)).forEach(e=>e(...n))}catch(o){Xe(o)}}const ot=/(<script[\s\S]*?>)[\s\S]*?<\/script>/gi,rt=/<(script)\s+((?!type=('|")text\/ng-template\3).)*?>.*?<\/\1>/is,it=/.*\ssrc=('|")?([^>'"\s]+)/,ct=/.*\stype=('|")?([^>'"\s]+)/,lt=/.*\sentry\s*.*/,st=/.*\sasync\s*.*/,at=/.*\sdefer\s*.*/,ut=/.*\snomodule\s*.*/,dt=/.*\stype=('|")?module('|")?\s*.*/,ft=/<(link)\s+.*?>/gis,ht=/\srel=('|")?(preload|prefetch|modulepreload)\1/,pt=/.*\shref=('|")?([^>'"\s]+)/,mt=/.*\sas=('|")?font\1.*/,yt=/<style[^>]*>[\s\S]*?<\/style>/gi,vt=/\s+rel=('|")?stylesheet\1.*/,wt=/.*\shref=('|")?([^>'"\s]+)/,gt=/<!--([\s\S]*?)-->/g,bt=/<link(\s+|\s+.+\s+)ignore(\s*|\s+.*|=.*)>/is,Et=/<style(\s+|\s+.+\s+)ignore(\s*|\s+.*|=.*)>/is,_t=/<script(\s+|\s+.+\s+)ignore(\s*|\s+.*|=.*)>/is,jt=/.*\scrossorigin=?('|")?(use-credentials|anonymous)?('|")?/i;function xt(e){return e.startsWith("//")||e.startsWith("http://")||e.startsWith("https://")}function Ut(e,t){return new URL(e,t).toString()}function Wt(e){const t=["text/javascript","module","application/javascript","text/ecmascript","application/ecmascript"];return!e||-1!==t.indexOf(e)}function Lt(){const e=window.document.createElement("script");return"noModule"in e}const Mt=(e,t=!1)=>`\x3c!-- ${t?"prefetch/preload/modulepreload":""} link ${e} replaced by wujie --\x3e`,Ot=e=>`\x3c!-- inline-style-${e} replaced by wujie --\x3e`,Ct=(e,t="")=>`\x3c!-- ${t} script ${e} replaced by wujie --\x3e`,Pt="\x3c!-- inline scripts replaced by wujie --\x3e",It=e=>`\x3c!-- ignore asset ${e||"file"} replaced by wujie --\x3e`,St=(e,t)=>`\x3c!-- ${t?"nomodule":"module"} script ${e} ignored by wujie --\x3e`;function Rt(e,t,n){const o=[],r=[];let i=null;const c=Lt(),l=e.replace(gt,"").replace(ft,e=>{const n=!!e.match(vt);if(n){const n=e.match(wt),o=e.match(bt);if(n){const e=n&&n[2];let i=e;return e&&!xt(e)&&(i=Ut(e,t)),o?It(i):(r.push({src:i}),Mt(i))}}const o=e.match(ht)&&e.match(pt)&&!e.match(mt);if(o){const[,,t]=e.match(pt);return Mt(t,!0)}return e}).replace(yt,e=>{if(Et.test(e))return It("style file");{const t=Ge(e);return r.push({src:"",content:t}),Ot(r.length-1)}}).replace(ot,(e,n)=>{const r=n.match(_t),l=!!n.match(dt),s=n.match(jt),a=(null===s||void 0===s?void 0:s[2])||"",u=c&&!!n.match(ut)||!c&&l,d=n.match(ct),f=d&&d[2];if(!Wt(f))return e;if(rt.test(e)&&n.match(it)){const d=n.match(lt),f=n.match(it);let h=f&&f[2];if(i&&d)throw new SyntaxError("You should not set multiply entry script!");if(h&&!xt(h)&&(h=Ut(h,t)),i=i||d&&h,r)return It(h||"js file");if(u)return St(h||"js file",c);if(h){const e=!!n.match(st),t=!!n.match(at);return o.push(e||t?{async:e,defer:t,src:h,module:l,crossorigin:!!s,crossoriginType:a}:{src:h,module:l,crossorigin:!!s,crossoriginType:a}),Ct(h,(e?"async":t&&"defer")||"")}return e}{if(r)return It("js file");if(u)return St("js file",c);const t=Ge(e),n=t.split(/[\r\n]+/).every(e=>!e.trim()||e.trim().startsWith("//"));return!n&&t&&o.push({src:null,content:t,module:l,crossorigin:!!s,crossoriginType:a}),Pt}});let s={template:l,scripts:o,styles:r,entry:i||o[o.length-1]};return"function"===typeof n&&(s=n(s)),s}var At=function(e,t,n,o){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function c(e){try{s(o.next(e))}catch(t){i(t)}}function l(e){try{s(o["throw"](e))}catch(t){i(t)}}function s(e){e.done?n(e.value):r(e.value).then(c,l)}s((o=o.apply(e,t||[])).next())}))};const Tt={},Dt={},$t={};if(!window.fetch)throw Xe(xe),new Error;const Jt=window.fetch.bind(window);function kt(e){return e}function Nt(e,t,n){return At(this,void 0,void 0,(function*(){const o=et(e.plugins.map(e=>e.cssLoader)),r=n().map(({src:e,contentPromise:t})=>({src:e,contentPromise:t.then(t=>o(t,e))})),i=yield Ft(t,r);return e.replace?e.replace(i):i}))}function Ft(e,t){return At(this,void 0,void 0,(function*(){let n=e;return Promise.all(t.map((e,t)=>e.contentPromise.then(o=>{e.src?n=n.replace(Mt(e.src),`<style>/* ${e.src} */${o}</style>`):o&&(n=n.replace(Ot(t),`<style>/* inline-style-${t} */${o}</style>`))}))).then(()=>n)}))}const Bt=e=>e.startsWith("<"),Ht=(e,t,n,o,r)=>t[e]||(t[e]=n(e).then(n=>{if(n.status>=400){if(t[e]=null,o)return Xe(Me,{src:e,response:n}),null===r||void 0===r||r(e,new Error(Me)),"";throw Xe(Le,{src:e,response:n}),null===r||void 0===r||r(e,new Error(Le)),new Error(Le)}return n.text()}).catch(n=>{if(t[e]=null,o)return Xe(Me,e),null===r||void 0===r||r(e,n),"";throw Xe(Le,e),null===r||void 0===r||r(e,n),n}));function Qt(e,t=Jt,n){return e.map(({src:e,content:o})=>o?{src:"",contentPromise:Promise.resolve(o)}:Bt(e)?{src:"",contentPromise:Promise.resolve(Ge(e))}:{src:e,contentPromise:Ht(e,Tt,t,!0,n)})}function qt(e,t=Jt,n){return e.map(e=>{const{src:o,async:r,defer:i,module:c}=e;let l=null;return l=(r||i)&&o&&!c?new Promise((e,r)=>Ve(()=>Ht(o,Dt,t,!1,n).then(e,r))):c&&o?Promise.resolve(""):o?Ht(o,Dt,t,!1,n):Promise.resolve(e.content),Object.assign(Object.assign({},e),{contentPromise:l})})}function Yt(e,t){var n;const o=null!==(n=t.fetch)&&void 0!==n?n:Jt,{plugins:r,loadError:i}=t,c=r?et(r.map(e=>e.htmlLoader)):kt,l=r?r.map(e=>e.jsExcludes).reduce((e,t)=>e.concat(t),[]).filter(e=>e):[],s=r?r.map(e=>e.cssExcludes).reduce((e,t)=>e.concat(t),[]).filter(e=>e):[],a=Ze,u=(e,t)=>o(e).then(e=>e.text(),t=>(null===i||void 0===i||i(e,t),Promise.reject(t))).then(n=>{const r=a(e),{template:c,scripts:u,styles:d}=Rt(t(n),r);return{template:c,assetPublicPath:r,getExternalScripts:()=>qt(u.filter(e=>!e.src||!l.length||!l.includes(e.src)),o,i),getExternalStyleSheets:()=>Qt(d.filter(e=>!e.src||!s.length||!s.includes(e.src)),o,i)}});return(null===t||void 0===t?void 0:t.plugins.some(e=>e.htmlLoader))?u(e,c):$t[e]||($t[e]=u(e,c))}const Vt=window.__POWERED_BY_WUJIE__?window.__WUJIE.inject.idToSandboxMap:new Map;function Kt(e){return Vt.get(e)||null}function zt(e,t){Vt.set(e,t)}function Xt(e){Vt.delete(e)}const Gt={modifyLocalProperties:["createElement","createTextNode","documentURI","URL","getElementsByTagName"],modifyProperties:["createElement","createTextNode","documentURI","URL","getElementsByTagName","getElementsByClassName","getElementsByName","getElementById","querySelector","querySelectorAll","documentElement","scrollingElement","forms","images","links"],shadowProperties:["activeElement","childElementCount","children","firstElementChild","firstChild","fullscreenElement","lastElementChild","pictureInPictureElement","pointerLockElement","styleSheets"],shadowMethods:["append","contains","getSelection","elementFromPoint","elementsFromPoint","getAnimations","replaceChildren"],documentProperties:["characterSet","compatMode","contentType","designMode","dir","doctype","embeds","fullscreenEnabled","hidden","implementation","lastModified","pictureInPictureEnabled","plugins","readyState","referrer","visibilityState","fonts"],documentMethods:["execCommand","createRange","exitFullscreen","exitPictureInPicture","getElementsByTagNameNS","hasFocus","prepend"],documentEvents:["onreadystatechange","onpointerlockchange","onpointerlockerror","onbeforecopy","onbeforecut","onbeforepaste","onfreeze","onresume","onsearch","onfullscreenchange","onfullscreenerror","onsecuritypolicyviolation","onvisibilitychange"],ownerProperties:["head","body"]},Zt=["DOMContentLoaded","fullscreenchange","fullscreenerror","readystatechange","scroll","selectionchange","visibilitychange","wheel"],en=["gotpointercapture","lostpointercapture"],tn=["hashchange","popstate"],nn={IMG:"src",A:"href",SOURCE:"src"},on=["getComputedStyle","visualViewport","matchMedia","DOMParser"],rn=[/animationFrame$/i,/resizeObserver$|mutationObserver$|intersectionObserver$/i,/height$|width$|left$/i,/^screen/i,/X$|Y$/],cn=HTMLElement.prototype.appendChild,ln=HTMLElement.prototype.removeChild,sn=HTMLHeadElement.prototype.insertBefore,an=HTMLBodyElement.prototype.insertBefore,un=Window.prototype.addEventListener,dn=Window.prototype.removeEventListener,fn=Node.prototype.appendChild,hn=window.__POWERED_BY_WUJIE__?window.__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR__:Document.prototype.querySelector;function pn(e,t){return Object.defineProperties(e,{srcElement:{get:t},target:{get:t}}),e}function mn(e,t){const n=new CustomEvent(t),o=pn(n,()=>e);Ce(e["on"+t])?e["on"+t](o):e.dispatchEvent(o)}function yn(e,t){if(!e.innerHTML||t.degrade)return;const n=In([e.sheet]);n&&t.shadowRoot.head.appendChild(n)}function vn(e,t,n){const o=Object.getOwnPropertyDescriptor(Element.prototype,"innerHTML"),r=Object.getOwnPropertyDescriptor(HTMLElement.prototype,"innerText"),i=Object.getOwnPropertyDescriptor(Node.prototype,"textContent");Object.defineProperties(e,{innerHTML:{get:function(){return o.get.call(e)},set:function(r){o.set.call(e,t(r)),tt(()=>yn(this,n))}},innerText:{get:function(){return r.get.call(e)},set:function(o){r.set.call(e,t(o)),tt(()=>yn(this,n))}},textContent:{get:function(){return i.get.call(e)},set:function(o){i.set.call(e,t(o)),tt(()=>yn(this,n))}},appendChild:{value:function(o){return tt(()=>yn(this,n)),o.nodeType===Node.TEXT_NODE?fn.call(e,e.ownerDocument.createTextNode(t(o.textContent))):fn(o)}}})}function wn(e){return function(t,n){var o,r;let i=t;const{rawDOMAppendOrInsertBefore:c,wujieId:l}=e,s=Kt(l);if(!Pe(i.tagName)||!l)return c.call(this,i,n);const{styleSheetElements:a,replace:u,fetch:d,plugins:f,iframe:h,lifecycles:p}=s,m=h.contentDocument;if(i.tagName)switch(null===(o=i.tagName)||void 0===o?void 0:o.toUpperCase()){case"LINK":{const{href:e}=i;e&&!f.map(e=>e.cssExcludes).reduce((e,t)=>e.concat(t),[]).filter(e=>e).includes(e)&&Qt([{src:e}],d,p.loadError).forEach(({src:e,contentPromise:t})=>t.then(t=>{const o=m.createElement("style");o.innerHTML=et(f.map(e=>e.cssLoader))(u?u(t):t,e),a.push(o),yn(o,s),c.call(this,o,n),mn(i,"load"),i=null},()=>{mn(i,"error"),i=null}));const t=m.createComment(`dynamic link ${e} replaced by wujie`);return c.call(this,t,n)}case"STYLE":{const e=t;a.push(e);const o=e.innerHTML,r=e=>et(f.map(e=>e.cssLoader))(u?u(e):e);return o&&(e.innerHTML=r(o)),vn(e,r,s),yn(e,s),c.call(this,i,n)}case"SCRIPT":{const{src:e,text:t}=i;if(e&&!f.map(e=>e.jsExcludes).reduce((e,t)=>e.concat(t),[]).filter(e=>e).includes(e)){const t=e=>{if(null===s.iframe)return ze(Oe);to(e,s.iframe.contentWindow),mn(i,"load"),i=null};qt([{src:e}],d,p.loadError).forEach(e=>e.contentPromise.then(n=>{var o;if(null===s.execQueue)return ze(Oe);const r=null===(o=s.execQueue)||void 0===o?void 0:o.length;s.execQueue.push(()=>s.fiber?Ve(()=>{t(Object.assign(Object.assign({},e),{content:n}))}):t(Object.assign(Object.assign({},e),{content:n}))),r||s.execQueue.shift()()},()=>{mn(i,"error"),i=null}))}else{const e=null===(r=s.execQueue)||void 0===r?void 0:r.length;s.execQueue.push(()=>Ve(()=>{to({src:null,content:t},s.iframe.contentWindow)})),e||s.execQueue.shift()()}const o=m.createComment(`dynamic script ${e} replaced by wujie`);return c.call(this,o,n)}case"IFRAME":{if(""===i.getAttribute(me))return fn.call(hn.call(this.ownerDocument,"html"),i);const e=c.call(this,i,n);try{if(!i.getAttribute(pe)){const e=i.contentWindow.document.createElement("script");e.type="text/javascript",e.innerHTML=`Array.prototype.slice.call(window.parent.frames).some(iframe => {if(iframe.name === '${l}'){window.parent = iframe;return true};return false})`,i.contentDocument.head.insertBefore(e,i.contentDocument.head.firstChild)}}catch(y){Xe(y)}return e}default:}}}function gn(e,t){e.head.appendChild=wn({rawDOMAppendOrInsertBefore:fn,wujieId:t}),e.head.insertBefore=wn({rawDOMAppendOrInsertBefore:sn,wujieId:t}),e.body.appendChild=wn({rawDOMAppendOrInsertBefore:fn,wujieId:t}),e.body.insertBefore=wn({rawDOMAppendOrInsertBefore:an,wujieId:t})}var bn=function(e,t,n,o){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function c(e){try{s(o.next(e))}catch(t){i(t)}}function l(e){try{s(o["throw"](e))}catch(t){i(t)}}function s(e){e.done?n(e.value):r(e.value).then(c,l)}s((o=o.apply(e,t||[])).next())}))};const En={":root":":host"};class _n extends HTMLElement{connectedCallback(){if(this.shadowRoot)return;const e=this.attachShadow({mode:"open"}),t=Kt(this.getAttribute(pe));Zn(e,t.iframe.contentWindow),t.shadowRoot=e}disconnectedCallback(){const e=Kt(this.getAttribute(pe));e.unmount()}}function jn(){customElements.get("wujie-app")||customElements.define("wujie-app",_n)}function xn(e){const t=window.document.createElement("wujie-app");return t.setAttribute(pe,e),t.setAttribute("style","position:relative"),t.classList.add(ve),t}function Un(e,t){const n=Ke(t);return n&&!n.contains(e)&&(Pn(n),e&&cn.call(n,e)),n}function Wn(e,t){return bn(this,void 0,void 0,(function*(){const n=e.iframe.contentDocument,{plugins:o,replace:r}=e,i=(e,t)=>et(o.map(e=>e.cssLoader))(r?r(e):e,t),c=e.plugins.map(e=>e.cssBeforeLoaders).reduce((e,t)=>e.concat(t),[]).filter(e=>"object"===typeof e).reverse(),l=e.plugins.map(e=>e.cssAfterLoaders).reduce((e,t)=>e.concat(t),[]).filter(e=>"object"===typeof e);return yield Promise.all([Promise.all(Qt(c,e.fetch,e.lifecycles.loadError).map(({src:e,contentPromise:t})=>t.then(t=>({src:e,content:t})))).then(e=>{e.forEach(({src:e,content:o})=>{var r;if(!o)return;const c=n.createElement("style");c.setAttribute("type","text/css"),c.appendChild(n.createTextNode(o?i(o,e):o));const l=t.querySelector("head");null===l||void 0===l||l.insertBefore(c,null===(r=t.querySelector("head"))||void 0===r?void 0:r.firstChild)})}),Promise.all(Qt(l,e.fetch,e.lifecycles.loadError).map(({src:e,contentPromise:t})=>t.then(t=>({src:e,content:t})))).then(e=>{e.forEach(({src:e,content:o})=>{if(!o)return;const r=n.createElement("style");r.setAttribute("type","text/css"),r.appendChild(n.createTextNode(o?i(o,e):o)),t.appendChild(r)})})]).then(()=>t,()=>t)}))}function Ln(e,t){const n=e.document,o=n.createElement("html");o.innerHTML=t;const r=n.createTreeWalker(o,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;while(i){Zn(i,e);const t=nn[i.tagName],n=i[t];t&&i.setAttribute(t,new URL(n,i.baseURI||"").href),i=r.nextNode()}if(!o.querySelector("head")){const e=n.createElement("head");o.appendChild(e)}if(!o.querySelector("body")){const e=n.createElement("body");o.appendChild(e)}return o}function Mn(e,t,n){return bn(this,void 0,void 0,(function*(){const o=Ln(t,n),r=yield Wn(t.__WUJIE,o);e.appendChild(r);const i=document.createElement("div");i.setAttribute("style",ge),r.insertBefore(i,r.firstChild),e.head=e.querySelector("head"),e.body=e.querySelector("body"),Object.defineProperty(e.firstChild,"parentNode",{enumerable:!0,configurable:!0,get:()=>t.document}),gn(e,t.__WUJIE.id)}))}function On(e){const t=document.createElement("iframe");return t.setAttribute("style","width: 100%; height:100%"),t.setAttribute(pe,e),t}function Cn(e,t,n){return bn(this,void 0,void 0,(function*(){Pn(e);const o=Ln(t,n),r=yield Wn(t.__WUJIE,o);e.appendChild(r),Object.defineProperty(e.firstElementChild,"parentNode",{enumerable:!0,configurable:!0,get:()=>t.document}),gn(e,t.__WUJIE.id)}))}function Pn(e){while(e.firstChild)ln.call(e,e.firstChild)}function In(e){var t,n;const o=[],r=/:root/g;for(let i=0;i<e.length;i++){const c=null!==(n=null===(t=e[i])||void 0===t?void 0:t.cssRules)&&void 0!==n?n:[];for(let e=0;e<c.length;e++){const t=c[e].cssText;r.test(t)&&o.push(t.replace(r,e=>En[e]))}}if(o.length){const e=window.document.createElement("style");return e.innerHTML=o.join(""),e}}function Sn(e){const{sync:t,id:n,prefix:o}=e.__WUJIE;if(!t)return;const r=e.location.pathname+e.location.search+e.location.hash;let i="";o&&Object.keys(o).forEach(e=>{const t=o[e];r.startsWith(t)&&(!i||t.length>o[i].length)&&(i=e)});let c=Be(window.location.href);const l=He(c);l[n]=window.encodeURIComponent(i?r.replace(o[i],`{${i}}`):r);const s="?"+Object.keys(l).map(e=>e+"="+l[e]).join("&");c.search=s,c.href!==window.location.href&&window.history.replaceState(null,"",c.href),c=null}function Rn(e){const{pathname:t,search:n,hash:o}=e.location,{id:r,url:i,sync:c,execFlag:l,prefix:s,inject:a}=e.__WUJIE,u=c&&!l?Ye(r,s):i,d=(/^http/.test(u)?null:u)||i,{appRoutePath:f}=Fe(d),h=t+n+o;h!==f&&e.history.replaceState(null,"",a.mainHostPath+f)}function An(){let e=Be(window.location.href);const t=He(e);Object.keys(t).forEach(e=>{var n;const o=Kt(e);if(!o)return;const r=o.degrade?!window.document.contains(Ne(o.id)):!window.document.contains(null===(n=null===o||void 0===o?void 0:o.shadowRoot)||void 0===n?void 0:n.host);o.execFlag&&o.sync&&!o.hrefFlag&&r&&delete t[e]});const n="?"+Object.keys(t).map(e=>e+"="+t[e]).join("&");e.search=n,e.href!==window.location.href&&window.history.replaceState(null,"",e.href),e=null}function Tn(e,t){let n=Be(window.location.href);const o=He(n);o[e]=window.encodeURIComponent(t);const r="?"+Object.keys(o).map(e=>e+"="+o[e]).join("&");n.search=r,window.history.pushState(null,"",n.href),n=null}function Dn(){window.addEventListener("popstate",()=>{let e=Be(window.location.href);const t=He(e);e=null,Object.keys(t).map(e=>Kt(e)).filter(e=>e).forEach(e=>{const n=t[e.id],o=hn.call(e.iframe.contentDocument,"body");if(/http/.test(n))e.degrade?(Un(e.document.firstElementChild,o),no(window.decodeURIComponent(n),Ne(e.id).parentElement)):no(window.decodeURIComponent(n),e.shadowRoot.host.parentElement),e.hrefFlag=!0;else if(e.hrefFlag){if(e.degrade){const t=On(e.id);Un(t,e.el),Pn(t.contentDocument),qn(t.contentWindow,e.iframe.contentWindow),t.contentWindow.onunload=()=>{e.unmount()},t.contentDocument.appendChild(o.firstElementChild),e.document=t.contentDocument}else Un(e.shadowRoot.host,e.el);e.hrefFlag=!1}})})}function $n(e){e.addEventListener=function(t,n,o){if(nt(e.__WUJIE.plugins,"windowAddEventListenerHook",e,t,n,o),tn.includes(t))return un.call(e,t,n,o);un.call(window.window,t,n,o)},e.removeEventListener=function(t,n,o){if(nt(e.__WUJIE.plugins,"windowRemoveEventListenerHook",e,t,n,o),tn.includes(t))return dn.call(e,t,n,o);dn.call(window.window,t,n,o)}}function Jn(e,t){e.__WUJIE_PUBLIC_PATH__=t+"/",e.$wujie=e.__WUJIE.provide,e.__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR__=e.Document.prototype.querySelector,e.__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR_ALL__=e.Document.prototype.querySelectorAll}function kn(e,t,n){const o=e.history,r=o.pushState,i=o.replaceState;o.pushState=function(i,c,l){const s=n+e.location.pathname+e.location.search+e.location.hash,a=new URL(null===l||void 0===l?void 0:l.replace(t,""),s).href,u=void 0===l;r.call(o,i,c,u?void 0:a),u||(Nn(e,t,n),Sn(e))},o.replaceState=function(r,c,l){const s=n+e.location.pathname+e.location.search+e.location.hash,a=new URL(null===l||void 0===l?void 0:l.replace(t,""),s).href,u=void 0===l;i.call(o,r,c,u?void 0:a),u||(Nn(e,t,n),Sn(e))}}function Nn(e,t,n){var o;const r=new URL(null===(o=e.location.href)||void 0===o?void 0:o.replace(n,""),t),i=hn.call(e.document,"base");i&&i.setAttribute("href",t+r.pathname)}function Fn(e){function t(t){const n=e[t];try{return"function"!==typeof n||Je(n)?e[t]=window[t]:e[t]=window[t].bind(window),!0}catch(o){return ze(o.message),!1}}Object.getOwnPropertyNames(e).forEach(n=>{"getSelection"!==n?on.includes(n)?t(n):rn.some(o=>!(!o.test(n)||!(n in e.parent))&&t(n)):Object.defineProperty(e,n,{get:()=>e.document[n]})});const n=Object.getOwnPropertyNames(window).filter(e=>/^on/.test(e));n.forEach(t=>{const n=Object.getOwnPropertyDescriptor(e,t)||{enumerable:!0,writable:!0};try{Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:!0,get:()=>window[t],set:function(o){(n.writable||n.set)&&(window[t]=null===o||void 0===o?void 0:o.bind(e))}})}catch(t){ze(t.message)}}),nt(e.__WUJIE.plugins,"windowPropertyOverride",e)}function Bn(e){const t=e.EventTarget.prototype.addEventListener,n=e.EventTarget.prototype.removeEventListener,o=e.__WUJIE;e.EventTarget.prototype.addEventListener=function(e,n,r){const i=o.elementEventCacheMap.get(this);return i?i.find(e=>e.handler===n)||i.push({type:e,handler:n,options:r}):o.elementEventCacheMap.set(this,[{type:e,handler:n,options:r}]),t.call(this,e,n,r)},e.EventTarget.prototype.removeEventListener=function(e,t,r){const i=o.elementEventCacheMap.get(this);if(i){const e=null===i||void 0===i?void 0:i.findIndex(e=>e.handler===t);i.splice(e,1)}return(null===i||void 0===i?void 0:i.length)||o.elementEventCacheMap.delete(this),n.call(this,e,t,r)}}function Hn(e,t){const n=t.__WUJIE,o=new WeakMap,r=document.createTreeWalker(e);let i=r.currentNode;while(i){const e=n.elementEventCacheMap.get(i);(null===e||void 0===e?void 0:e.length)&&(o.set(i,e),e.forEach(e=>{i.addEventListener(e.type,e.handler,e.options)})),i=r.nextNode()}n.elementEventCacheMap=o}function Qn(e,t,n){const o=n.__WUJIE,r=new WeakMap,i=o.elementEventCacheMap.get(e);(null===i||void 0===i?void 0:i.length)&&(r.set(t,i),i.forEach(e=>{t.addEventListener(e.type,e.handler,e.options)})),o.elementEventCacheMap=r}function qn(e,t){Object.defineProperty(e.Event.prototype,"timeStamp",{get:()=>t.document.createEvent("Event").timeStamp})}function Yn(e){const t=e.__WUJIE,n=new WeakMap,o=new WeakMap;e.Document.prototype.addEventListener=function(r,i,c){let l=n.get(i);const s=o.get(i);return l||(l="function"===typeof i?i.bind(this):i,n.set(i,l)),s?s.includes(r)||s.push(r):o.set(i,[r]),nt(e.__WUJIE.plugins,"documentAddEventListenerHook",e,r,l,c),t.degrade?t.document.firstElementChild.addEventListener(r,l,c):Zt.includes(r)?window.document.addEventListener(r,l,c):en.includes(r)?(window.document.addEventListener(r,l,c),void t.shadowRoot.addEventListener(r,l,c)):void t.shadowRoot.addEventListener(r,l,c)},e.Document.prototype.removeEventListener=function(r,i,c){const l=n.get(i),s=o.get(i);if(l){if((null===s||void 0===s?void 0:s.includes(r))&&(s.splice(s.indexOf(r),1),s.length||(n.delete(i),o.delete(i))),nt(e.__WUJIE.plugins,"documentRemoveEventListenerHook",e,r,l,c),t.degrade)return t.document.firstElementChild.removeEventListener(r,l,c);if(Zt.includes(r))return window.document.removeEventListener(r,l,c);if(en.includes(r))return window.document.removeEventListener(r,l,c),void t.shadowRoot.removeEventListener(r,l,c);t.shadowRoot.removeEventListener(r,l,c)}else ze(Ue)};const r=Object.keys(e.HTMLElement.prototype).filter(e=>/^on/.test(e)),i=Object.keys(e.Document.prototype).filter(e=>/^on/.test(e));r.filter(e=>i.includes(e)).forEach(n=>{const o=Object.getOwnPropertyDescriptor(e.Document.prototype,n)||{enumerable:!0,writable:!0};try{Object.defineProperty(e.Document.prototype,n,{enumerable:o.enumerable,configurable:!0,get:()=>(t.degrade?t.document:t.shadowRoot).firstElementChild[n],set:o.writable?o=>{t.degrade?t.document.firstElementChild[n]=o.bind(e.document):t.shadowRoot.firstElementChild[n]=o.bind(e.document)}:void 0})}catch(n){ze(n.message)}});const{ownerProperties:c,modifyProperties:l,shadowProperties:s,shadowMethods:a,documentProperties:u,documentMethods:d,documentEvents:f}=Gt;l.concat(s,a,u,d).forEach(n=>{const o=Object.getOwnPropertyDescriptor(e.Document.prototype,n)||{enumerable:!0,writable:!0};try{Object.defineProperty(e.Document.prototype,n,{enumerable:o.enumerable,configurable:!0,get:()=>t.proxyDocument[n],set:void 0})}catch(r){ze(r.message)}}),f.forEach(n=>{const o=Object.getOwnPropertyDescriptor(e.Document.prototype,n)||{enumerable:!0,writable:!0};try{Object.defineProperty(e.Document.prototype,n,{enumerable:o.enumerable,configurable:!0,get:()=>(t.degrade?t:window).document[n],set:o.writable?o=>{(t.degrade?t:window).document[n]=o.bind(e.document)}:void 0})}catch(r){ze(r.message)}}),c.forEach(n=>{Object.defineProperty(e.document,n,{enumerable:!0,configurable:!0,get:()=>t.proxyDocument[n],set:void 0})}),nt(e.__WUJIE.plugins,"documentPropertyOverride",e)}function Vn(e){const t=e.Node.prototype.getRootNode;e.Node.prototype.getRootNode=function(n){const o=t.call(this,n);return o===e.__WUJIE.shadowRoot?e.document:o}}function Kn(e){qe(e,e.HTMLImageElement,"src"),qe(e,e.HTMLAnchorElement,"href"),qe(e,e.HTMLSourceElement,"src"),qe(e,e.HTMLLinkElement,"href"),qe(e,e.HTMLScriptElement,"src")}function zn(e,t){const n=e.document,o=n.createElement("base"),r=Be(e.location.href),i=Be(t);o.setAttribute("href",i.protocol+"//"+i.host+r.pathname),n.head.appendChild(o)}function Xn(e){const t=e.document;Pn(t);const n=t.createElement("html");n.innerHTML="<head></head><body></body>",t.appendChild(n),zn(e,e.__WUJIE.url),Fn(e),Yn(e),Vn(e),Kn(e)}function Gn(e,t){e.__WUJIE.iframeReady=new Promise(n=>{function o(){setTimeout(()=>{"about:blank"===e.location.href?o():(e.stop(),Xn(e),Qe(e.__WUJIE.id)||e.history.replaceState(null,"",t),n())},0)}o()})}function Zn(e,t){const n=t.__WUJIE.proxyLocation;Object.defineProperty(e,"baseURI",{configurable:!0,get:()=>n.protocol+"//"+n.host+n.pathname,set:void 0}),Object.defineProperty(e,"ownerDocument",{configurable:!0,get:()=>t.document})}function eo(e){e.addEventListener("hashchange",()=>Sn(e)),e.addEventListener("popstate",()=>{Sn(e)})}function to(e,t){const{src:n,module:o,content:r,crossorigin:i,crossoriginType:c,callback:l}=e,s=t.document.createElement("script"),a=t.document.createElement("script"),{replace:u,plugins:d}=t.__WUJIE;let f=et(d.map(e=>e.jsLoader))(u?u(r):r,n);r?t.__WUJIE.degrade||(f=`(function(window, self, global, location) {\n      ${f}\n}).bind(window.__WUJIE.proxy)(\n  window.__WUJIE.proxy,\n  window.__WUJIE.proxy,\n  window.__WUJIE.proxy,\n  window.__WUJIE.proxyLocation,\n);`):(o&&s.setAttribute("type","module"),n&&s.setAttribute("src",n),i&&s.setAttribute("crossorigin",c)),s.textContent=f||"",a.textContent="if(window.__WUJIE.execQueue && window.__WUJIE.execQueue.length){ window.__WUJIE.execQueue.shift()()}";const h=hn.call(t.document,"head");if(/^<!DOCTYPE html/i.test(f))return Xe(Le,e),h.appendChild(a);h.appendChild(s),null===l||void 0===l||l(t),h.appendChild(a)}function no(e,t){const n=window.document.createElement("iframe");n.setAttribute("src",e),n.setAttribute("style","height:100%;width:100%"),Un(n,t)}function oo(e,t,n,o,r){const i=window.document.createElement("iframe"),c=n+r,l=Object.assign(Object.assign({src:n},t),{style:"display: none",name:e.id,[me]:""});Object.keys(l).forEach(e=>i.setAttribute(e,l[e])),window.document.body.appendChild(i);const s=i.contentWindow;return s.__WUJIE=e,Jn(s,o),Gn(s,c),kn(s,o,n),$n(s),s.__WUJIE.degrade&&Bn(s),eo(s),i}function ro(e,t,n){const{shadowRoot:o,id:r,degrade:i,document:c}=e.contentWindow.__WUJIE;let l=t;if(!/^http/.test(l)){let e=Be(l);l=n+e.pathname+e.search+e.hash,e=null}if(e.contentWindow.__WUJIE.hrefFlag=!0,i){const t=hn.call(e.contentDocument,"body");Un(c.firstElementChild,t),no(window.decodeURIComponent(l),Ne(r).parentElement)}else no(l,o.host.parentElement);return Tn(r,l),!0}function io(e,t,n,o){const r=new Proxy(e.contentWindow,{get:(e,t)=>"location"===t?e.__WUJIE.proxyLocation:"self"===t?e.__WUJIE.proxy:"__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR__"===t||"__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR_ALL__"===t?e[t]:ke(e,t),set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>t in e}),i=new Proxy({},{get:function(t,n){var o;const r=window.document,i=e.contentWindow.__WUJIE.shadowRoot;if("createElement"===n||"createTextNode"===n)return new Proxy(r[n],{apply(t,n,o){const r=t.apply(e.contentDocument,o);return Zn(r,e.contentWindow),r}});if("documentURI"===n||"URL"===n)return e.contentWindow.__WUJIE.proxyLocation.href;if("getElementsByTagName"===n||"getElementsByClassName"===n||"getElementsByName"===n)return new Proxy(i.querySelectorAll,{apply(t,o,r){let c=r[0];return"getElementsByTagName"===n&&"script"===c?e.contentDocument.scripts:("getElementsByClassName"===n&&(c="."+c),"getElementsByName"===n&&(c=`[name="${c}"]`),t.call(i,c))}});if("getElementById"===n)return new Proxy(i.querySelector,{apply(e,t,n){return e.call(i,`[id="${n[0]}"]`)}});if("querySelector"===n||"querySelectorAll"===n)return i[n].bind(i);if("documentElement"===n||"scrollingElement"===n)return i.firstElementChild;if("forms"===n)return i.querySelectorAll("form");if("images"===n)return i.querySelectorAll("img");if("links"===n)return i.querySelectorAll("a");const{ownerProperties:c,shadowProperties:l,shadowMethods:s,documentProperties:a,documentMethods:u}=Gt;return c.concat(l).includes(n.toString())?"activeElement"===n&&null===i.activeElement?i.body:i[n]:s.includes(n.toString())?null!==(o=ke(i,n))&&void 0!==o?o:ke(r,n):a.includes(n.toString())?r[n]:u.includes(n.toString())?ke(r,n):void 0}}),c=new Proxy({},{get:function(r,i){const c=e.contentWindow.location;return"host"===i||"hostname"===i||"protocol"===i||"port"===i?t[i]:"href"===i?c[i].replace(n,o):"reload"===i?(ze(Ee),()=>null):ke(c,i)},set:function(t,n,r){return"href"===n?ro(e,r,o):(e.contentWindow.location[n]=r,!0)},ownKeys:function(){return Object.keys(e.contentWindow.location).filter(e=>"reload"!==e)},getOwnPropertyDescriptor:function(e,t){return{enumerable:!0,configurable:!0,value:this[t]}}});return{proxyWindow:r,proxyDocument:i,proxyLocation:c}}function co(e,t,n,o){const r={},i=e.contentWindow.__WUJIE;Object.defineProperties(r,{createElement:{get:()=>function(...t){const n=window.document.createElement.apply(e.contentDocument,t);return Zn(n,e.contentWindow),n}},createTextNode:{get:()=>function(...t){const n=window.document.createTextNode.apply(e.contentDocument,t);return Zn(n,e.contentWindow),n}},documentURI:{get:()=>i.proxyLocation.href},URL:{get:()=>i.proxyLocation.href},getElementsByTagName:{get(){return function(...t){const n=t[0];return"script"===n?e.contentDocument.scripts:i.document.getElementsByTagName(n)}}}});const{modifyLocalProperties:c,modifyProperties:l,ownerProperties:s,shadowProperties:a,shadowMethods:u,documentProperties:d,documentMethods:f}=Gt;l.filter(e=>!c.includes(e)).concat(s,a,u,d,f).forEach(e=>{Object.defineProperty(r,e,{get:()=>Ae(i.document[e])?i.document[e].bind(i.document):i.document[e]})});const h={},p=e.contentWindow.location,m=Object.keys(p),y=["host","hostname","port","protocol","port"];return y.forEach(e=>{h[e]=t[e]}),Object.defineProperties(h,{href:{get:()=>p.href.replace(n,o),set:t=>{ro(e,t,o)}},reload:{get(){return ze(Ee),()=>null}}}),m.filter(e=>!y.concat(["href","reload"]).includes(e)).forEach(e=>{Object.defineProperty(h,e,{get:()=>Ae(p[e])?p[e].bind(p):p[e]})}),{proxyDocument:r,proxyLocation:h}}const lo=window.__POWERED_BY_WUJIE__?window.__WUJIE.inject.appEventObjMap:new Map;class so{constructor(e){this.id=e,this.$clear(),lo.get(this.id)||lo.set(this.id,{}),this.eventObj=lo.get(this.id)}$on(e,t){const n=this.eventObj[e];return n?(n.includes(t)||n.push(t),this):(this.eventObj[e]=[t],this)}$onAll(e){return this.$on(we,e)}$once(e,t){const n=function(...o){this.$off(e,n),t(...o)}.bind(this);this.$on(e,n)}$off(e,t){const n=this.eventObj[e];if(!e||!n||!n.length)return ze(`${e} ${je}`),this;let o,r=n.length;while(r--)if(o=n[r],o===t){n.splice(r,1);break}return this}$offAll(e){return this.$off(we,e)}$emit(e,...t){let n=[],o=[];if(lo.forEach(t=>{t[e]&&(n=n.concat(t[e])),t[we]&&(o=o.concat(t[we]))}),!e||0===n.length&&0===o.length)ze(`${e} ${je}`);else try{for(let e=0,o=n.length;e<o;e++)n[e](...t);for(let n=0,r=o.length;n<r;n++)o[n](e,...t)}catch(r){Xe(r)}return this}$clear(){var e;const t=null!==(e=lo.get(this.id))&&void 0!==e?e:{},n=Object.keys(t);return n.forEach(e=>delete t[e]),this}}var ao=function(e,t,n,o){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function c(e){try{s(o.next(e))}catch(t){i(t)}}function l(e){try{s(o["throw"](e))}catch(t){i(t)}}function s(e){e.done?n(e.value):r(e.value).then(c,l)}s((o=o.apply(e,t||[])).next())}))};class uo{constructor(e){this.elementEventCacheMap=new WeakMap,window.__POWERED_BY_WUJIE__?this.inject=window.__WUJIE.inject:this.inject={idToSandboxMap:Vt,appEventObjMap:lo,mainHostPath:window.location.protocol+"//"+window.location.host};const{name:t,url:n,attrs:o,fiber:r,degrade:i,lifecycles:c,plugins:l}=e;this.id=t,this.fiber=r,this.degrade=i||!Ie,this.bus=new so(this.id),this.url=n,this.provide={bus:this.bus},this.styleSheetElements=[],this.execQueue=[],this.lifecycles=c,this.plugins=Array.isArray(l)?l:[];const{urlElement:s,appHostPath:a,appRoutePath:u}=Fe(n),{mainHostPath:d}=this.inject,f=oo(this,o,d,a,u);if(this.iframe=f,this.degrade){const{proxyDocument:e,proxyLocation:t}=co(f,s,d,a);this.proxyDocument=e,this.proxyLocation=t}else{const{proxyWindow:e,proxyDocument:t,proxyLocation:n}=io(f,s,d,a);this.proxy=e,this.proxyDocument=t,this.proxyLocation=n}this.provide.location=this.proxyLocation,zt(this.id,this)}active(e){return ao(this,void 0,void 0,(function*(){const{sync:t,url:n,el:o,template:r,props:i,alive:c,prefix:l,fetch:s,replace:a}=e;this.url=n,this.sync=t,this.alive=c,this.hrefFlag=!1,this.prefix=null!==l&&void 0!==l?l:this.prefix,this.replace=null!==a&&void 0!==a?a:this.replace,this.provide.props=null!==i&&void 0!==i?i:this.provide.props,yield this.iframeReady;const u=this.iframe.contentWindow,d=s?(e,t)=>s("string"===typeof e?new URL(e,this.proxyLocation.href).href:e,t):this.fetch;if(d&&(u.fetch=d,this.fetch=d),this.execFlag&&this.alive||Rn(u),Sn(u),this.template=null!==r&&void 0!==r?r:this.template,this.degrade){const e=On(this.id),t=hn.call(u.document,"body");return this.el=Un(e,null!==o&&void 0!==o?o:t),Pn(e.contentDocument),o&&Pn(t),qn(e.contentWindow,u),e.contentWindow.onunload=()=>{this.unmount()},this.document?this.alive?(e.contentDocument.appendChild(this.document.firstElementChild),Hn(e.contentDocument.firstElementChild,u)):(yield Cn(e.contentDocument,this.iframe.contentWindow,this.template),Qn(this.document.firstElementChild,e.contentDocument.firstElementChild,u)):yield Cn(e.contentDocument,this.iframe.contentWindow,this.template),void(this.document=e.contentDocument)}if(this.shadowRoot){if(this.el=Un(this.shadowRoot.host,o),this.alive)return}else{const e=hn.call(u.document,"body");this.el=Un(xn(this.id),null!==o&&void 0!==o?o:e)}yield Mn(this.shadowRoot,u,this.template),this.provide.shadowRoot=this.shadowRoot}))}start(e){return ao(this,void 0,void 0,(function*(){this.execFlag=!0;const t=yield e();if(!this.iframe)return;const n=this.iframe.contentWindow;n.__POWERED_BY_WUJIE__=!0;const o=this.plugins.map(e=>e.jsBeforeLoaders).reduce((e,t)=>e.concat(t),[]).filter(e=>"object"===typeof e),r=this.plugins.map(e=>e.jsAfterLoaders).reduce((e,t)=>e.concat(t),[]).filter(e=>"object"===typeof e),i=[],c=[],l=[];return t.forEach(e=>{e.defer?l.push(e):e.async?c.push(e):i.push(e)}),o.forEach(e=>{this.execQueue.push(()=>this.fiber?Ve(()=>to(e,n)):to(e,n))}),i.concat(l).forEach(e=>{this.execQueue.push(()=>e.contentPromise.then(t=>this.fiber?Ve(()=>to(Object.assign(Object.assign({},e),{content:t}),n)):to(Object.assign(Object.assign({},e),{content:t}),n)))}),c.forEach(e=>{e.contentPromise.then(t=>{this.fiber?Ve(()=>to(Object.assign(Object.assign({},e),{content:t}),n)):to(Object.assign(Object.assign({},e),{content:t}),n)})}),this.execQueue.push(this.fiber?()=>Ve(()=>this.mount()):()=>this.mount()),r.forEach(e=>{this.execQueue.push(()=>this.fiber?Ve(()=>to(e,n)):to(e,n))}),this.execQueue.shift()(),new Promise(e=>{this.execQueue.push(()=>{var t;e(),null===(t=this.execQueue.shift())||void 0===t||t()})})}))}mount(){var e,t,n,o,r,i,c;this.mountFlag||(this.attachHostCssRules(),Ce(this.iframe.contentWindow.__WUJIE_MOUNT)&&(null===(t=null===(e=this.lifecycles)||void 0===e?void 0:e.beforeMount)||void 0===t||t.call(e,this.iframe.contentWindow),this.iframe.contentWindow.__WUJIE_MOUNT(),null===(o=null===(n=this.lifecycles)||void 0===n?void 0:n.afterMount)||void 0===o||o.call(n,this.iframe.contentWindow),this.mountFlag=!0),this.alive&&(null===(i=null===(r=this.lifecycles)||void 0===r?void 0:r.activated)||void 0===i||i.call(r,this.iframe.contentWindow)),null===(c=this.execQueue.shift())||void 0===c||c())}unmount(){var e,t,n,o,r,i;this.degrade?setTimeout(()=>An()):An(),this.alive&&(null===(t=null===(e=this.lifecycles)||void 0===e?void 0:e.deactivated)||void 0===t||t.call(e,this.iframe.contentWindow)),this.mountFlag&&(!Ce(this.iframe.contentWindow.__WUJIE_UNMOUNT)||this.alive||this.hrefFlag||(null===(o=null===(n=this.lifecycles)||void 0===n?void 0:n.beforeUnmount)||void 0===o||o.call(n,this.iframe.contentWindow),this.iframe.contentWindow.__WUJIE_UNMOUNT(),null===(i=null===(r=this.lifecycles)||void 0===r?void 0:r.afterUnmount)||void 0===i||i.call(r,this.iframe.contentWindow),this.mountFlag=!1,this.bus.$clear(),this.degrade||Pn(this.shadowRoot)))}destroy(){this.bus.$clear(),this.shadowRoot=null,this.iframe=null,this.proxy=null,this.proxyDocument=null,this.proxyLocation=null,this.execQueue=null,this.provide=null,this.styleSheetElements=null,this.bus=null,this.el=null,this.replace=null,this.fetch=null,this.execFlag=null,this.mountFlag=null,this.hrefFlag=null,this.document=null,this.elementEventCacheMap=null,this.lifecycles=null,this.plugins=null,this.provide=null,this.inject=null,this.execQueue=null,this.prefix=null,(window.__POWERED_BY_WUJIE__?window.__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR_ALL__.call(window.document,"iframe"):window.document.querySelectorAll("iframe")).forEach(e=>{e.name===this.id&&e.parentNode.removeChild(e)}),Xt(this.id)}rebuildStyleSheets(){this.styleSheetElements&&this.styleSheetElements.length&&this.styleSheetElements.forEach(e=>{cn.call(this.degrade?this.document.head:this.shadowRoot.head,e)}),this.attachHostCssRules()}attachHostCssRules(){if(this.degrade)return;if(this.shadowRoot.host.hasAttribute(ye))return;const e=In(Array.from(this.iframe.contentDocument.querySelectorAll("style")).map(e=>e.sheet));e&&(this.shadowRoot.head.appendChild(e),this.styleSheetElements.push(e),this.shadowRoot.host.setAttribute(ye,""))}}var fo=function(e,t,n,o){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function c(e){try{s(o.next(e))}catch(t){i(t)}}function l(e){try{s(o["throw"](e))}catch(t){i(t)}}function s(e){e.done?n(e.value):r(e.value).then(c,l)}s((o=o.apply(e,t||[])).next())}))};const ho=new so(Date.now().toString());if(window.__WUJIE&&!window.__POWERED_BY_WUJIE__)throw ze(_e),new Error(_e);function po({name:e,url:t,replace:n,el:o,sync:r,prefix:i,alive:c,props:l,attrs:s={},fiber:a=!0,degrade:u,plugins:d,fetch:f,beforeLoad:h,beforeMount:p,afterMount:m,beforeUnmount:y,afterUnmount:v,activated:w,deactivated:g,loadError:b}){var E,_,j,x,U,W,L,M,O,C;return fo(this,void 0,void 0,(function*(){const P=Kt(e),I={beforeLoad:h,beforeMount:p,afterMount:m,beforeUnmount:y,afterUnmount:v,activated:w,deactivated:g,loadError:b};if(P){P.plugins=Array.isArray(d)?d:[],P.lifecycles=I;const e=P.iframe.contentWindow;if(P.preload&&(yield Promise.resolve(P.preload)),c){if(yield P.active({url:t,sync:r,prefix:i,el:o,props:l,alive:c,fetch:f,replace:n}),!P.execFlag){null===(_=null===(E=P.lifecycles)||void 0===E?void 0:E.beforeLoad)||void 0===_||_.call(E,P.iframe.contentWindow);const{getExternalScripts:e}=yield Yt(t,{fetch:f||window.fetch,plugins:P.plugins,loadError:P.lifecycles.loadError});yield P.start(e)}return null===(x=null===(j=P.lifecycles)||void 0===j?void 0:j.activated)||void 0===x||x.call(j,P.iframe.contentWindow),P.destroy}if(Ce(e.__WUJIE_MOUNT))return P.unmount(),yield P.active({url:t,sync:r,prefix:i,el:o,props:l,alive:c,fetch:f,replace:n}),null===(W=null===(U=P.lifecycles)||void 0===U?void 0:U.beforeMount)||void 0===W||W.call(U,P.iframe.contentWindow),e.__WUJIE_MOUNT(),null===(M=null===(L=P.lifecycles)||void 0===L?void 0:L.afterMount)||void 0===M||M.call(L,P.iframe.contentWindow),P.mountFlag=!0,P.rebuildStyleSheets(),P.destroy;P.destroy()}const S=new uo({name:e,url:t,attrs:s,fiber:a,degrade:u,plugins:d,lifecycles:I});null===(C=null===(O=S.lifecycles)||void 0===O?void 0:O.beforeLoad)||void 0===C||C.call(O,S.iframe.contentWindow);const{template:R,getExternalScripts:A,getExternalStyleSheets:T}=yield Yt(t,{fetch:f||window.fetch,plugins:S.plugins,loadError:S.lifecycles.loadError}),D=yield Nt(S,R,T);return yield S.active({url:t,sync:r,prefix:i,template:D,el:o,props:l,alive:c,fetch:f,replace:n}),yield S.start(A),S.destroy}))}function mo({name:e,url:t,replace:n,props:o,attrs:r={},fiber:i=!0,alive:c,degrade:l,fetch:s,exec:a,plugins:u,beforeLoad:d,beforeMount:f,afterMount:h,beforeUnmount:p,afterUnmount:m,activated:y,deactivated:v,loadError:w}){Ve(()=>{if(Kt(e)||Qe(e))return;const g={beforeLoad:d,beforeMount:f,afterMount:h,beforeUnmount:p,afterUnmount:m,activated:y,deactivated:v,loadError:w},b=new uo({name:e,url:t,attrs:r,fiber:i,degrade:l,plugins:u,lifecycles:g});if(b.preload)return b.preload;const E=()=>fo(this,void 0,void 0,(function*(){var e,r;null===(r=null===(e=b.lifecycles)||void 0===e?void 0:e.beforeLoad)||void 0===r||r.call(e,b.iframe.contentWindow);const{template:i,getExternalScripts:l,getExternalStyleSheets:u}=yield Yt(t,{fetch:s||window.fetch,plugins:b.plugins,loadError:b.lifecycles.loadError}),d=yield Nt(b,i,u);yield b.active({url:t,props:o,alive:c,template:d,fetch:s,replace:n}),a&&(yield b.start(l))}));b.preload=E()})}function yo(e){const t=Kt(e);t&&t.destroy()}Dn(),jn(),Ie||ze(We);const vo=function(e,t){const n=["//cdn-go.cn","//vfiles.gtimg.cn","//pingjs.qq.com"];return window.fetch(e,{...t,mode:"cors",credentials:n.some(t=>e.includes(t))?"omit":"include"}).then(e=>e,t=>{console.error(t);const n="<html>\n<body>\n  <div>点击登录链接完成登录后刷新</div>\n  <div>\n    <a target=\"_blank\" href='https://passport.oa.com/modules/passport/signin.ashx?url=http%3A%2F%2Fd.wuji.woa.com%2F_sp_login_%2F%3Furl%3D%252Fxy%252Fapp%252Fdev%252Ftest_wuji_damy%252Fdamyxu-wujie-alive%26app%3D'>点击登录</a>\n  </div>\n</body>\n</html>";let o=!1;return e.includes("//d.wuji.woa.com/xy/app/dev/test_wuji_damy/damyxu-wujie-alive")&&(o=!0),{text:()=>o?n:""}})},wo={version:"1.0.0",authId:"wujie",authKey:"d0938c84a7434cd1b0607a4324dff4d8"};var go={async mounted(){try{await po({name:"wuji",url:"//d.test.wuji.woa.com/xy/app/dev/test_wuji_damy/radio_test",el:this.$refs.contain,alive:!1,fetch:vo,props:wo,sync:!0})}catch(Xe){console.log(Xe)}}},bo=go,Eo=Object(c["a"])(bo,fe,he,!1,null,"9569a318",null),_o=Eo.exports,jo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"contain",staticStyle:{height:"100%",width:"100%"}})},xo=[],Uo={async mounted(){try{await po({name:"wuji",url:"//d.test.wuji.woa.com/xy/app/dev/test_wuji_damy/checkbox_test",el:this.$refs.contain,alive:!1,fetch:vo,props:wo,sync:!0})}catch(Xe){console.log(Xe)}}},Wo=Uo,Lo=Object(c["a"])(Wo,jo,xo,!1,null,"e94ae9f8",null),Mo=Lo.exports,Oo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("WujieVue",{attrs:{width:"100%",height:"100%",name:"wujiAlive",url:"//d.wuji.woa.com/xy/app/dev/test_wuji_damy/damyxu-wujie-alive",alive:!0,sync:!0,fetch:e.fetch,props:e.props}})},Co=[],Po={data(){return{fetch:vo,props:wo}}},Io=Po,So=Object(c["a"])(Io,Oo,Co,!1,null,"ec2649b4",null),Ro=So.exports;const Ao="/demo-main-vue/";o["a"].use(u["a"]);const To=[{path:"/home",name:"home",component:y},{path:"/react16",name:"react16",component:O},{path:"/react17",name:"react17",component:A},{path:"/vue2",name:"vue2",component:N},{path:"/vite",name:"vite",component:Y},{path:"/vue3",name:"vue3",component:Z},{path:"/angular12",name:"angular12",component:ie},{path:"/wuji-radio",name:"wujiRadio",component:_o},{path:"/wuji-checkbox",name:"wujiCheckbox",component:Mo},{path:"/wuji-alive",name:"wujiAlive",component:Ro},{path:"/all",name:"all",component:de},{path:"/",redirect:"/home"}],Do=new u["a"]({mode:"history",base:Ao,routes:To});var $o=Do;const Jo={name:"WujieVue",props:{width:{type:String,default:""},height:{type:String,default:""},name:{type:String,default:""},url:{type:String,default:""},sync:{type:Boolean,default:!1},prefix:{type:Object,default:void 0},alive:{type:Boolean,default:!1},props:{type:Object,default:void 0},attrs:{type:Object,default:void 0},replace:{type:Function,default:void 0},fetch:{type:Function,default:void 0},fiber:{type:Boolean,default:!0},degrade:{type:Boolean,default:!1},plugins:{type:Array,default:null},beforeLoad:{type:Function,default:null},beforeMount:{type:Function,default:null},afterMount:{type:Function,default:null},beforeUnmount:{type:Function,default:null},afterUnmount:{type:Function,default:null},activated:{type:Function,default:null},deactivated:{type:Function,default:null},loadError:{type:Function,default:null}},data(){return{destroy:null,startAppQueue:Promise.resolve()}},mounted(){ho.$onAll(this.handleEmit),this.execStartApp(),this.$watch(()=>this.name+this.url,()=>this.execStartApp())},methods:{handleEmit(e,...t){this.$emit(e,...t)},execStartApp(){this.startAppQueue=this.startAppQueue.then(async()=>{try{this.destroy=await po({name:this.name,url:this.url,el:this.$refs.wujie,alive:this.alive,fetch:this.fetch,props:this.props,attrs:this.attrs,replace:this.replace,sync:this.sync,prefix:this.prefix,fiber:this.fiber,degrade:this.degrade,plugins:this.plugins,beforeLoad:this.beforeLoad,beforeMount:this.beforeMount,afterMount:this.afterMount,beforeUnmount:this.beforeUnmount,afterUnmount:this.afterUnmount,activated:this.activated,deactivated:this.deactivated,loadError:this.loadError})}catch(Xe){console.log(Xe)}})}},beforeDestroy(){ho.$offAll(this.handleEmit)},render(e){return e("div",{style:{width:this.height,height:this.height},ref:"wujie"})}},ko=o["a"].extend(Jo);ko.preloadApp=mo,ko.bus=ho,ko.destroyApp=yo,ko.install=function(e){e.component("WujieVue",ko)};var No=ko,Fo=n("160c"),Bo=n("f933");n("b550"),n("3444"),n("7ef1");const Ho=!0,{preloadApp:Qo,bus:qo}=No;if(o["a"].use(No).use(Fo["a"]).use(Bo["a"]),o["a"].config.productionTip=!1,qo.$on("click",e=>window.alert(e)),"false"!==window.localStorage.getItem("preload")){const e="true"===window.localStorage.getItem("degrade")||!window.Proxy||!window.CustomElementRegistry;Qo({name:"react16",url:b("//localhost:7600"),attrs:Ho?{src:b("//localhost:7600")}:{},exec:!0,fetch:E,degrade:e,plugins:U,...j}),Qo({name:"react17",url:b("//localhost:7100"),attrs:Ho?{src:b("//localhost:7100")}:{},exec:!0,alive:!0,fetch:E,degrade:e,...j}),Qo({name:"vue2",url:b("//localhost:7200"),attrs:Ho?{src:b("//localhost:7200")}:{},exec:!0,fetch:E,degrade:e,...j}),Qo({name:"vue3",url:b("//localhost:7300"),attrs:Ho?{src:b("//localhost:7300")}:{},exec:!0,alive:!0,fetch:(e,t)=>e.includes(b("//localhost:7300"))?E(e,t):window.fetch(e,t),degrade:e,...j}),Qo({name:"angular12",url:b("//localhost:7400"),attrs:Ho?{src:b("//localhost:7400")}:{},exec:!0,fetch:E,degrade:e,...j}),Qo({name:"vite",url:b("//localhost:7500"),attrs:Ho?{src:b("//localhost:7500")}:{},exec:!0,fetch:E,degrade:e,...j})}new o["a"]({router:$o,render:e=>e(a)}).$mount("#app")},"6ebd":function(e,t,n){"use strict";n("b7d3")},"85ec":function(e,t,n){},"97b6":function(e,t,n){"use strict";n("068e")},a5f5:function(e,t,n){},b7d3:function(e,t,n){},ed34:function(e,t,n){}});
//# sourceMappingURL=app.9fdfb0b5.js.map