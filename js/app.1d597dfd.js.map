{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/views/Angular12.vue?525e","webpack:///./src/views/Multiple.vue?b2b2","webpack:///./src/views/Home.vue?59e1","webpack:///./src/App.vue","webpack:///src/App.vue","webpack:///./src/App.vue?673b","webpack:///./src/App.vue?a392","webpack:///./src/views/Home.vue","webpack:///src/views/Home.vue","webpack:///./src/views/Home.vue?ca9c","webpack:///./src/views/Home.vue?528c","webpack:///./src/views/React16.vue","webpack:///./src/hostMap.js","webpack:///src/views/React16.vue","webpack:///./src/views/React16.vue?833d","webpack:///./src/views/React16.vue?b15e","webpack:///./src/views/React16-sub.vue","webpack:///src/views/React16-sub.vue","webpack:///./src/views/React16-sub.vue?25d3","webpack:///./src/views/React16-sub.vue?88cf","webpack:///./src/views/React17.vue","webpack:///src/views/React17.vue","webpack:///./src/views/React17.vue?fc38","webpack:///./src/views/React17.vue?f716","webpack:///./src/views/React17-sub.vue","webpack:///../src/constant.ts","webpack:///../src/utils.ts","webpack:///../src/template.ts","webpack:///../src/plugin.ts","webpack:///../src/entry.ts","webpack:///../src/common.ts","webpack:///../src/effect.ts","webpack:///../src/shadow.ts","webpack:///../src/sync.ts","webpack:///../src/iframe.ts","webpack:///../src/proxy.ts","webpack:///../src/event.ts","webpack:///../src/sandbox.ts","webpack:///../src/index.ts","webpack:///../index.js","webpack:///src/views/React17-sub.vue","webpack:///./src/views/React17-sub.vue?9596","webpack:///./src/views/React17-sub.vue?2167","webpack:///./src/views/Vue2.vue","webpack:///src/views/Vue2.vue","webpack:///./src/views/Vue2.vue?9ff0","webpack:///./src/views/Vue2.vue?642b","webpack:///./src/views/Vue2-sub.vue","webpack:///src/views/Vue2-sub.vue","webpack:///./src/views/Vue2-sub.vue?1b98","webpack:///./src/views/Vue2-sub.vue?2da2","webpack:///./src/views/Vite.vue","webpack:///src/views/Vite.vue","webpack:///./src/views/Vite.vue?548c","webpack:///./src/views/Vite.vue?8ad0","webpack:///./src/views/Vite-sub.vue","webpack:///src/views/Vite-sub.vue","webpack:///./src/views/Vite-sub.vue?a4d1","webpack:///./src/views/Vite-sub.vue?3e8d","webpack:///./src/views/Vue3.vue","webpack:///src/views/Vue3.vue","webpack:///./src/views/Vue3.vue?121b","webpack:///./src/views/Vue3.vue?ff0c","webpack:///./src/views/Vue3-sub.vue","webpack:///src/views/Vue3-sub.vue","webpack:///./src/views/Vue3-sub.vue?b95f","webpack:///./src/views/Vue3-sub.vue?937e","webpack:///./src/views/Angular12.vue","webpack:///src/views/Angular12.vue","webpack:///./src/views/Angular12.vue?d10d","webpack:///./src/views/Angular12.vue?d158","webpack:///./src/views/Multiple.vue","webpack:///src/views/Multiple.vue","webpack:///./src/views/Multiple.vue?12d8","webpack:///./src/views/Multiple.vue?82ba","webpack:///./src/views/PostMessage.vue","webpack:///src/views/PostMessage.vue","webpack:///./src/views/PostMessage.vue?fee8","webpack:///./src/views/PostMessage.vue?fd53","webpack:///./src/router/index.js","webpack:///./src/fetch.js","webpack:///./src/lifecycle.js","webpack:///./src/plugin.js","webpack:///./src/main.js","webpack:///./src/App.vue?92ec","webpack:///./src/views/PostMessage.vue?e728","webpack:///./src/views/Home.vue?7938"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","render","_vm","this","_c","_self","attrs","class","active","on","close","_v","react16Flag","nativeOn","$event","handleFlag","directives","rawName","expression","staticClass","react17Flag","vue2Flag","degrade","vue3Flag","_e","viteFlag","stopPropagation","staticRenderFns","mounted","beforeDestroy","methods","component","staticStyle","slot","disable","model","callback","$$v","preload","style","width","height","_m","watch","val","setTimeout","react16Url","map","hostMap","host","computed","react17Url","WUJIE_APP_ID","WUJIE_SCRIPT_ID","WUJIE_DATA_FLAG","CONTAINER_POSITION_DATA_FLAG","CONTAINER_OVERFLOW_DATA_FLAG","LOADING_DATA_FLAG","WUJIE_DATA_ATTACH_CSS_FLAG","WUJIE_IFRAME_CLASS","WUJIE_ALL_EVENT","WUJIE_SHADE_STYLE","WUJIE_LOADING_STYLE","WUJIE_LOADING_SVG","WUJIE_TIPS_NO_URL","WUJIE_TIPS_RELOAD_DISABLED","WUJIE_TIPS_STOP_APP","WUJIE_TIPS_STOP_APP_DETAIL","WUJIE_TIPS_NO_SUBJECT","WUJIE_TIPS_NO_FETCH","WUJIE_TIPS_NOT_SUPPORTED","WUJIE_TIPS_SCRIPT_ERROR_REQUESTED","WUJIE_TIPS_CSS_ERROR_REQUESTED","WUJIE_TIPS_HTML_ERROR_REQUESTED","WUJIE_TIPS_REPEAT_RENDER","WUJIE_TIPS_NO_SCRIPT","WUJIE_TIPS_GET_ELEMENT_BY_ID","isFunction","isHijackingTag","tagName","toUpperCase","wujieSupport","Proxy","CustomElementRegistry","naughtySafari","document","all","callableFnCacheMap","WeakMap","isCallable","fn","has","callable","set","boundedMap","isBoundedFunction","bounded","indexOf","fnRegexCheckCacheMap","isConstructable","hasPrototypeMethods","constructor","getOwnPropertyNames","constructable","fnString","toString","constructableFunctionRegex","classRegex","test","setFnCacheMap","checkProxyFunction","target","getTargetValue","boundValue","Function","writable","getDegradeIframe","id","querySelector","setAttrsToElement","element","keys","forEach","setAttribute","appRouteParse","url","error","Error","urlElement","anchorElementGenerator","appHostPath","protocol","appRoutePath","pathname","search","hash","startsWith","createElement","href","getAnchorElementQueryMap","anchorElement","queryString","_toConsumableArray","URLSearchParams","entries","reduce","isMatchSyncQueryById","queryMap","location","includes","fixElementCtrSrcOrHref","iframeWindow","elementCtr","attr","rawElementSetAttribute","Element","targetValue","getAbsolutePath","baseURI","rawAnchorElementHrefDescriptor","getOwnPropertyDescriptor","configurable","getCurUrl","proxyLocation","base","URL","getSyncUrl","prefix","winUrlElement","syncUrl","validShortPath","match","_syncUrl$match","replace","requestIdleCallback","cb","getContainer","container","warn","msg","console","getInlineCode","start","end","lastIndexOf","substring","defaultGetPublicPath","entry","_typeof","origin","paths","split","pop","join","e","compose","fnList","code","args","arguments","newCode","nextTick","Promise","resolve","then","execHooks","plugins","hookName","plugin","filter","hook","isScriptElement","count","setTagToScript","tag","scriptTag","String","getTagFromScript","getAttribute","mergeOptions","options","cacheOptions","el","html","exec","undefined","fetch","props","sync","loading","degradeAttrs","fiber","alive","lifecycles","beforeLoad","beforeMount","afterMount","beforeUnmount","afterUnmount","activated","deactivated","loadError","eventTrigger","eventName","detail","event","CustomEvent","createEvent","initCustomEvent","dispatchEvent","stopMainAppRun","ALL_SCRIPT_REGEX","SCRIPT_TAG_REGEX","SCRIPT_SRC_REGEX","SCRIPT_TYPE_REGEX","SCRIPT_ENTRY_REGEX","SCRIPT_ASYNC_REGEX","DEFER_ASYNC_REGEX","SCRIPT_NO_MODULE_REGEX","SCRIPT_MODULE_REGEX","LINK_TAG_REGEX","LINK_PRELOAD_OR_PREFETCH_REGEX","LINK_HREF_REGEX","LINK_AS_FONT","STYLE_TAG_REGEX","STYLE_TYPE_REGEX","STYLE_HREF_REGEX","HTML_COMMENT_REGEX","LINK_IGNORE_REGEX","STYLE_IGNORE_REGEX","SCRIPT_IGNORE_REGEX","CROSS_ORIGIN_REGEX","hasProtocol","getEntirePath","path","isValidJavaScriptType","type","handleTypes","parseTagAttributes","TagOuterHTML","pattern","matches","attributeMatches","attributesString","attributesPattern","attributesObject","attributeName","attributeValue","isModuleScriptSupported","genLinkReplaceSymbol","linkHref","preloadOrPrefetch","getInlineStyleReplaceSymbol","index","genScriptReplaceSymbol","scriptSrc","inlineScriptReplaceSymbol","genIgnoreAssetReplaceSymbol","genModuleScriptReplaceSymbol","moduleSupport","processTpl","tpl","postProcessTemplate","scripts","styles","template","styleType","styleHref","styleIgnore","newHref","src","preloadOrPrefetchType","content","scriptIgnore","isModuleScript","isCrossOriginScript","crossOriginType","moduleScriptIgnore","matchedScriptTypeMatch","matchedScriptType","matchedScriptEntry","matchedScriptSrcMatch","matchedScriptSrc","SyntaxError","isAsyncScript","isDeferScript","async","defer","crossorigin","crossoriginType","isPureCommentBlock","every","line","trim","tplResult","getCssLoader","cssLoader","getJsLoader","jsLoader","getPresetLoaders","loaderType","loaders","res","preLoaders","curLoaders","concat","reverse","getEffectLoaders","isMatchUrl","effectLoaders","some","loader","cssRelativePathResolve","baseUrl","urlReg","pre","post","base64Regx","isBase64","defaultPlugin","cssBeforeLoaders","getPlugins","Array","isArray","styleCache","scriptCache","embedHTMLCache","defaultFetch","defaultGetTemplate","processCssLoader","sandbox","getExternalStyleSheets","a","curUrl","composeCssLoader","processedCssList","ignore","contentPromise","_context","getEmbedHTML","embedHTML","styleResultList","styleResult","isInlineCode","fetchAssets","cache","cssFlag","response","status","text","getExternalScripts","script","reject","importHTML","params","opts","htmlLoader","jsExcludes","cssExcludes","jsIgnores","cssIgnores","getPublicPath","getHtmlParseResult","assetPublicPath","idToSandboxCacheMap","__WUJIE_INJECT","_window$__WUJIE_INJEC","idToSandboxMap","cacheMap","__POWERED_BY_WUJIE__","__WUJIE","inject","Map","getWujieById","wujie","getOptionsById","addSandboxCacheWithWujie","wujieCache","deleteWujieById","addSandboxCacheWithOptions","documentProxyProperties","modifyLocalProperties","modifyProperties","shadowProperties","shadowMethods","documentProperties","documentMethods","documentEvents","ownerProperties","appDocumentAddEventListenerEvents","appDocumentOnEvents","mainDocumentAddEventListenerEvents","mainAndAppAddEventListenerEvents","appWindowAddEventListenerEvents","appWindowOnEvent","relativeElementTagAttrMap","IMG","A","SOURCE","windowProxyProperties","windowRegWhiteList","rawElementAppendChild","HTMLElement","appendChild","rawElementRemoveChild","removeChild","rawElementContains","contains","rawHeadInsertBefore","HTMLHeadElement","insertBefore","rawBodyInsertBefore","HTMLBodyElement","rawAddEventListener","Node","addEventListener","rawRemoveEventListener","removeEventListener","rawWindowAddEventListener","rawWindowRemoveEventListener","rawAppendChild","rawDocumentQuerySelector","__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR__","Document","patchCustomEvent","elementGetter","defineProperties","srcElement","manualInvokeElementEvent","customEvent","patchedEvent","handleStylesheetElementPatch","stylesheetElement","innerHTML","patcher","getPatchStyleElements","sheet","hostStyleSheetElement","fontStyleSheetElement","shadowRoot","head","_patcher","clearTimeout","patchStylesheetElement","_hasPatchStyle","innerHTMLDesc","innerTextDesc","textContentDesc","RawInsertRule","_stylesheetElement$sh","insertRule","patchSheetInsertRule","_this","innerText","_this2","textContent","_this3","node","_this4","nodeType","TEXT_NODE","ownerDocument","createTextNode","rule","dynamicScriptExecStack","rewriteAppendOrInsertChild","newChild","refChild","rawDOMAppendOrInsertBefore","wujieId","styleSheetElements","iframe","patchElementEffect","contentWindow","iframeDocument","contentDocument","_element$tagName","rel","styleFlag","endsWith","rawAttrs","outerHTML","_this5","comment","createComment","crossOrigin","execScript","scriptResult","onload","insertScriptToIframe","scriptOptions","execQueue","execQueueLength","_sandbox$execQueue","_sandbox$execQueue2","findScriptElementFromIframe","rawElement","wujieTag","targetScript","__WUJIE_RAW_DOCUMENT_HEAD__","rewriteContains","other","rewriteRemoveChild","child","patchEventListener","listenerMap","_cacheListeners","listener","listeners","typeListeners","patchRenderEffect","body","cssSelectorMap","defineWujieWebComponent","customElements","WujieApp","_inherits","_classCallCheck","_createClass","attachShadow","unmount","define","createWujieWebComponent","contentElement","classList","add","renderElementToContainer","selectorOrElement","clearChild","initRenderIframeAndContainer","parent","createIframeContainer","open","write","processCssLoaderForTemplate","cssAfterLoaders","contentList","styleElement","firstChild","replaceHeadAndBody","headElement","bodyElement","cloneNode","parentNode","replaceChild","renderTemplateToHtml","execFlag","parser","DOMParser","parsedDocument","parseFromString","parsedHtml","documentElement","sourceAttributes","attributes","ElementIterator","createTreeWalker","NodeFilter","SHOW_ELEMENT","nextElement","currentNode","relativeAttr","nextNode","renderTemplateToShadowRoot","_context2","processedHtml","shade","defaultStyle","renderTemplateToIframe","renderDocument","_context3","root","addLoading","containerStyles","getComputedStyle","position","overflow","setProperty","loadingContainer","removeLoading","positionFlag","overflowFlag","removeProperty","removeAttribute","rootStyleSheets","rootCssRules","fontCssRules","rootStyleReg","cssRules","_rootStyleSheets$i","cssRuleText","cssText","CSSRule","FONT_FACE_RULE","rootStyleSheetElement","syncUrlToWindow","shortPath","longPath","encodeURIComponent","newQuery","history","replaceState","syncUrlToIframe","idUrl","preAppRoutePath","mainHostPath","clearInactiveAppUrl","hrefFlag","activeFlag","pushUrlToWindow","pushState","processAppForHrefJump","iframeBody","renderIframeReplaceApp","decodeURIComponent","parentElement","patchEventTimeStamp","onunload","firstElementChild","patchIframeEvents","__WUJIE_EVENTLISTENER__","Set","targetWindow","__WUJIE_RAW_WINDOW__","patchIframeVariable","__WUJIE_PUBLIC_PATH__","$wujie","provide","patchIframeHistory","rawHistoryPushState","rawHistoryReplaceState","title","mainUrl","ignoreFlag","updateBase","_iframeWindow$locatio","baseElement","patchWindowEffect","processWindowProperty","message","reg","windowOnEvents","descriptor","handler","recordEventListeners","elementListenerList","elementEventCacheMap","find","findIndex","ele","recoverEventListeners","rootElement","recoverDocumentListeners","oldRootElement","newRootElement","Event","timeStamp","patchDocumentEffect","handlerCallbackMap","handlerTypeMap","typeList","elementOnEvents","documentOnEvent","propKey","proxyDocument","patchNodeEffect","rawGetRootNode","getRootNode","rawInsertRule","rawRemoveChild","rootNode","nodeName","toLowerCase","isConnected","_node$parentNode","patchRelativeUrlEffect","HTMLImageElement","HTMLAnchorElement","HTMLSourceElement","HTMLLinkElement","HTMLScriptElement","HTMLMediaElement","initBase","iframeUrlElement","appUrlElement","initIframeDom","newDoc","implementation","createHTMLDocument","newDocumentElement","importNode","__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR_ALL__","querySelectorAll","__WUJIE_RAW_DOCUMENT_CREATE_ELEMENT__","__WUJIE_RAW_DOCUMENT_CREATE_TEXT_NODE__","syncIframeUrlToWindow","stopIframeLoading","useObjectURL","oldDoc","loopDeadline","Date","now","loop","err","deadline","loop2","disableSandboxEmptyPageURL","stop","execCommand","_hasPatch","scriptElement","nextScriptElement","execNextScript","afterExecScript","isOutlineScript","onerror","disabledMarkKey","disabled","localStorage","getItem","createObjectURL","prevURL","getSandboxEmptyPageURL","blob","Blob","setItem","iframeGenerator","attrsMerge","iframeReady","locationHrefSet","hrefElement","proxyGenerator","proxyWindow","proxy","_fakeDocument","rawCreateElement","rawCreateTextNode","_createElement","_ctx","rawCreateMethod","arg","ctx","_ctx$propKey","rawPropMap","_ctx$propKey2","activeElement","_fakeLocation","_args$","ownKeys","_target","localGenerator","documentURI","getElementsByTagName","getElementById","_sandbox$document","locationKeys","constantKey","reload","appEventObjMap","EventBus","$clear","eventObj","cbs","$on","$off","allCbs","events","Wujie","_defineProperty","bus","iframeFetch","input","init","_initRenderIframeAndC","patchCssRules","scriptResultList","beforeScriptResultList","afterScriptResultList","syncScriptResultList","asyncScriptResultList","deferScriptResultList","beforeScriptResult","mount","domContentLoadedTrigger","afterScriptResult","domLoadedTrigger","__WUJIE_UNMOUNT","mountFlag","__WUJIE_MOUNT","_context4","styleSheetElement","hasAttribute","from","setupApp","startApp","startOptions","_yield$importHTML2","destroy","rebuildStyleSheets","newSandbox","WuJie","_yield$importHTML3","preloadApp","preOptions","runPreload","_yield$importHTML","destroyApp","wujieVueOptions","default","Boolean","startAppQueue","__WUJIE_QUEUE","$onAll","handleEmit","execStartApp","$watch","$emit","rawStartApp","$refs","log","$offAll","ref","WujieVue","Vue","extend","install","wujieVue","immediate","vue2Url","jump","viteUrl","vue3Url","vite","angular12Url","_s","postMessageToVue2","postMessageToVue3","subAppWindow","handleMessage","onMounted","basename","use","VueRouter","routes","Home","React16","React16Sub","React17","React17Sub","Vue2","Vue2Sub","Vite","ViteSub","Vue3","Vue3Sub","Angular12","Multiple","PostMessage","redirect","router","credentials","appWindow","jsBeforeLoaders","jsAfterLoaders","isProduction","process","Switch","Tooltip","button","Icon","config","productionTip","alert","mainName","mainPath","currentName","currentRoute","currentPath","credentialsFetch","h","App","$mount"],"mappings":"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","file":"js/app.1d597dfd.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/demo-main-vue/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../../../node_modules/.pnpm/mini-css-extract-plugin@0.9.0_webpack@4.46.0/node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@3.0.0/node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/index.js??vue-loader-options!./Angular12.vue?vue&type=style&index=0&id=2dc62798&prod&lang=css&scoped=true&\"","export * from \"-!../../../../node_modules/.pnpm/mini-css-extract-plugin@0.9.0_webpack@4.46.0/node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@3.0.0/node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/index.js??vue-loader-options!./Multiple.vue?vue&type=style&index=0&id=7ef41522&prod&scoped=true&lang=css&\"","export * from \"-!../../../../node_modules/.pnpm/mini-css-extract-plugin@0.9.0_webpack@4.46.0/node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@3.0.0/node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=1&id=72f0e334&prod&lang=css&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"app\"}},[_c('div',{class:_vm.active ? 'active' : '',attrs:{\"id\":\"nav\"},on:{\"click\":_vm.close}},[_c('router-link',{attrs:{\"to\":\"/home\"}},[_vm._v(\"\")]),_c('router-link',{attrs:{\"to\":\"/react16\"}},[_vm._v(\" react16 \"),_c('a-icon',{class:['main-icon', { active: _vm.react16Flag }],attrs:{\"type\":\"caret-up\"},nativeOn:{\"click\":function($event){return _vm.handleFlag('react16')}}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.react16Flag),expression:\"react16Flag\"}],staticClass:\"sub-menu\"},[_c('router-link',{attrs:{\"to\":\"/react16-sub/home\"}},[_vm._v(\"home\")]),_c('router-link',{attrs:{\"to\":\"/react16-sub/dialog\"}},[_vm._v(\"dialog\")]),_c('router-link',{attrs:{\"to\":\"/react16-sub/location\"}},[_vm._v(\"location\")]),_c('router-link',{attrs:{\"to\":\"/react16-sub/communication\"}},[_vm._v(\"communication\")]),_c('router-link',{attrs:{\"to\":\"/react16-sub/nest\"}},[_vm._v(\"nest\")]),_c('router-link',{attrs:{\"to\":\"/react16-sub/font\"}},[_vm._v(\"font\")])],1),_c('router-link',{attrs:{\"to\":\"/react17\"}},[_vm._v(\" react17 \"),_c('span',{staticClass:\"alive\"},[_vm._v(\"\")]),_c('a-icon',{class:['main-icon', { active: _vm.react17Flag }],attrs:{\"type\":\"caret-up\"},nativeOn:{\"click\":function($event){return _vm.handleFlag('react17')}}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.react17Flag),expression:\"react17Flag\"}],staticClass:\"sub-menu\"},[_c('router-link',{attrs:{\"to\":\"/react17-sub/home\"}},[_vm._v(\"home\")]),_c('router-link',{attrs:{\"to\":\"/react17-sub/dialog\"}},[_vm._v(\"dialog\")]),_c('router-link',{attrs:{\"to\":\"/react17-sub/location\"}},[_vm._v(\"location\")]),_c('router-link',{attrs:{\"to\":\"/react17-sub/communication\"}},[_vm._v(\"communication\")]),_c('router-link',{attrs:{\"to\":\"/react17-sub/state\"}},[_vm._v(\"state\")])],1),_c('router-link',{attrs:{\"to\":\"/vue2\"}},[_vm._v(\" vue2 \"),_c('a-icon',{class:['main-icon', { active: _vm.vue2Flag }],attrs:{\"type\":\"caret-up\"},nativeOn:{\"click\":function($event){return _vm.handleFlag('vue2')}}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.vue2Flag),expression:\"vue2Flag\"}],staticClass:\"sub-menu\"},[_c('router-link',{attrs:{\"to\":\"/vue2-sub/home\"}},[_vm._v(\"home\")]),_c('router-link',{attrs:{\"to\":\"/vue2-sub/dialog\"}},[_vm._v(\"dialog\")]),_c('router-link',{attrs:{\"to\":\"/vue2-sub/location\"}},[_vm._v(\"location\")]),_c('router-link',{attrs:{\"to\":\"/vue2-sub/communication\"}},[_vm._v(\"communication\")])],1),(_vm.degrade)?_c('router-link',{attrs:{\"to\":\"/vue3\"}},[_vm._v(\" vue3 \"),_c('span',{staticClass:\"alive\"},[_vm._v(\"\")]),_c('a-icon',{class:['main-icon', { active: _vm.vue3Flag }],attrs:{\"type\":\"caret-up\"},nativeOn:{\"click\":function($event){return _vm.handleFlag('vue3')}}})],1):_vm._e(),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.vue3Flag),expression:\"vue3Flag\"}],staticClass:\"sub-menu\"},[_c('router-link',{attrs:{\"to\":\"/vue3-sub/home\"}},[_vm._v(\"home\")]),_c('router-link',{attrs:{\"to\":\"/vue3-sub/dialog\"}},[_vm._v(\"dialog\")]),_c('router-link',{attrs:{\"to\":\"/vue3-sub/location\"}},[_vm._v(\"location\")]),_c('router-link',{attrs:{\"to\":\"/vue3-sub/contact\"}},[_vm._v(\"contact\")]),_c('router-link',{attrs:{\"to\":\"/vue3-sub/state\"}},[_vm._v(\"state\")])],1),(_vm.degrade)?_c('router-link',{attrs:{\"to\":\"/vite\"}},[_vm._v(\"vite \"),_c('a-icon',{class:['main-icon', { active: _vm.viteFlag }],attrs:{\"type\":\"caret-up\"},nativeOn:{\"click\":function($event){return _vm.handleFlag('vite')}}})],1):_vm._e(),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.viteFlag),expression:\"viteFlag\"}],staticClass:\"sub-menu\"},[_c('router-link',{attrs:{\"to\":\"/vite-sub/home\"}},[_vm._v(\"home\")]),_c('router-link',{attrs:{\"to\":\"/vite-sub/dialog\"}},[_vm._v(\"dialog\")]),_c('router-link',{attrs:{\"to\":\"/vite-sub/location\"}},[_vm._v(\"location\")]),_c('router-link',{attrs:{\"to\":\"/vite-sub/contact\"}},[_vm._v(\"contact\")])],1),_c('router-link',{attrs:{\"to\":\"/angular12\"}},[_vm._v(\"angular12\")]),_c('router-link',{attrs:{\"to\":\"/all\"}},[_vm._v(\"all\")]),_c('router-link',{attrs:{\"to\":\"/postmessage\"}},[_vm._v(\"postmessage\")]),_c('a-button',{staticClass:\"menu-icon\",attrs:{\"type\":\"primary\",\"icon\":\"unordered-list\",\"size\":\"large\"},on:{\"click\":function($event){$event.stopPropagation();_vm.active = !_vm.active}}})],1),_c('div',{staticClass:\"content\",on:{\"click\":function($event){_vm.active = false}}},[_c('router-view')],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"app\">\n    <div id=\"nav\" :class=\"active ? 'active' : ''\" @click=\"close\">\n      <router-link to=\"/home\"></router-link>\n      <!-- react16 -->\n      <router-link to=\"/react16\">\n        react16\n        <a-icon :class=\"['main-icon', { active: react16Flag }]\" type=\"caret-up\" @click.native=\"handleFlag('react16')\" />\n      </router-link>\n      <div class=\"sub-menu\" v-show=\"react16Flag\">\n        <router-link to=\"/react16-sub/home\">home</router-link>\n        <router-link to=\"/react16-sub/dialog\">dialog</router-link>\n        <router-link to=\"/react16-sub/location\">location</router-link>\n        <router-link to=\"/react16-sub/communication\">communication</router-link>\n        <router-link to=\"/react16-sub/nest\">nest</router-link>\n        <router-link to=\"/react16-sub/font\">font</router-link>\n      </div>\n      <!-- react17 -->\n      <router-link to=\"/react17\">\n        react17\n        <span class=\"alive\"></span>\n        <a-icon :class=\"['main-icon', { active: react17Flag }]\" type=\"caret-up\" @click.native=\"handleFlag('react17')\" />\n      </router-link>\n      <div class=\"sub-menu\" v-show=\"react17Flag\">\n        <router-link to=\"/react17-sub/home\">home</router-link>\n        <router-link to=\"/react17-sub/dialog\">dialog</router-link>\n        <router-link to=\"/react17-sub/location\">location</router-link>\n        <router-link to=\"/react17-sub/communication\">communication</router-link>\n        <router-link to=\"/react17-sub/state\">state</router-link>\n      </div>\n      <!-- vue2 -->\n      <router-link to=\"/vue2\">\n        vue2\n        <a-icon :class=\"['main-icon', { active: vue2Flag }]\" type=\"caret-up\" @click.native=\"handleFlag('vue2')\" />\n      </router-link>\n      <div class=\"sub-menu\" v-show=\"vue2Flag\">\n        <router-link to=\"/vue2-sub/home\">home</router-link>\n        <router-link to=\"/vue2-sub/dialog\">dialog</router-link>\n        <router-link to=\"/vue2-sub/location\">location</router-link>\n        <router-link to=\"/vue2-sub/communication\">communication</router-link>\n      </div>\n      <!-- vue3 -->\n      <router-link v-if=\"degrade\" to=\"/vue3\">\n        vue3\n        <span class=\"alive\"></span>\n        <a-icon :class=\"['main-icon', { active: vue3Flag }]\" type=\"caret-up\" @click.native=\"handleFlag('vue3')\" />\n      </router-link>\n      <div class=\"sub-menu\" v-show=\"vue3Flag\">\n        <router-link to=\"/vue3-sub/home\">home</router-link>\n        <router-link to=\"/vue3-sub/dialog\">dialog</router-link>\n        <router-link to=\"/vue3-sub/location\">location</router-link>\n        <router-link to=\"/vue3-sub/contact\">contact</router-link>\n        <router-link to=\"/vue3-sub/state\">state</router-link>\n      </div>\n      <router-link v-if=\"degrade\" to=\"/vite\"\n        >vite <a-icon :class=\"['main-icon', { active: viteFlag }]\" type=\"caret-up\" @click.native=\"handleFlag('vite')\"\n      /></router-link>\n      <div class=\"sub-menu\" v-show=\"viteFlag\">\n        <router-link to=\"/vite-sub/home\">home</router-link>\n        <router-link to=\"/vite-sub/dialog\">dialog</router-link>\n        <router-link to=\"/vite-sub/location\">location</router-link>\n        <router-link to=\"/vite-sub/contact\">contact</router-link>\n      </div>\n      <router-link to=\"/angular12\">angular12</router-link>\n      <router-link to=\"/all\">all</router-link>\n      <router-link to=\"/postmessage\">postmessage</router-link>\n      <a-button class=\"menu-icon\" type=\"primary\" icon=\"unordered-list\" size=\"large\" @click.stop=\"active = !active\" />\n    </div>\n    <div class=\"content\" @click=\"active = false\">\n      <router-view />\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"App\",\n  data() {\n    return {\n      active: false,\n      react16Flag: this.$route.name === \"react16-sub\",\n      react17Flag: this.$route.name === \"react17-sub\",\n      vue2Flag: this.$route.name === \"vue2-sub\",\n      vue3Flag: this.$route.name === \"vue3-sub\",\n      viteFlag: this.$route.name === \"vite-sub\",\n      degrade: window.Proxy,\n    };\n  },\n  mounted() {\n    window.addEventListener(\"message\", this.handleMessage);\n  },\n  beforeDestroy() {\n    window.removeEventListener(\"message\", this.handleMessage);\n  },\n  methods: {\n    close() {\n      if (this.active) this.active = false;\n    },\n    handleFlag(name) {\n      this[name + \"Flag\"] = !this[name + \"Flag\"];\n    },\n  },\n};\n</script>\n\n<style>\nhtml,\nbody {\n  margin: 0;\n  padding: 0;\n  font-size: 20px;\n  height: 100vh;\n  --theme: rgb(241, 107, 95);\n}\n\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: #2c3e50;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: nowrap;\n  width: 100vw;\n}\n\n#nav {\n  background-color: white;\n  flex-shrink: 0;\n  font-size: 20px;\n  display: flex;\n  position: relative;\n  z-index: 1;\n  flex-direction: column;\n  padding: 30px 0;\n  width: 210px;\n  height: 100vh;\n  box-sizing: border-box;\n  box-shadow: 3px 0px 9px 2px #e6e6e6;\n  transition: transform 0.1s linear;\n  transform: translate(0, 0);\n  overflow: auto;\n}\n\n#nav .menu-icon {\n  display: none;\n  border: none;\n  background: rgb(241, 107, 95) !important;\n}\n\n.main-icon {\n  padding: 0 10px;\n  transition: transform 0.2s ease-in;\n}\n\n.main-icon.active {\n  transform: rotate(180deg);\n}\n\n.sub-menu {\n  font-size: 16px;\n  padding: 0 10px;\n}\n\n@media screen and (max-width: 768px) {\n  #nav {\n    position: absolute;\n    box-shadow: none;\n    transform: translate(-100%, 0);\n  }\n\n  #nav.active {\n    transform: translate(0, 0);\n    box-shadow: 3px 0px 9px 2px #e6e6e6;\n  }\n\n  #nav .menu-icon {\n    position: absolute;\n    left: 100%;\n    display: block;\n  }\n}\n\n.wujie_iframe {\n  width: 100%;\n  height: 100%;\n}\n\niframe {\n  border: none;\n}\n\nh3 {\n  padding-bottom: 0.3rem;\n  border-bottom: 1px solid #eaecef;\n}\n\n.content {\n  flex: 1;\n  height: 100vh;\n  overflow: hidden scroll;\n  width: 1px;\n}\n\n#nav a {\n  display: flex;\n  align-items: center;\n  padding: 10px 30px;\n  font-weight: bold;\n  color: #2c3e50;\n  text-decoration: none;\n  transition: all 0.2s linear;\n}\n\n#nav a:hover {\n  color: rgb(241, 107, 95);\n}\n\n.alive {\n  display: inline-block;\n  white-space: nowrap;\n  background-color: rgb(241, 107, 95);\n  border-radius: 8px;\n  margin-left: 4px;\n  font-size: 10px;\n  vertical-align: top;\n  padding: 1px 4px;\n  color: white;\n}\n\n#nav a.router-link-active {\n  color: rgb(241, 107, 95);\n  background: rgba(0, 0, 0, 0.05);\n}\n</style>\n","import mod from \"-!../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/.pnpm/thread-loader@2.1.3_webpack@4.46.0/node_modules/thread-loader/dist/cjs.js!../../../node_modules/.pnpm/babel-loader@8.2.5_@babel+core@7.18.13_webpack@4.46.0/node_modules/babel-loader/lib/index.js!../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/.pnpm/thread-loader@2.1.3_webpack@4.46.0/node_modules/thread-loader/dist/cjs.js!../../../node_modules/.pnpm/babel-loader@8.2.5_@babel+core@7.18.13_webpack@4.46.0/node_modules/babel-loader/lib/index.js!../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=4d00876c&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=4d00876c&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"home\"},[_c('div',{staticClass:\"tool\"},[_c('a-button',{staticClass:\"button-gap\",staticStyle:{\"visibility\":\"hidden\"},attrs:{\"type\":\"primary\",\"icon\":\"unordered-list\",\"size\":\"large\"}}),_c('div',{staticClass:\"button-list\"},[_c('a-tooltip',{attrs:{\"placement\":\"top\"}},[_c('template',{slot:\"title\"},[_vm._v(\"shadow+proxy\")]),_c('a-switch',{staticClass:\"switch button-gap\",attrs:{\"disabled\":_vm.disable,\"checked-children\":\"\",\"un-checked-children\":\"\"},model:{value:(_vm.degrade),callback:function ($$v) {_vm.degrade=$$v},expression:\"degrade\"}})],2),_c('a-tooltip',{attrs:{\"placement\":\"top\"}},[_c('template',{slot:\"title\"},[_vm._v(\"+\")]),_c('a-switch',{staticClass:\"switch button-gap\",attrs:{\"checked-children\":\"\",\"un-checked-children\":\"\"},model:{value:(_vm.preload),callback:function ($$v) {_vm.preload=$$v},expression:\"preload\"}})],2),_c('a-tooltip',{attrs:{\"placement\":\"top\"}},[_c('template',{slot:\"title\"},[_vm._v(\"hash\")]),_c('a',{staticClass:\"docs button-gap\",attrs:{\"href\":\"https://wujie-micro.github.io/demo-main-react/\",\"target\":\"_blank\"}},[_vm._v(\"react\")])],2),_c('a',{staticClass:\"docs button-gap\",attrs:{\"href\":\"https://github.com/Tencent/wujie\",\"target\":\"_blank\"}},[_vm._v(\"\")]),_c('a',{staticClass:\"docs button-gap\",attrs:{\"href\":\"https://wujie-micro.github.io/doc/\",\"target\":\"_blank\"}},[_vm._v(\"\")])],1)],1),_c('h1',{staticClass:\"header\"},[_c('img',{style:({ width: '70px', height: '70px', 'margin-right': '15px' }),attrs:{\"src\":\"https://vfiles.gtimg.cn/wuji_dashboard/xy/test_wuji_damy/XC5WMbxE.svg\"}}),_c('span',{staticClass:\"bland\"},[_vm._v(\"\")])]),_c('h2',{staticClass:\"subtitle\"},[_vm._v(\"\")]),_vm._m(0)])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"detail-content\"},[_c('div',{staticClass:\"item\"},[_c('div',{staticClass:\"title\"},[_vm._v(\" \")]),_c('div',{staticClass:\"detail\"},[_c('ul',[_c('li',[_vm._v(\"\")]),_c('li',[_vm._v(\"\")]),_c('li',[_vm._v(\"\")])])])]),_c('div',{staticClass:\"item\"},[_c('div',{staticClass:\"title\"},[_vm._v(\" \")]),_c('div',{staticClass:\"detail\"},[_c('ul',[_c('li',[_vm._v(\"\")]),_c('li',[_vm._v(\"\")]),_c('li',[_vm._v(\"\")])])])]),_c('div',{staticClass:\"item\"},[_c('div',{staticClass:\"title\"},[_vm._v(\" \")]),_c('div',{staticClass:\"detail\"},[_c('ul',[_c('li',[_vm._v(\"\")]),_c('li',[_vm._v(\"API\")]),_c('li',[_vm._v(\"\")])])])])])\n}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"home\">\n    <div class=\"tool\">\n      <a-button style=\"visibility: hidden\" class=\"button-gap\" type=\"primary\" icon=\"unordered-list\" size=\"large\" />\n      <div class=\"button-list\">\n        <a-tooltip placement=\"top\">\n          <template slot=\"title\">shadow+proxy</template>\n          <a-switch\n            class=\"switch button-gap\"\n            :disabled=\"disable\"\n            checked-children=\"\"\n            un-checked-children=\"\"\n            v-model=\"degrade\"\n          />\n        </a-tooltip>\n        <a-tooltip placement=\"top\">\n          <template slot=\"title\">+</template>\n          <a-switch\n            class=\"switch button-gap\"\n            checked-children=\"\"\n            un-checked-children=\"\"\n            v-model=\"preload\"\n          />\n        </a-tooltip>\n        <a-tooltip placement=\"top\">\n          <template slot=\"title\">hash</template>\n          <a href=\"https://wujie-micro.github.io/demo-main-react/\" target=\"_blank\" class=\"docs button-gap\"\n            >react</a\n          >\n        </a-tooltip>\n        <a href=\"https://github.com/Tencent/wujie\" target=\"_blank\" class=\"docs button-gap\"></a>\n        <a href=\"https://wujie-micro.github.io/doc/\" target=\"_blank\" class=\"docs button-gap\"></a>\n      </div>\n    </div>\n    <h1 class=\"header\">\n      <img\n        :style=\"{ width: '70px', height: '70px', 'margin-right': '15px' }\"\n        src=\"https://vfiles.gtimg.cn/wuji_dashboard/xy/test_wuji_damy/XC5WMbxE.svg\"\n      />\n      <span class=\"bland\"></span>\n    </h1>\n    <h2 class=\"subtitle\"></h2>\n\n    <div class=\"detail-content\">\n      <div class=\"item\">\n        <div class=\"title\"> </div>\n        <div class=\"detail\">\n          <ul>\n            <li></li>\n            <li></li>\n            <li></li>\n          </ul>\n        </div>\n      </div>\n      <div class=\"item\">\n        <div class=\"title\"> </div>\n        <div class=\"detail\">\n          <ul>\n            <li></li>\n            <li></li>\n            <li></li>\n          </ul>\n        </div>\n      </div>\n      <div class=\"item\">\n        <div class=\"title\"> </div>\n        <div class=\"detail\">\n          <ul>\n            <li></li>\n            <li>API</li>\n            <li></li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Home\",\n  data() {\n    return {\n      preload: window.localStorage.getItem(\"preload\") !== \"false\",\n      degrade: window.localStorage.getItem(\"degrade\") === \"true\" || !window.Proxy || !window.CustomElementRegistry,\n      disable: !window.Proxy || !window.CustomElementRegistry,\n    };\n  },\n  watch: {\n    preload(val) {\n      window.localStorage.setItem(\"preload\", val);\n      setTimeout(() => window.location.reload(), 1000);\n    },\n    degrade(val) {\n      window.localStorage.setItem(\"degrade\", val);\n      setTimeout(() => window.location.reload(), 1000);\n    },\n  },\n};\n</script>\n\n<style scoped>\n.button-gap {\n  margin-bottom: 10px;\n}\n.button-list {\n  flex: 1;\n  display: flex;\n  flex-direction: row-reverse;\n  flex-wrap: wrap;\n}\n.tool {\n  margin: 30px 20px 30px 0;\n  display: flex;\n  flex-direction: row;\n  align-items: top;\n}\n.header {\n  font-size: 70px;\n  margin-top: 100px;\n  text-align: center;\n  font-weight: 300;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-right: 200px;\n}\n.subtitle {\n  font-size: 50px;\n  margin-left: 250px;\n  text-align: center;\n  font-weight: 300;\n  font-style: italic;\n}\n\n.bland {\n  display: inline-block;\n  font-weight: 400;\n}\n\n.title {\n  font-size: 30px;\n  color: var(--theme);\n  text-align: center;\n}\n\n.switch {\n  margin-left: 15px;\n  padding: 5px;\n  height: 40px;\n}\n\n.switch.ant-switch::after {\n  top: 6px;\n  width: 25px;\n  height: 25px;\n}\n\n.docs {\n  font-size: 20px;\n  border: 1px solid rgb(217, 217, 217);\n  box-shadow: 0 2px #00000004;\n  color: rgb(44, 62, 80);\n  padding: 5px 20px;\n  border-radius: 20px;\n  margin-left: 15px;\n  cursor: pointer;\n  text-decoration: none;\n  transition: all 0.1s linear;\n}\n.docs:hover {\n  color: var(--theme);\n  border: 1px solid var(--theme);\n}\n\n.detail-content {\n  width: 900px;\n  margin: 150px auto 0 auto;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n}\n.detail-content .item ul {\n  margin: 15px 0;\n}\n\n.home {\n  font-size: 20px;\n}\n.home .ant-switch-checked {\n  background-color: rgb(241, 107, 95);\n}\nspan.switch {\n  margin-left: 0;\n  padding: 0;\n}\n\n@media screen and (max-width: 768px) {\n  .subtitle {\n    font-size: 35px;\n    margin-left: 0;\n    font-weight: 150;\n  }\n  .header {\n    margin-right: 0;\n  }\n  .detail-content {\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    width: auto;\n  }\n  .item {\n    width: 220px;\n    display: flex;\n    flex-direction: column;\n    align-items: flex-start;\n  }\n}\n</style>\n\n<style>\n.switch .ant-switch-inner {\n  font-size: 20px;\n}\n</style>\n","import mod from \"-!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/.pnpm/thread-loader@2.1.3_webpack@4.46.0/node_modules/thread-loader/dist/cjs.js!../../../../node_modules/.pnpm/babel-loader@8.2.5_@babel+core@7.18.13_webpack@4.46.0/node_modules/babel-loader/lib/index.js!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/.pnpm/thread-loader@2.1.3_webpack@4.46.0/node_modules/thread-loader/dist/cjs.js!../../../../node_modules/.pnpm/babel-loader@8.2.5_@babel+core@7.18.13_webpack@4.46.0/node_modules/babel-loader/lib/index.js!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=72f0e334&scoped=true&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Home.vue?vue&type=style&index=0&id=72f0e334&prod&scoped=true&lang=css&\"\nimport style1 from \"./Home.vue?vue&type=style&index=1&id=72f0e334&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"72f0e334\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('WujieVue',{attrs:{\"width\":\"100%\",\"height\":\"100%\",\"name\":\"react16\",\"url\":_vm.react16Url,\"sync\":true}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","const map = {\n  \"//localhost:7100/\": \"//wujie-micro.github.io/demo-react17/\",\n  \"//localhost:7200/\": \"//wujie-micro.github.io/demo-vue2/\",\n  \"//localhost:7300/\": \"//wujie-micro.github.io/demo-vue3/\",\n  \"//localhost:7400/\": \"//wujie-micro.github.io/demo-angular12/\",\n  \"//localhost:7500/\": \"//wujie-micro.github.io/demo-vite/\",\n  \"//localhost:7600/\": \"//wujie-micro.github.io/demo-react16/\",\n  \"//localhost:7700/\": \"//wujie-micro.github.io/demo-main-react/\",\n  \"//localhost:8000/\": \"//wujie-micro.github.io/demo-main-vue/\",\n};\n\nexport default function hostMap(host) {\n  if (process.env.NODE_ENV === \"production\") return map[host];\n  return host;\n}\n","<template>\n  <!--nameurl -->\n  <WujieVue width=\"100%\" height=\"100%\" name=\"react16\" :url=\"react16Url\" :sync=\"true\"></WujieVue>\n</template>\n\n<script>\nimport hostMap from \"../hostMap\";\n\nexport default {\n  data() {\n    return {\n      react16Url: hostMap(\"//localhost:7600/\"),\n    };\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n","import mod from \"-!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/.pnpm/thread-loader@2.1.3_webpack@4.46.0/node_modules/thread-loader/dist/cjs.js!../../../../node_modules/.pnpm/babel-loader@8.2.5_@babel+core@7.18.13_webpack@4.46.0/node_modules/babel-loader/lib/index.js!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/index.js??vue-loader-options!./React16.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/.pnpm/thread-loader@2.1.3_webpack@4.46.0/node_modules/thread-loader/dist/cjs.js!../../../../node_modules/.pnpm/babel-loader@8.2.5_@babel+core@7.18.13_webpack@4.46.0/node_modules/babel-loader/lib/index.js!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/index.js??vue-loader-options!./React16.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./React16.vue?vue&type=template&id=b13a20da&scoped=true&\"\nimport script from \"./React16.vue?vue&type=script&lang=js&\"\nexport * from \"./React16.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b13a20da\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('WujieVue',{attrs:{\"width\":\"100%\",\"height\":\"100%\",\"name\":\"react16\",\"url\":_vm.react16Url}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <!--nameurl -->\n  <WujieVue width=\"100%\" height=\"100%\" name=\"react16\" :url=\"react16Url\"></WujieVue>\n</template>\n\n<script>\nimport hostMap from \"../hostMap\";\n\nexport default {\n  computed: {\n    react16Url() {\n      return hostMap(\"//localhost:7600/\") + this.$route.params.path;\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n","import mod from \"-!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/.pnpm/thread-loader@2.1.3_webpack@4.46.0/node_modules/thread-loader/dist/cjs.js!../../../../node_modules/.pnpm/babel-loader@8.2.5_@babel+core@7.18.13_webpack@4.46.0/node_modules/babel-loader/lib/index.js!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/index.js??vue-loader-options!./React16-sub.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/.pnpm/thread-loader@2.1.3_webpack@4.46.0/node_modules/thread-loader/dist/cjs.js!../../../../node_modules/.pnpm/babel-loader@8.2.5_@babel+core@7.18.13_webpack@4.46.0/node_modules/babel-loader/lib/index.js!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/index.js??vue-loader-options!./React16-sub.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./React16-sub.vue?vue&type=template&id=4cb61936&scoped=true&\"\nimport script from \"./React16-sub.vue?vue&type=script&lang=js&\"\nexport * from \"./React16-sub.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4cb61936\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('WujieVue',{attrs:{\"width\":\"100%\",\"height\":\"100%\",\"name\":\"react17\",\"url\":_vm.react17Url,\"sync\":true}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <!--nameurl -->\n  <WujieVue width=\"100%\" height=\"100%\" name=\"react17\" :url=\"react17Url\" :sync=\"true\"></WujieVue>\n</template>\n\n<script>\nimport hostMap from \"../hostMap\";\nexport default {\n  data() {\n    return {\n      react17Url: hostMap(\"//localhost:7100/\"),\n    };\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n","import mod from \"-!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/.pnpm/thread-loader@2.1.3_webpack@4.46.0/node_modules/thread-loader/dist/cjs.js!../../../../node_modules/.pnpm/babel-loader@8.2.5_@babel+core@7.18.13_webpack@4.46.0/node_modules/babel-loader/lib/index.js!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/index.js??vue-loader-options!./React17.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/.pnpm/thread-loader@2.1.3_webpack@4.46.0/node_modules/thread-loader/dist/cjs.js!../../../../node_modules/.pnpm/babel-loader@8.2.5_@babel+core@7.18.13_webpack@4.46.0/node_modules/babel-loader/lib/index.js!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/index.js??vue-loader-options!./React17.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./React17.vue?vue&type=template&id=9b2fc488&scoped=true&\"\nimport script from \"./React17.vue?vue&type=script&lang=js&\"\nexport * from \"./React17.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9b2fc488\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('WujieVue',{attrs:{\"width\":\"100%\",\"height\":\"100%\",\"name\":\"react17\",\"url\":_vm.react17Url}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// \nexport const WUJIE_APP_ID = \"data-wujie-id\";\nexport const WUJIE_SCRIPT_ID = \"data-wujie-script-id\";\nexport const WUJIE_DATA_FLAG = \"data-wujie-Flag\";\nexport const CONTAINER_POSITION_DATA_FLAG = \"data-container-position-flag\";\nexport const CONTAINER_OVERFLOW_DATA_FLAG = \"data-container-overflow-flag\";\nexport const LOADING_DATA_FLAG = \"data-loading-flag\";\nexport const WUJIE_DATA_ATTACH_CSS_FLAG = \"data-wujie-attach-css-flag\";\n\n// \nexport const WUJIE_IFRAME_CLASS = \"wujie_iframe\";\nexport const WUJIE_ALL_EVENT = \"_wujie_all_event\";\nexport const WUJIE_SHADE_STYLE =\n  \"position: fixed; z-index: 2147483647; visibility: hidden; inset: 0px; backface-visibility: hidden;\";\nexport const WUJIE_LOADING_STYLE =\n  \"position: absolute; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; z-index:1;\";\n\nexport const WUJIE_LOADING_SVG = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24px\" height=\"30px\" viewBox=\"0 0 24 30\">\n<rect x=\"0\" y=\"13\" width=\"4\" height=\"5\" fill=\"#909090\">\n  <animate attributeName=\"height\" attributeType=\"XML\" values=\"5;21;5\" begin=\"0s\" dur=\"0.6s\" repeatCount=\"indefinite\"></animate>\n  <animate attributeName=\"y\" attributeType=\"XML\" values=\"13; 5; 13\" begin=\"0s\" dur=\"0.6s\" repeatCount=\"indefinite\"></animate>\n</rect>\n<rect x=\"10\" y=\"13\" width=\"4\" height=\"5\" fill=\"#909090\">\n  <animate attributeName=\"height\" attributeType=\"XML\" values=\"5;21;5\" begin=\"0.15s\" dur=\"0.6s\" repeatCount=\"indefinite\"></animate>\n  <animate attributeName=\"y\" attributeType=\"XML\" values=\"13; 5; 13\" begin=\"0.15s\" dur=\"0.6s\" repeatCount=\"indefinite\"></animate>\n</rect>\n<rect x=\"20\" y=\"13\" width=\"4\" height=\"5\" fill=\"#909090\">\n  <animate attributeName=\"height\" attributeType=\"XML\" values=\"5;21;5\" begin=\"0.3s\" dur=\"0.6s\" repeatCount=\"indefinite\"></animate>\n  <animate attributeName=\"y\" attributeType=\"XML\" values=\"13; 5; 13\" begin=\"0.3s\" dur=\"0.6s\" repeatCount=\"indefinite\"></animate>\n</rect>\n</svg>`;\n\n// \nexport const WUJIE_TIPS_NO_URL = \"url\";\nexport const WUJIE_TIPS_RELOAD_DISABLED = \"reload\";\nexport const WUJIE_TIPS_STOP_APP = \"iframe\";\nexport const WUJIE_TIPS_STOP_APP_DETAIL = WUJIE_TIPS_STOP_APP + \"https://github.com/Tencent/wujie/issues/54\";\nexport const WUJIE_TIPS_NO_SUBJECT = \"\";\nexport const WUJIE_TIPS_NO_FETCH = \"windowfetchpolyfill\";\nexport const WUJIE_TIPS_NOT_SUPPORTED = \"iframe\";\nexport const WUJIE_TIPS_SCRIPT_ERROR_REQUESTED = \"\";\nexport const WUJIE_TIPS_CSS_ERROR_REQUESTED = \"\";\nexport const WUJIE_TIPS_HTML_ERROR_REQUESTED = \"html\";\nexport const WUJIE_TIPS_REPEAT_RENDER = \"\";\nexport const WUJIE_TIPS_NO_SCRIPT = \"Script\";\nexport const WUJIE_TIPS_GET_ELEMENT_BY_ID =\n  \"document.getElementById()document.querySelector\";\n","import {\n  WUJIE_SCRIPT_ID,\n  WUJIE_TIPS_NO_URL,\n  WUJIE_APP_ID,\n  WUJIE_TIPS_STOP_APP,\n  WUJIE_TIPS_STOP_APP_DETAIL,\n} from \"./constant\";\nimport { plugin, cacheOptions } from \"./index\";\n\nexport function toArray<T>(array: T | T[]): T[] {\n  return Array.isArray(array) ? array : [array];\n}\n\nexport function isFunction(value: any): boolean {\n  return typeof value === \"function\";\n}\n\nexport function isHijackingTag(tagName?: string) {\n  return (\n    tagName?.toUpperCase() === \"LINK\" ||\n    tagName?.toUpperCase() === \"STYLE\" ||\n    tagName?.toUpperCase() === \"SCRIPT\" ||\n    tagName?.toUpperCase() === \"IFRAME\"\n  );\n}\n\nexport const wujieSupport = window.Proxy && window.CustomElementRegistry;\n\n/**\n * in safari\n * typeof document.all === 'undefined' // true\n * typeof document.all === 'function' // true\n * We need to discriminate safari for better performance\n */\nconst naughtySafari = typeof document.all === \"function\" && typeof document.all === \"undefined\";\nconst callableFnCacheMap = new WeakMap<CallableFunction, boolean>();\nexport const isCallable = (fn: any) => {\n  if (callableFnCacheMap.has(fn)) {\n    return true;\n  }\n\n  const callable = naughtySafari ? typeof fn === \"function\" && typeof fn !== \"undefined\" : typeof fn === \"function\";\n  if (callable) {\n    callableFnCacheMap.set(fn, callable);\n  }\n  return callable;\n};\n\nconst boundedMap = new WeakMap<CallableFunction, boolean>();\nexport function isBoundedFunction(fn: CallableFunction) {\n  if (boundedMap.has(fn)) {\n    return boundedMap.get(fn);\n  }\n  const bounded = fn.name.indexOf(\"bound \") === 0 && !fn.hasOwnProperty(\"prototype\");\n  boundedMap.set(fn, bounded);\n  return bounded;\n}\n\nconst fnRegexCheckCacheMap = new WeakMap<any | FunctionConstructor, boolean>();\nexport function isConstructable(fn: () => any | FunctionConstructor) {\n  const hasPrototypeMethods =\n    fn.prototype && fn.prototype.constructor === fn && Object.getOwnPropertyNames(fn.prototype).length > 1;\n\n  if (hasPrototypeMethods) return true;\n\n  if (fnRegexCheckCacheMap.has(fn)) {\n    return fnRegexCheckCacheMap.get(fn);\n  }\n\n  let constructable = hasPrototypeMethods;\n  if (!constructable) {\n    const fnString = fn.toString();\n    const constructableFunctionRegex = /^function\\b\\s[A-Z].*/;\n    const classRegex = /^class\\b/;\n    constructable = constructableFunctionRegex.test(fnString) || classRegex.test(fnString);\n  }\n\n  fnRegexCheckCacheMap.set(fn, constructable);\n  return constructable;\n}\n\n// bughttps://github.com/Tencent/wujie/issues/770\nconst setFnCacheMap = new WeakMap<\n  Window | Document | ShadowRoot | Location,\n  WeakMap<CallableFunction, CallableFunction>\n>();\n\nexport function checkProxyFunction(target: Window | Document | ShadowRoot | Location, value: any) {\n  if (isCallable(value) && !isBoundedFunction(value) && !isConstructable(value)) {\n    if (!setFnCacheMap.has(target)) {\n      setFnCacheMap.set(target, new WeakMap());\n      setFnCacheMap.get(target).set(value, value);\n    } else if (!setFnCacheMap.get(target).has(value)) {\n      setFnCacheMap.get(target).set(value, value);\n    }\n  }\n}\n\nexport function getTargetValue(target: any, p: any): any {\n  const value = target[p];\n  if (setFnCacheMap.has(target) && setFnCacheMap.get(target).has(value)) {\n    return setFnCacheMap.get(target).get(value);\n  }\n  if (isCallable(value) && !isBoundedFunction(value) && !isConstructable(value)) {\n    const boundValue = Function.prototype.bind.call(value, target);\n    if (setFnCacheMap.has(target)) {\n      setFnCacheMap.get(target).set(value, boundValue);\n    } else {\n      setFnCacheMap.set(target, new WeakMap());\n      setFnCacheMap.get(target).set(value, boundValue);\n    }\n    for (const key in value) {\n      boundValue[key] = value[key];\n    }\n    if (value.hasOwnProperty(\"prototype\") && !boundValue.hasOwnProperty(\"prototype\")) {\n      // https://github.com/kuitos/kuitos.github.io/issues/47\n      Object.defineProperty(boundValue, \"prototype\", { value: value.prototype, enumerable: false, writable: true });\n    }\n    return boundValue;\n  }\n  return value;\n}\n\nexport function getDegradeIframe(id: string): HTMLIFrameElement {\n  return window.document.querySelector(`iframe[${WUJIE_APP_ID}=\"${id}\"]`);\n}\n\nexport function setAttrsToElement(element: HTMLElement, attrs: { [key: string]: any }) {\n  Object.keys(attrs).forEach((name) => {\n    element.setAttribute(name, attrs[name]);\n  });\n}\n\nexport function appRouteParse(url: string): {\n  urlElement: HTMLAnchorElement;\n  appHostPath: string;\n  appRoutePath: string;\n} {\n  if (!url) {\n    error(WUJIE_TIPS_NO_URL);\n    throw new Error();\n  }\n  const urlElement = anchorElementGenerator(url);\n  const appHostPath = urlElement.protocol + \"//\" + urlElement.host;\n  let appRoutePath = urlElement.pathname + urlElement.search + urlElement.hash;\n  if (!appRoutePath.startsWith(\"/\")) appRoutePath = \"/\" + appRoutePath; // hack ie\n  return { urlElement, appHostPath, appRoutePath };\n}\n\nexport function anchorElementGenerator(url: string): HTMLAnchorElement {\n  const element = window.document.createElement(\"a\");\n  element.href = url;\n  element.href = element.href; // hack ie\n  return element;\n}\n\nexport function getAnchorElementQueryMap(anchorElement: HTMLAnchorElement): { [key: string]: string } {\n  const queryString = anchorElement.search || \"\";\n  return [...new URLSearchParams(queryString).entries()].reduce((p, c) => {\n    p[c[0]] = c[1];\n    return p;\n  }, {} as Record<string, string>);\n}\n\n/**\n * urlid\n */\nexport function isMatchSyncQueryById(id: string): boolean {\n  const queryMap = getAnchorElementQueryMap(anchorElementGenerator(window.location.href));\n  return Object.keys(queryMap).includes(id);\n}\n\n/**\n * \n * @param iframeWindow\n */\nexport function fixElementCtrSrcOrHref(\n  iframeWindow: Window,\n  elementCtr:\n    | typeof HTMLImageElement\n    | typeof HTMLAnchorElement\n    | typeof HTMLSourceElement\n    | typeof HTMLLinkElement\n    | typeof HTMLScriptElement\n    | typeof HTMLMediaElement,\n  attr\n): void {\n  // patch setAttribute\n  const rawElementSetAttribute = iframeWindow.Element.prototype.setAttribute;\n  elementCtr.prototype.setAttribute = function (name: string, value: string): void {\n    let targetValue = value;\n    if (name === attr) targetValue = getAbsolutePath(value, this.baseURI || \"\", true);\n    rawElementSetAttribute.call(this, name, targetValue);\n  };\n  // patch href get and set\n  const rawAnchorElementHrefDescriptor = Object.getOwnPropertyDescriptor(elementCtr.prototype, attr);\n  const { enumerable, configurable, get, set } = rawAnchorElementHrefDescriptor;\n  Object.defineProperty(elementCtr.prototype, attr, {\n    enumerable,\n    configurable,\n    get: function () {\n      return get.call(this);\n    },\n    set: function (href) {\n      set.call(this, getAbsolutePath(href, this.baseURI, true));\n    },\n  });\n  // TODO: innerHTML\n}\n\nexport function getCurUrl(proxyLocation: Object): string {\n  const location = proxyLocation as Location;\n  return location.protocol + \"//\" + location.host + location.pathname;\n}\n\nexport function getAbsolutePath(url: string, base: string, hash?: boolean): string {\n  try {\n    // \n    if (url) {\n      // hash\n      if (hash && url.startsWith(\"#\")) return url;\n      return new URL(url, base).href;\n    } else return url;\n  } catch {\n    return url;\n  }\n}\n/**\n * url\n */\nexport function getSyncUrl(id: string, prefix: { [key: string]: string }): string {\n  let winUrlElement = anchorElementGenerator(window.location.href);\n  const queryMap = getAnchorElementQueryMap(winUrlElement);\n  winUrlElement = null;\n  const syncUrl = queryMap[id] || \"\";\n  const validShortPath = syncUrl.match(/^{([^}]*)}/)?.[1];\n  if (prefix && validShortPath) {\n    return syncUrl.replace(`{${validShortPath}}`, prefix[validShortPath]);\n  }\n  return syncUrl;\n}\n// @ts-ignore\nexport const requestIdleCallback = window.requestIdleCallback || ((cb: Function) => setTimeout(cb, 1));\n\nexport function getContainer(container: string | HTMLElement): HTMLElement {\n  return typeof container === \"string\" ? (document.querySelector(container) as HTMLElement) : container;\n}\n\nexport function warn(msg: string, data?: any): void {\n  console?.warn(`[wujie warn]: ${msg}`, data);\n}\n\nexport function error(msg: string, data?: any): void {\n  console?.error(`[wujie error]: ${msg}`, data);\n}\n\nexport function getInlineCode(match) {\n  const start = match.indexOf(\">\") + 1;\n  const end = match.lastIndexOf(\"<\");\n  return match.substring(start, end);\n}\n\nexport function defaultGetPublicPath(entry) {\n  if (typeof entry === \"object\") {\n    return \"/\";\n  }\n  try {\n    const { origin, pathname } = new URL(entry, location.href);\n    const paths = pathname.split(\"/\");\n    // \n    paths.pop();\n    return `${origin}${paths.join(\"/\")}/`;\n  } catch (e) {\n    console.warn(e);\n    return \"\";\n  }\n}\n\n/** [f1, f2, f3, f4] => f4(f3(f2(f1)))  */\nexport function compose(fnList: Array<Function>): (...args: Array<string>) => string {\n  return function (code: string, ...args: Array<any>) {\n    return fnList.reduce((newCode, fn) => (isFunction(fn) ? fn(newCode, ...args) : newCode), code || \"\");\n  };\n}\n\n// \nexport function nextTick(cb: () => any): void {\n  Promise.resolve().then(cb);\n}\n\n//\nexport function execHooks(plugins: Array<plugin>, hookName: string, ...args: Array<any>): void {\n  try {\n    if (plugins && plugins.length > 0) {\n      plugins\n        .map((plugin) => plugin[hookName])\n        .filter((hook) => isFunction(hook))\n        .forEach((hook) => hook(...args));\n    }\n  } catch (e) {\n    error(e);\n  }\n}\n\nexport function isScriptElement(element: HTMLElement): boolean {\n  return element.tagName?.toUpperCase() === \"SCRIPT\";\n}\n\nlet count = 1;\nexport function setTagToScript(element: HTMLScriptElement, tag?: string): void {\n  if (isScriptElement(element)) {\n    const scriptTag = tag || String(count++);\n    element.setAttribute(WUJIE_SCRIPT_ID, scriptTag);\n  }\n}\n\nexport function getTagFromScript(element: HTMLScriptElement): string | null {\n  if (isScriptElement(element)) {\n    return element.getAttribute(WUJIE_SCRIPT_ID);\n  }\n  return null;\n}\n\n// \nexport function mergeOptions(options: cacheOptions, cacheOptions: cacheOptions) {\n  return {\n    name: options.name,\n    el: options.el || cacheOptions?.el,\n    url: options.url || cacheOptions?.url,\n    html: options.html || cacheOptions?.html,\n    exec: options.exec !== undefined ? options.exec : cacheOptions?.exec,\n    replace: options.replace || cacheOptions?.replace,\n    fetch: options.fetch || cacheOptions?.fetch,\n    props: options.props || cacheOptions?.props,\n    sync: options.sync !== undefined ? options.sync : cacheOptions?.sync,\n    prefix: options.prefix || cacheOptions?.prefix,\n    loading: options.loading || cacheOptions?.loading,\n    //  {}\n    attrs: options.attrs !== undefined ? options.attrs : cacheOptions?.attrs || {},\n    degradeAttrs: options.degradeAttrs !== undefined ? options.degradeAttrs : cacheOptions?.degradeAttrs || {},\n    //  true\n    fiber: options.fiber !== undefined ? options.fiber : cacheOptions?.fiber !== undefined ? cacheOptions?.fiber : true,\n    alive: options.alive !== undefined ? options.alive : cacheOptions?.alive,\n    degrade: options.degrade !== undefined ? options.degrade : cacheOptions?.degrade,\n    plugins: options.plugins || cacheOptions?.plugins,\n    lifecycles: {\n      beforeLoad: options.beforeLoad || cacheOptions?.beforeLoad,\n      beforeMount: options.beforeMount || cacheOptions?.beforeMount,\n      afterMount: options.afterMount || cacheOptions?.afterMount,\n      beforeUnmount: options.beforeUnmount || cacheOptions?.beforeUnmount,\n      afterUnmount: options.afterUnmount || cacheOptions?.afterUnmount,\n      activated: options.activated || cacheOptions?.activated,\n      deactivated: options.deactivated || cacheOptions?.deactivated,\n      loadError: options.loadError || cacheOptions?.loadError,\n    },\n  };\n}\n\n/**\n * \n */\nexport function eventTrigger(el: HTMLElement | Window | Document, eventName: string, detail?: any) {\n  let event;\n  if (typeof window.CustomEvent === \"function\") {\n    event = new CustomEvent(eventName, { detail });\n  } else {\n    event = document.createEvent(\"CustomEvent\");\n    event.initCustomEvent(eventName, true, false, detail);\n  }\n  el.dispatchEvent(event);\n}\n\nexport function stopMainAppRun() {\n  warn(WUJIE_TIPS_STOP_APP_DETAIL);\n  throw new Error(WUJIE_TIPS_STOP_APP);\n}\n","import { getInlineCode } from \"./utils\";\n\nconst ALL_SCRIPT_REGEX = /(<script[\\s\\S]*?>)[\\s\\S]*?<\\/script>/gi;\nconst SCRIPT_TAG_REGEX = /<(script)\\s+((?!type=('|\")text\\/ng-template\\3).)*?>.*?<\\/\\1>/is;\nconst SCRIPT_SRC_REGEX = /.*\\ssrc=('|\")?([^>'\"\\s]+)/;\nconst SCRIPT_TYPE_REGEX = /.*\\stype=('|\")?([^>'\"\\s]+)/;\nconst SCRIPT_ENTRY_REGEX = /.*\\sentry\\s*.*/;\nconst SCRIPT_ASYNC_REGEX = /.*\\sasync\\s*.*/;\nconst DEFER_ASYNC_REGEX = /.*\\sdefer\\s*.*/;\nconst SCRIPT_NO_MODULE_REGEX = /.*\\snomodule\\s*.*/;\nconst SCRIPT_MODULE_REGEX = /.*\\stype=('|\")?module('|\")?\\s*.*/;\nconst LINK_TAG_REGEX = /<(link)\\s+.*?>/gis;\nconst LINK_PRELOAD_OR_PREFETCH_REGEX = /\\srel=('|\")?(preload|prefetch|modulepreload)\\1/;\nconst LINK_HREF_REGEX = /.*\\shref=('|\")?([^>'\"\\s]+)/;\nconst LINK_AS_FONT = /.*\\sas=('|\")?font\\1.*/;\nconst STYLE_TAG_REGEX = /<style[^>]*>[\\s\\S]*?<\\/style>/gi;\nconst STYLE_TYPE_REGEX = /\\s+rel=('|\")?stylesheet\\1.*/;\nconst STYLE_HREF_REGEX = /.*\\shref=('|\")?([^>'\"\\s]+)/;\nconst HTML_COMMENT_REGEX = /<!--([\\s\\S]*?)-->/g;\nconst LINK_IGNORE_REGEX = /<link(\\s+|\\s+.+\\s+)ignore(\\s*|\\s+.*|=.*)>/is;\nconst STYLE_IGNORE_REGEX = /<style(\\s+|\\s+.+\\s+)ignore(\\s*|\\s+.*|=.*)>/is;\nconst SCRIPT_IGNORE_REGEX = /<script(\\s+|\\s+.+\\s+)ignore(\\s*|\\s+.*|=.*)>/is;\nconst CROSS_ORIGIN_REGEX = /.*\\scrossorigin=?('|\")?(use-credentials|anonymous)?('|\")?/i;\n\nexport type ScriptAttributes = {\n  [key: string]: string | boolean; // \n};\n/**  */\nexport interface ScriptBaseObject {\n  /**  */\n  src?: string;\n  /** async */\n  async?: boolean;\n  /** defer */\n  defer?: boolean;\n  /** module */\n  module?: boolean;\n  /** crossorigin */\n  crossorigin?: boolean;\n  /** crossorigin */\n  crossoriginType?: \"anonymous\" | \"use-credentials\" | \"\";\n  /**  */\n  attrs?: ScriptAttributes;\n}\nexport type ScriptObject = ScriptBaseObject & {\n  /** script */\n  content?: string;\n  /**  */\n  ignore?: boolean;\n  /**  */\n  onload?: Function;\n};\n\n/**  */\nexport interface StyleObject {\n  /**   */\n  src?: string;\n  /**  */\n  content?: string;\n  /**  */\n  ignore?: boolean;\n}\n\nexport interface TemplateResult {\n  template: string;\n  scripts: ScriptObject[];\n  styles: StyleObject[];\n  entry: string | ScriptObject;\n}\n\nfunction hasProtocol(url) {\n  return url.startsWith(\"//\") || url.startsWith(\"http://\") || url.startsWith(\"https://\");\n}\n\nfunction getEntirePath(path, baseURI) {\n  return new URL(path, baseURI).toString();\n}\n\nfunction isValidJavaScriptType(type) {\n  const handleTypes = [\n    \"text/javascript\",\n    \"module\",\n    \"application/javascript\",\n    \"text/ecmascript\",\n    \"application/ecmascript\",\n    \"importmap\",\n  ];\n  return !type || handleTypes.indexOf(type) !== -1;\n}\n\n/**\n * \n * @param scriptOuterHTML script  outerHTML\n * @returns  script \n */\nexport function parseTagAttributes(TagOuterHTML) {\n  const pattern = /<[-\\w]+\\s+([^>]*)>/i;\n  const matches = pattern.exec(TagOuterHTML);\n\n  if (!matches) {\n    return {};\n  }\n\n  const attributesString = matches[1];\n  const attributesPattern = /([^\\s=]+)\\s*=\\s*(['\"])(.*?)\\2/g;\n  const attributesObject = {};\n\n  let attributeMatches;\n  while ((attributeMatches = attributesPattern.exec(attributesString)) !== null) {\n    const attributeName = attributeMatches[1];\n    const attributeValue = attributeMatches[3];\n    attributesObject[attributeName] = attributeValue;\n  }\n\n  return attributesObject;\n}\n\nfunction isModuleScriptSupported() {\n  const s = window.document.createElement(\"script\");\n  return \"noModule\" in s;\n}\n\nexport const genLinkReplaceSymbol = (linkHref, preloadOrPrefetch = false) =>\n  `<!-- ${preloadOrPrefetch ? \"prefetch/preload/modulepreload\" : \"\"} link ${linkHref} replaced by wujie -->`;\nexport const getInlineStyleReplaceSymbol = (index) => `<!-- inline-style-${index} replaced by wujie -->`;\nexport const genScriptReplaceSymbol = (scriptSrc, type = \"\") =>\n  `<!-- ${type} script ${scriptSrc} replaced by wujie -->`;\nexport const inlineScriptReplaceSymbol = \"<!-- inline scripts replaced by wujie -->\";\nexport const genIgnoreAssetReplaceSymbol = (url) => `<!-- ignore asset ${url || \"file\"} replaced by wujie -->`;\nexport const genModuleScriptReplaceSymbol = (scriptSrc, moduleSupport) =>\n  `<!-- ${moduleSupport ? \"nomodule\" : \"module\"} script ${scriptSrc} ignored by wujie -->`;\n\n/**\n * parse the script link from the template\n * 1. collect stylesheets\n * 2. use global eval to evaluate the inline scripts\n *    see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function#Difference_between_Function_constructor_and_function_declaration\n *    see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/eval#Do_not_ever_use_eval!\n * @param tpl\n * @param baseURI\n * @stripStyles whether to strip the css links\n * @returns {{template: void | string | *, scripts: *[], entry: *}}\n */\nexport default function processTpl(tpl: String, baseURI: String, postProcessTemplate?: Function): TemplateResult {\n  const scripts: ScriptObject[] = [];\n  const styles: StyleObject[] = [];\n  let entry = null;\n  const moduleSupport = isModuleScriptSupported();\n  const template = tpl\n\n    /*\n     remove html comment first\n     */\n    .replace(HTML_COMMENT_REGEX, \"\")\n\n    .replace(LINK_TAG_REGEX, (match) => {\n      /*\n       change the css link\n       */\n      const styleType = !!match.match(STYLE_TYPE_REGEX);\n      if (styleType) {\n        const styleHref = match.match(STYLE_HREF_REGEX);\n        const styleIgnore = match.match(LINK_IGNORE_REGEX);\n\n        if (styleHref) {\n          const href = styleHref && styleHref[2];\n          let newHref = href;\n\n          if (href && !hasProtocol(href)) {\n            newHref = getEntirePath(href, baseURI);\n          }\n          if (styleIgnore) {\n            return genIgnoreAssetReplaceSymbol(newHref);\n          }\n\n          styles.push({ src: newHref });\n          return genLinkReplaceSymbol(newHref);\n        }\n      }\n\n      const preloadOrPrefetchType =\n        match.match(LINK_PRELOAD_OR_PREFETCH_REGEX) && match.match(LINK_HREF_REGEX) && !match.match(LINK_AS_FONT);\n      if (preloadOrPrefetchType) {\n        const [, , linkHref] = match.match(LINK_HREF_REGEX);\n        return genLinkReplaceSymbol(linkHref, true);\n      }\n\n      return match;\n    })\n    .replace(STYLE_TAG_REGEX, (match) => {\n      if (STYLE_IGNORE_REGEX.test(match)) {\n        return genIgnoreAssetReplaceSymbol(\"style file\");\n      } else {\n        const code = getInlineCode(match);\n        styles.push({ src: \"\", content: code });\n        return getInlineStyleReplaceSymbol(styles.length - 1);\n      }\n    })\n    .replace(ALL_SCRIPT_REGEX, (match, scriptTag) => {\n      const scriptIgnore = scriptTag.match(SCRIPT_IGNORE_REGEX);\n      const isModuleScript = !!scriptTag.match(SCRIPT_MODULE_REGEX);\n      const isCrossOriginScript = scriptTag.match(CROSS_ORIGIN_REGEX);\n      const crossOriginType = isCrossOriginScript?.[2] || \"\";\n      const moduleScriptIgnore =\n        (moduleSupport && !!scriptTag.match(SCRIPT_NO_MODULE_REGEX)) || (!moduleSupport && isModuleScript);\n      // in order to keep the exec order of all javascripts\n\n      const matchedScriptTypeMatch = scriptTag.match(SCRIPT_TYPE_REGEX);\n      const matchedScriptType = matchedScriptTypeMatch && matchedScriptTypeMatch[2];\n      if (!isValidJavaScriptType(matchedScriptType)) {\n        return match;\n      }\n\n      // if it is a external script\n      if (SCRIPT_TAG_REGEX.test(match) && scriptTag.match(SCRIPT_SRC_REGEX)) {\n        /*\n         collect scripts and replace the ref\n         */\n\n        const matchedScriptEntry = scriptTag.match(SCRIPT_ENTRY_REGEX);\n        const matchedScriptSrcMatch = scriptTag.match(SCRIPT_SRC_REGEX);\n        let matchedScriptSrc = matchedScriptSrcMatch && matchedScriptSrcMatch[2];\n\n        if (entry && matchedScriptEntry) {\n          throw new SyntaxError(\"You should not set multiply entry script!\");\n        } else {\n          // append the domain while the script not have an protocol prefix\n          if (matchedScriptSrc && !hasProtocol(matchedScriptSrc)) {\n            matchedScriptSrc = getEntirePath(matchedScriptSrc, baseURI);\n          }\n\n          entry = entry || (matchedScriptEntry && matchedScriptSrc);\n        }\n\n        if (scriptIgnore) {\n          return genIgnoreAssetReplaceSymbol(matchedScriptSrc || \"js file\");\n        }\n\n        if (moduleScriptIgnore) {\n          return genModuleScriptReplaceSymbol(matchedScriptSrc || \"js file\", moduleSupport);\n        }\n\n        if (matchedScriptSrc) {\n          const isAsyncScript = !!scriptTag.match(SCRIPT_ASYNC_REGEX);\n          const isDeferScript = !!scriptTag.match(DEFER_ASYNC_REGEX);\n          scripts.push(\n            isAsyncScript || isDeferScript\n              ? {\n                  async: isAsyncScript,\n                  defer: isDeferScript,\n                  src: matchedScriptSrc,\n                  module: isModuleScript,\n                  crossorigin: !!isCrossOriginScript,\n                  crossoriginType: crossOriginType,\n                  attrs: parseTagAttributes(match),\n                }\n              : {\n                  src: matchedScriptSrc,\n                  module: isModuleScript,\n                  crossorigin: !!isCrossOriginScript,\n                  crossoriginType: crossOriginType,\n                  attrs: parseTagAttributes(match),\n                }\n          );\n          return genScriptReplaceSymbol(\n            matchedScriptSrc,\n            (isAsyncScript && \"async\") || (isDeferScript && \"defer\") || \"\"\n          );\n        }\n\n        return match;\n      } else {\n        if (scriptIgnore) {\n          return genIgnoreAssetReplaceSymbol(\"js file\");\n        }\n\n        if (moduleScriptIgnore) {\n          return genModuleScriptReplaceSymbol(\"js file\", moduleSupport);\n        }\n\n        // if it is an inline script\n        const code = getInlineCode(match);\n\n        // remove script blocks when all of these lines are comments.\n        const isPureCommentBlock = code.split(/[\\r\\n]+/).every((line) => !line.trim() || line.trim().startsWith(\"//\"));\n\n        if (!isPureCommentBlock && code) {\n          scripts.push({\n            src: \"\",\n            content: code,\n            module: isModuleScript,\n            crossorigin: !!isCrossOriginScript,\n            crossoriginType: crossOriginType,\n            attrs: parseTagAttributes(match),\n          });\n        }\n\n        return inlineScriptReplaceSymbol;\n      }\n    });\n\n  let tplResult = {\n    template,\n    scripts,\n    styles,\n    // set the last script as entry if have not set\n    entry: entry || scripts[scripts.length - 1],\n  };\n  if (typeof postProcessTemplate === \"function\") {\n    tplResult = postProcessTemplate(tplResult);\n  }\n\n  return tplResult;\n}\n","import { plugin, ScriptObjectLoader } from \"./index\";\nimport { StyleObject } from \"./template\";\nimport { compose, getAbsolutePath } from \"./utils\";\n\ninterface loaderOption {\n  plugins: Array<plugin>;\n  replace: (code: string) => string;\n}\n\n/**\n *  cssLoader\n */\nexport function getCssLoader({ plugins, replace }: loaderOption) {\n  return (code: string, src: string = \"\", base: string): string =>\n    compose(plugins.map((plugin) => plugin.cssLoader))(replace ? replace(code) : code, src, base);\n}\n\n/**\n *  jsLoader\n */\nexport function getJsLoader({ plugins, replace }: loaderOption) {\n  return (code: string, src: string = \"\", base: string): string =>\n    compose(plugins.map((plugin) => plugin.jsLoader))(replace ? replace(code) : code, src, base);\n}\n\n/**\n * \n */\ntype presetLoadersType = \"cssBeforeLoaders\" | \"cssAfterLoaders\" | \"jsBeforeLoaders\" | \"jsAfterLoaders\";\nexport function getPresetLoaders(loaderType: presetLoadersType, plugins: Array<plugin>): plugin[presetLoadersType] {\n  const loaders: (StyleObject | ScriptObjectLoader)[][] = plugins\n    .map((plugin) => plugin[loaderType])\n    .filter((loaders) => loaders?.length);\n  const res = loaders.reduce((preLoaders, curLoaders) => preLoaders.concat(curLoaders), []);\n  return loaderType === \"cssBeforeLoaders\" ? res.reverse() : res;\n}\n\n/**\n * \n */\ntype effectLoadersType = \"jsExcludes\" | \"cssExcludes\" | \"jsIgnores\" | \"cssIgnores\";\nexport function getEffectLoaders(loaderType: effectLoadersType, plugins: Array<plugin>): plugin[effectLoadersType] {\n  return plugins\n    .map((plugin) => plugin[loaderType])\n    .filter((loaders) => loaders?.length)\n    .reduce((preLoaders, curLoaders) => preLoaders.concat(curLoaders), []);\n}\n\n//  url loader\nexport function isMatchUrl(url: string, effectLoaders: plugin[effectLoadersType]): boolean {\n  return effectLoaders.some((loader) => (typeof loader === \"string\" ? url === loader : loader.test(url)));\n}\n\n/**\n * css\n */\nfunction cssRelativePathResolve(code: string, src: string, base: string) {\n  const baseUrl = src ? getAbsolutePath(src, base) : base;\n  /**\n   * https://developer.mozilla.org/en-US/docs/Web/CSS/url\n   *\n   * : const urlReg = /(url\\((?!['\"]?(?:data):)['\"]?)([^'\")]*)(['\"]?\\))/g;\n   *\n   * url(xxx)xxx\n   * base64data:base64svgurl\n   *\n   * eg:\n   * background: url(data:image/svg+xml;charset=utf-8,<svg><path fill=url(#a)></path></svg>)\n   * #asvg\n   *\n   *  */\n  const urlReg = /url\\((['\"]?)((?:[^()]+|\\((?:[^()]+|\\([^()]*\\))*\\))*)(\\1)\\)/g;\n\n  return code.replace(urlReg, (_m, pre, url, post) => {\n    const base64Regx = /^data:/;\n    const isBase64 = base64Regx.test(url);\n\n    /** data:base64 */\n    if (isBase64) {\n      return _m;\n    }\n\n    return `url(${pre}${getAbsolutePath(url, baseUrl)}${post})`;\n  });\n}\n\nconst defaultPlugin = {\n  cssLoader: cssRelativePathResolve,\n  // fix https://github.com/Tencent/wujie/issues/455\n  cssBeforeLoaders: [{ content: \"html {view-transition-name: none;}\" }],\n};\n\nexport function getPlugins(plugins: Array<plugin>): Array<plugin> {\n  return Array.isArray(plugins) ? [defaultPlugin, ...plugins] : [defaultPlugin];\n}\n\nexport default defaultPlugin;\n","import processTpl, {\n  genLinkReplaceSymbol,\n  getInlineStyleReplaceSymbol,\n  ScriptObject,\n  ScriptBaseObject,\n  StyleObject,\n} from \"./template\";\nimport { defaultGetPublicPath, getInlineCode, requestIdleCallback, error, compose, getCurUrl } from \"./utils\";\nimport {\n  WUJIE_TIPS_NO_FETCH,\n  WUJIE_TIPS_SCRIPT_ERROR_REQUESTED,\n  WUJIE_TIPS_CSS_ERROR_REQUESTED,\n  WUJIE_TIPS_HTML_ERROR_REQUESTED,\n} from \"./constant\";\nimport { getEffectLoaders, isMatchUrl } from \"./plugin\";\nimport Wujie from \"./sandbox\";\nimport { plugin, loadErrorHandler } from \"./index\";\n\nexport type ScriptResultList = (ScriptBaseObject & { contentPromise: Promise<string> })[];\nexport type StyleResultList = { src: string; contentPromise: Promise<string>; ignore?: boolean }[];\n\ninterface htmlParseResult {\n  template: string;\n\n  assetPublicPath: string;\n\n  getExternalScripts(): ScriptResultList;\n\n  getExternalStyleSheets(): StyleResultList;\n}\n\ntype ImportEntryOpts = {\n  fetch?: typeof window.fetch;\n  fiber?: boolean;\n  plugins?: Array<plugin>;\n  loadError?: loadErrorHandler;\n};\n\nconst styleCache = {};\nconst scriptCache = {};\nconst embedHTMLCache = {};\n\nif (!window.fetch) {\n  error(WUJIE_TIPS_NO_FETCH);\n  throw new Error();\n}\nconst defaultFetch = window.fetch.bind(window);\n\nfunction defaultGetTemplate(tpl) {\n  return tpl;\n}\n\n/**\n * css-loader\n */\nexport async function processCssLoader(\n  sandbox: Wujie,\n  template: string,\n  getExternalStyleSheets: () => StyleResultList\n): Promise<string> {\n  const curUrl = getCurUrl(sandbox.proxyLocation);\n  /** css-loader */\n  const composeCssLoader = compose(sandbox.plugins.map((plugin) => plugin.cssLoader));\n  const processedCssList: StyleResultList = getExternalStyleSheets().map(({ src, ignore, contentPromise }) => ({\n    src,\n    ignore,\n    contentPromise: contentPromise.then((content) => composeCssLoader(content, src, curUrl)),\n  }));\n  const embedHTML = await getEmbedHTML(template, processedCssList);\n  return sandbox.replace ? sandbox.replace(embedHTML) : embedHTML;\n}\n\n/**\n * convert external css link to inline style for performance optimization\n * @return embedHTML\n */\nasync function getEmbedHTML(template, styleResultList: StyleResultList): Promise<string> {\n  let embedHTML = template;\n\n  return Promise.all(\n    styleResultList.map((styleResult, index) =>\n      styleResult.contentPromise.then((content) => {\n        if (styleResult.src) {\n          embedHTML = embedHTML.replace(\n            genLinkReplaceSymbol(styleResult.src),\n            styleResult.ignore\n              ? `<link href=\"${styleResult.src}\" rel=\"stylesheet\" type=\"text/css\">`\n              : `<style>/* ${styleResult.src} */${content}</style>`\n          );\n        } else if (content) {\n          embedHTML = embedHTML.replace(\n            getInlineStyleReplaceSymbol(index),\n            `<style>/* inline-style-${index} */${content}</style>`\n          );\n        }\n      })\n    )\n  ).then(() => embedHTML);\n}\n\nconst isInlineCode = (code) => code.startsWith(\"<\");\n\nconst fetchAssets = (\n  src: string,\n  cache: Object,\n  fetch: (input: RequestInfo, init?: RequestInit) => Promise<Response>,\n  cssFlag?: boolean,\n  loadError?: loadErrorHandler\n) =>\n  cache[src] ||\n  (cache[src] = fetch(src)\n    .then((response) => {\n      // usually browser treats 4xx and 5xx response of script loading as an error and will fire a script error event\n      // https://stackoverflow.com/questions/5625420/what-http-headers-responses-trigger-the-onerror-handler-on-a-script-tag/5625603\n      if (response.status >= 400) {\n        cache[src] = null;\n        if (cssFlag) {\n          error(WUJIE_TIPS_CSS_ERROR_REQUESTED, { src, response });\n          loadError?.(src, new Error(WUJIE_TIPS_CSS_ERROR_REQUESTED));\n          return \"\";\n        } else {\n          error(WUJIE_TIPS_SCRIPT_ERROR_REQUESTED, { src, response });\n          loadError?.(src, new Error(WUJIE_TIPS_SCRIPT_ERROR_REQUESTED));\n          throw new Error(WUJIE_TIPS_SCRIPT_ERROR_REQUESTED);\n        }\n      }\n      return response.text();\n    })\n    .catch((e) => {\n      cache[src] = null;\n      if (cssFlag) {\n        error(WUJIE_TIPS_CSS_ERROR_REQUESTED, src);\n        loadError?.(src, e);\n        return \"\";\n      } else {\n        error(WUJIE_TIPS_SCRIPT_ERROR_REQUESTED, src);\n        loadError?.(src, e);\n        return \"\";\n      }\n    }));\n\n// for prefetch\nexport function getExternalStyleSheets(\n  styles: StyleObject[],\n  fetch: (input: RequestInfo, init?: RequestInit) => Promise<Response> = defaultFetch,\n  loadError: loadErrorHandler\n): StyleResultList {\n  return styles.map(({ src, content, ignore }) => {\n    // \n    if (content) {\n      return { src: \"\", contentPromise: Promise.resolve(content) };\n    } else if (isInlineCode(src)) {\n      // if it is inline style\n      return { src: \"\", contentPromise: Promise.resolve(getInlineCode(src)) };\n    } else {\n      // external styles\n      return {\n        src,\n        ignore,\n        contentPromise: ignore ? Promise.resolve(\"\") : fetchAssets(src, styleCache, fetch, true, loadError),\n      };\n    }\n  });\n}\n\n// for prefetch\nexport function getExternalScripts(\n  scripts: ScriptObject[],\n  fetch: (input: RequestInfo, init?: RequestInit) => Promise<Response> = defaultFetch,\n  loadError: loadErrorHandler,\n  fiber: boolean\n): ScriptResultList {\n  // module should be requested in iframe\n  return scripts.map((script) => {\n    const { src, async, defer, module, ignore } = script;\n    let contentPromise = null;\n    // async\n    if ((async || defer) && src && !module) {\n      contentPromise = new Promise((resolve, reject) =>\n        fiber\n          ? requestIdleCallback(() => fetchAssets(src, scriptCache, fetch, false, loadError).then(resolve, reject))\n          : fetchAssets(src, scriptCache, fetch, false, loadError).then(resolve, reject)\n      );\n      // module || ignore\n    } else if ((module && src) || ignore) {\n      contentPromise = Promise.resolve(\"\");\n      // inline\n    } else if (!src) {\n      contentPromise = Promise.resolve(script.content);\n      // outline\n    } else {\n      contentPromise = fetchAssets(src, scriptCache, fetch, false, loadError);\n    }\n    // refer https://html.spec.whatwg.org/multipage/scripting.html#attr-script-defer\n    if (module && !async) script.defer = true;\n    return { ...script, contentPromise };\n  });\n}\n\nexport default function importHTML(params: {\n  url: string;\n  html?: string;\n  opts: ImportEntryOpts;\n}): Promise<htmlParseResult> {\n  const { url, opts, html } = params;\n  const fetch = opts.fetch ?? defaultFetch;\n  const fiber = opts.fiber ?? true;\n  const { plugins, loadError } = opts;\n  const htmlLoader = plugins ? compose(plugins.map((plugin) => plugin.htmlLoader)) : defaultGetTemplate;\n  const jsExcludes = getEffectLoaders(\"jsExcludes\", plugins);\n  const cssExcludes = getEffectLoaders(\"cssExcludes\", plugins);\n  const jsIgnores = getEffectLoaders(\"jsIgnores\", plugins);\n  const cssIgnores = getEffectLoaders(\"cssIgnores\", plugins);\n  const getPublicPath = defaultGetPublicPath;\n\n  const getHtmlParseResult = (url, html, htmlLoader) =>\n    (html\n      ? Promise.resolve(html)\n      : fetch(url)\n          .then((response) => {\n            if (response.status >= 400) {\n              error(WUJIE_TIPS_HTML_ERROR_REQUESTED, { url, response });\n              loadError?.(url, new Error(WUJIE_TIPS_HTML_ERROR_REQUESTED));\n              return \"\";\n            }\n            return response.text();\n          })\n          .catch((e) => {\n            embedHTMLCache[url] = null;\n            loadError?.(url, e);\n            return Promise.reject(e);\n          })\n    ).then((html) => {\n      const assetPublicPath = getPublicPath(url);\n      const { template, scripts, styles } = processTpl(htmlLoader(html), assetPublicPath);\n      return {\n        template: template,\n        assetPublicPath,\n        getExternalScripts: () =>\n          getExternalScripts(\n            scripts\n              .filter((script) => !script.src || !isMatchUrl(script.src, jsExcludes))\n              .map((script) => ({ ...script, ignore: script.src && isMatchUrl(script.src, jsIgnores) })),\n            fetch,\n            loadError,\n            fiber\n          ),\n        getExternalStyleSheets: () =>\n          getExternalStyleSheets(\n            styles\n              .filter((style) => !style.src || !isMatchUrl(style.src, cssExcludes))\n              .map((style) => ({ ...style, ignore: style.src && isMatchUrl(style.src, cssIgnores) })),\n            fetch,\n            loadError\n          ),\n      };\n    });\n\n  if (opts?.plugins.some((plugin) => plugin.htmlLoader)) {\n    return getHtmlParseResult(url, html, htmlLoader);\n    // html-loader\n  } else {\n    return embedHTMLCache[url] || (embedHTMLCache[url] = getHtmlParseResult(url, html, htmlLoader));\n  }\n}\n","import Wujie from \"./sandbox\";\nimport { cacheOptions } from \"./index\";\nexport interface SandboxCache {\n  wujie?: Wujie;\n  options?: cacheOptions;\n}\n\nexport type appAddEventListenerOptions = AddEventListenerOptions & { targetWindow?: Window };\n\n// map\n// WuJie__WUJIE_INJECT\nexport const idToSandboxCacheMap = (() => {\n  if (window.__WUJIE_INJECT?.idToSandboxMap) return window.__WUJIE_INJECT.idToSandboxMap;\n  else {\n    const cacheMap = window.__POWERED_BY_WUJIE__\n      ? window.__WUJIE.inject.idToSandboxMap\n      : new Map<String, SandboxCache>();\n    window.__WUJIE_INJECT = { ...window.__WUJIE_INJECT, idToSandboxMap: cacheMap };\n    return cacheMap;\n  }\n})();\n\nexport function getWujieById(id: String): Wujie | null {\n  return idToSandboxCacheMap.get(id)?.wujie || null;\n}\n\nexport function getOptionsById(id: String): cacheOptions | null {\n  return idToSandboxCacheMap.get(id)?.options || null;\n}\n\nexport function addSandboxCacheWithWujie(id: string, sandbox: Wujie): void {\n  const wujieCache = idToSandboxCacheMap.get(id);\n  if (wujieCache) idToSandboxCacheMap.set(id, { ...wujieCache, wujie: sandbox });\n  else idToSandboxCacheMap.set(id, { wujie: sandbox });\n}\n\nexport function deleteWujieById(id: string) {\n  const wujieCache = idToSandboxCacheMap.get(id);\n  if (wujieCache?.options) idToSandboxCacheMap.set(id, { options: wujieCache.options });\n  idToSandboxCacheMap.delete(id);\n}\n\nexport function addSandboxCacheWithOptions(id: string, options: cacheOptions): void {\n  const wujieCache = idToSandboxCacheMap.get(id);\n  if (wujieCache) idToSandboxCacheMap.set(id, { ...wujieCache, options });\n  else idToSandboxCacheMap.set(id, { options });\n}\n\n// document\nexport const documentProxyProperties = {\n  // \n  modifyLocalProperties: [\n    \"createElement\",\n    \"createTextNode\",\n    \"documentURI\",\n    \"URL\",\n    \"getElementsByTagName\",\n    \"getElementById\",\n  ],\n\n  // \n  modifyProperties: [\n    \"createElement\",\n    \"createTextNode\",\n    \"documentURI\",\n    \"URL\",\n    \"getElementsByTagName\",\n    \"getElementsByClassName\",\n    \"getElementsByName\",\n    \"getElementById\",\n    \"querySelector\",\n    \"querySelectorAll\",\n    \"documentElement\",\n    \"scrollingElement\",\n    \"forms\",\n    \"images\",\n    \"links\",\n  ],\n\n  // shadowRoot\n  shadowProperties: [\n    \"activeElement\",\n    \"childElementCount\",\n    \"children\",\n    \"firstElementChild\",\n    \"firstChild\",\n    \"fullscreenElement\",\n    \"lastElementChild\",\n    \"pictureInPictureElement\",\n    \"pointerLockElement\",\n    \"styleSheets\",\n  ],\n\n  // shadowRoot\n  shadowMethods: [\n    \"append\",\n    \"contains\",\n    \"getSelection\",\n    \"elementFromPoint\",\n    \"elementsFromPoint\",\n    \"getAnimations\",\n    \"replaceChildren\",\n  ],\n\n  // document\n  documentProperties: [\n    \"characterSet\",\n    \"compatMode\",\n    \"contentType\",\n    \"designMode\",\n    \"dir\",\n    \"doctype\",\n    \"embeds\",\n    \"fullscreenEnabled\",\n    \"hidden\",\n    \"implementation\",\n    \"lastModified\",\n    \"pictureInPictureEnabled\",\n    \"plugins\",\n    \"readyState\",\n    \"referrer\",\n    \"visibilityState\",\n    \"fonts\",\n  ],\n\n  // document\n  documentMethods: [\n    \"execCommand\",\n    \"caretPositionFromPoint\",\n    \"createRange\",\n    \"exitFullscreen\",\n    \"exitPictureInPicture\",\n    \"getElementsByTagNameNS\",\n    \"hasFocus\",\n    \"prepend\",\n  ],\n\n  // document\n  documentEvents: [\n    \"onpointerlockchange\",\n    \"onpointerlockerror\",\n    \"onbeforecopy\",\n    \"onbeforecut\",\n    \"onbeforepaste\",\n    \"onfreeze\",\n    \"onresume\",\n    \"onsearch\",\n    \"onfullscreenchange\",\n    \"onfullscreenerror\",\n    \"onsecuritypolicyviolation\",\n    \"onvisibilitychange\",\n  ],\n\n  // \n  ownerProperties: [\"head\", \"body\"],\n};\n\n// iframe document\nexport const appDocumentAddEventListenerEvents = [\"DOMContentLoaded\", \"readystatechange\"];\nexport const appDocumentOnEvents = [\"onreadystatechange\"];\n// document\nexport const mainDocumentAddEventListenerEvents = [\n  \"fullscreenchange\",\n  \"fullscreenerror\",\n  \"selectionchange\",\n  \"visibilitychange\",\n  \"wheel\",\n  \"keydown\",\n  \"keypress\",\n  \"keyup\",\n];\n\n// documentshadow\nexport const mainAndAppAddEventListenerEvents = [\"gotpointercapture\", \"lostpointercapture\"];\n\n// windowiframe\nexport const appWindowAddEventListenerEvents = [\n  \"hashchange\",\n  \"popstate\",\n  \"DOMContentLoaded\",\n  \"load\",\n  \"beforeunload\",\n  \"unload\",\n  \"message\",\n  \"error\",\n  \"unhandledrejection\",\n];\n\n// window.onXXXiframe\nexport const appWindowOnEvent = [\"onload\", \"onbeforeunload\", \"onunload\", \"onerror\", \"onunhandledrejection\"];\n\n// tagattrmap\nexport const relativeElementTagAttrMap = {\n  IMG: \"src\",\n  A: \"href\",\n  SOURCE: \"src\",\n};\n\n// window\nexport const windowProxyProperties = [\"getComputedStyle\", \"visualViewport\", \"matchMedia\", \"DOMParser\"];\n\n// window\nexport const windowRegWhiteList = [\n  /animationFrame$/i,\n  /resizeObserver$|mutationObserver$|intersectionObserver$/i,\n  /height$|width$|left$/i,\n  /^screen/i,\n  /CSSStyleSheet$/i,\n  /X$|Y$/,\n];\n\n// \n// Document.prototype\nexport const rawElementAppendChild = HTMLElement.prototype.appendChild;\nexport const rawElementRemoveChild = HTMLElement.prototype.removeChild;\nexport const rawElementContains = HTMLElement.prototype.contains;\nexport const rawHeadInsertBefore = HTMLHeadElement.prototype.insertBefore;\nexport const rawBodyInsertBefore = HTMLBodyElement.prototype.insertBefore;\nexport const rawAddEventListener = Node.prototype.addEventListener;\nexport const rawRemoveEventListener = Node.prototype.removeEventListener;\nexport const rawWindowAddEventListener = window.addEventListener;\nexport const rawWindowRemoveEventListener = window.removeEventListener;\nexport const rawAppendChild = Node.prototype.appendChild;\nexport const rawDocumentQuerySelector = window.__POWERED_BY_WUJIE__\n  ? window.__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR__\n  : Document.prototype.querySelector;\n","import { getExternalStyleSheets, getExternalScripts } from \"./entry\";\nimport {\n  getWujieById,\n  rawAppendChild,\n  rawElementContains,\n  rawElementRemoveChild,\n  rawHeadInsertBefore,\n  rawBodyInsertBefore,\n  rawDocumentQuerySelector,\n  rawAddEventListener,\n  rawRemoveEventListener,\n} from \"./common\";\nimport {\n  isFunction,\n  isHijackingTag,\n  warn,\n  nextTick,\n  getCurUrl,\n  execHooks,\n  isScriptElement,\n  setTagToScript,\n  getTagFromScript,\n  setAttrsToElement,\n} from \"./utils\";\nimport { insertScriptToIframe, patchElementEffect } from \"./iframe\";\nimport Wujie from \"./sandbox\";\nimport { getPatchStyleElements } from \"./shadow\";\nimport { getCssLoader, getEffectLoaders, isMatchUrl } from \"./plugin\";\nimport { WUJIE_SCRIPT_ID, WUJIE_DATA_FLAG, WUJIE_TIPS_REPEAT_RENDER, WUJIE_TIPS_NO_SCRIPT } from \"./constant\";\nimport { ScriptObject, parseTagAttributes } from \"./template\";\n\nfunction patchCustomEvent(\n  e: CustomEvent,\n  elementGetter: () => HTMLScriptElement | HTMLLinkElement | null\n): CustomEvent {\n  Object.defineProperties(e, {\n    srcElement: {\n      get: elementGetter,\n    },\n    target: {\n      get: elementGetter,\n    },\n  });\n\n  return e;\n}\n\n/**\n * \n */\nfunction manualInvokeElementEvent(element: HTMLLinkElement | HTMLScriptElement, event: string): void {\n  const customEvent = new CustomEvent(event);\n  const patchedEvent = patchCustomEvent(customEvent, () => element);\n  if (isFunction(element[`on${event}`])) {\n    element[`on${event}`](patchedEvent);\n  } else {\n    element.dispatchEvent(patchedEvent);\n  }\n}\n\n/**\n * cssstylesheetElement\n */\nfunction handleStylesheetElementPatch(stylesheetElement: HTMLStyleElement & { _patcher?: any }, sandbox: Wujie) {\n  if (!stylesheetElement.innerHTML || sandbox.degrade) return;\n  const patcher = () => {\n    const [hostStyleSheetElement, fontStyleSheetElement] = getPatchStyleElements([stylesheetElement.sheet]);\n    if (hostStyleSheetElement) {\n      sandbox.shadowRoot.head.appendChild(hostStyleSheetElement);\n    }\n    if (fontStyleSheetElement) {\n      sandbox.shadowRoot.host.appendChild(fontStyleSheetElement);\n    }\n    stylesheetElement._patcher = undefined;\n  };\n  if (stylesheetElement._patcher) {\n    clearTimeout(stylesheetElement._patcher);\n  }\n  stylesheetElement._patcher = setTimeout(patcher, 50);\n}\n\n/**\n * \n */\nfunction patchStylesheetElement(\n  stylesheetElement: HTMLStyleElement & { _hasPatchStyle?: boolean },\n  cssLoader: (code: string, url: string, base: string) => string,\n  sandbox: Wujie,\n  curUrl: string\n) {\n  if (stylesheetElement._hasPatchStyle) return;\n  const innerHTMLDesc = Object.getOwnPropertyDescriptor(Element.prototype, \"innerHTML\");\n  const innerTextDesc = Object.getOwnPropertyDescriptor(HTMLElement.prototype, \"innerText\");\n  const textContentDesc = Object.getOwnPropertyDescriptor(Node.prototype, \"textContent\");\n  const RawInsertRule = stylesheetElement.sheet?.insertRule;\n  // cssRuleinnerHTML\n  function patchSheetInsertRule() {\n    if (!RawInsertRule) return;\n    stylesheetElement.sheet.insertRule = (rule: string, index?: number): number => {\n      innerHTMLDesc ? (stylesheetElement.innerHTML += rule) : (stylesheetElement.innerText += rule);\n      return RawInsertRule.call(stylesheetElement.sheet, rule, index);\n    };\n  }\n  patchSheetInsertRule();\n\n  if (innerHTMLDesc) {\n    Object.defineProperties(stylesheetElement, {\n      innerHTML: {\n        get: function () {\n          return innerHTMLDesc.get.call(stylesheetElement);\n        },\n        set: function (code: string) {\n          innerHTMLDesc.set.call(stylesheetElement, cssLoader(code, \"\", curUrl));\n          nextTick(() => handleStylesheetElementPatch(this, sandbox));\n        },\n      },\n    });\n  }\n\n  Object.defineProperties(stylesheetElement, {\n    innerText: {\n      get: function () {\n        return innerTextDesc.get.call(stylesheetElement);\n      },\n      set: function (code: string) {\n        innerTextDesc.set.call(stylesheetElement, cssLoader(code, \"\", curUrl));\n        nextTick(() => handleStylesheetElementPatch(this, sandbox));\n      },\n    },\n    textContent: {\n      get: function () {\n        return textContentDesc.get.call(stylesheetElement);\n      },\n      set: function (code: string) {\n        textContentDesc.set.call(stylesheetElement, cssLoader(code, \"\", curUrl));\n        nextTick(() => handleStylesheetElementPatch(this, sandbox));\n      },\n    },\n    appendChild: {\n      value: function (node: Node): Node {\n        nextTick(() => handleStylesheetElementPatch(this, sandbox));\n        if (node.nodeType === Node.TEXT_NODE) {\n          const res = rawAppendChild.call(\n            stylesheetElement,\n            stylesheetElement.ownerDocument.createTextNode(cssLoader(node.textContent, \"\", curUrl))\n          );\n          // appendChildsheetpatch\n          patchSheetInsertRule();\n          return res;\n        } else return rawAppendChild(node);\n      },\n    },\n    _hasPatchStyle: { get: () => true },\n  });\n}\n\nlet dynamicScriptExecStack = Promise.resolve();\nfunction rewriteAppendOrInsertChild(opts: {\n  rawDOMAppendOrInsertBefore: <T extends Node>(newChild: T, refChild?: Node | null) => T;\n  wujieId: string;\n}) {\n  return function appendChildOrInsertBefore<T extends Node>(\n    this: HTMLHeadElement | HTMLBodyElement,\n    newChild: T,\n    refChild?: Node | null\n  ) {\n    let element = newChild as any;\n    const { rawDOMAppendOrInsertBefore, wujieId } = opts;\n    const sandbox = getWujieById(wujieId);\n\n    const { styleSheetElements, replace, fetch, plugins, iframe, lifecycles, proxyLocation, fiber } = sandbox;\n\n    if (!isHijackingTag(element.tagName) || !wujieId) {\n      const res = rawDOMAppendOrInsertBefore.call(this, element, refChild) as T;\n      patchElementEffect(element, iframe.contentWindow);\n      execHooks(plugins, \"appendOrInsertElementHook\", element, iframe.contentWindow);\n      return res;\n    }\n\n    const iframeDocument = iframe.contentDocument;\n    const curUrl = getCurUrl(proxyLocation);\n\n    // TODO \n    if (element.tagName) {\n      switch (element.tagName?.toUpperCase()) {\n        case \"LINK\": {\n          const { href, rel, type } = element as HTMLLinkElement;\n          const styleFlag = rel === \"stylesheet\" || type === \"text/css\" || href.endsWith(\".css\");\n          //  stylesheet \n          if (!styleFlag) {\n            const res = rawDOMAppendOrInsertBefore.call(this, element, refChild);\n            execHooks(plugins, \"appendOrInsertElementHook\", element, iframe.contentWindow);\n            return res;\n          }\n          // css\n          if (href && !isMatchUrl(href, getEffectLoaders(\"cssExcludes\", plugins))) {\n            getExternalStyleSheets(\n              [{ src: href, ignore: isMatchUrl(href, getEffectLoaders(\"cssIgnores\", plugins)) }],\n              fetch,\n              lifecycles.loadError\n            ).forEach(({ src, ignore, contentPromise }) =>\n              contentPromise.then(\n                (content) => {\n                  //  ignore \n                  const rawAttrs = parseTagAttributes(element.outerHTML);\n                  if (ignore && src) {\n                    // const stylesheetElement = iframeDocument.createElement(\"link\");\n                    // const attrs = {\n                    //   ...rawAttrs,\n                    //   type: \"text/css\",\n                    //   rel: \"stylesheet\",\n                    //   href: src,\n                    // };\n                    // setAttrsToElement(stylesheetElement, attrs);\n                    // rawDOMAppendOrInsertBefore.call(this, stylesheetElement, refChild);\n                    // manualInvokeElementEvent(element, \"load\");\n                    //  link  element \n                    rawDOMAppendOrInsertBefore.call(this, element, refChild);\n                  } else {\n                    // js\n                    const stylesheetElement = iframeDocument.createElement(\"style\");\n                    // css-loader\n                    const cssLoader = getCssLoader({ plugins, replace });\n                    stylesheetElement.innerHTML = cssLoader(content, src, curUrl);\n                    styleSheetElements.push(stylesheetElement);\n                    setAttrsToElement(stylesheetElement, rawAttrs);\n                    rawDOMAppendOrInsertBefore.call(this, stylesheetElement, refChild);\n                    // \n                    handleStylesheetElementPatch(stylesheetElement, sandbox);\n                    manualInvokeElementEvent(element, \"load\");\n                  }\n                  element = null;\n                },\n                () => {\n                  manualInvokeElementEvent(element, \"error\");\n                  element = null;\n                }\n              )\n            );\n          }\n\n          const comment = iframeDocument.createComment(`dynamic link ${href} replaced by wujie`);\n          return rawDOMAppendOrInsertBefore.call(this, comment, refChild);\n        }\n        case \"STYLE\": {\n          const stylesheetElement: HTMLStyleElement = newChild as any;\n          styleSheetElements.push(stylesheetElement);\n          const content = stylesheetElement.innerHTML;\n          const cssLoader = getCssLoader({ plugins, replace });\n          content && (stylesheetElement.innerHTML = cssLoader(content, \"\", curUrl));\n          const res = rawDOMAppendOrInsertBefore.call(this, element, refChild);\n          // \n          patchStylesheetElement(stylesheetElement, cssLoader, sandbox, curUrl);\n          handleStylesheetElementPatch(stylesheetElement, sandbox);\n          execHooks(plugins, \"appendOrInsertElementHook\", element, iframe.contentWindow);\n          return res;\n        }\n        case \"SCRIPT\": {\n          setTagToScript(element);\n          const { src, text, type, crossOrigin } = element as HTMLScriptElement;\n          // js\n          if (src && !isMatchUrl(src, getEffectLoaders(\"jsExcludes\", plugins))) {\n            const execScript = (scriptResult: ScriptObject) => {\n              // \n              if (sandbox.iframe === null) return warn(WUJIE_TIPS_REPEAT_RENDER);\n              const onload = () => {\n                manualInvokeElementEvent(element, \"load\");\n                element = null;\n              };\n              insertScriptToIframe({ ...scriptResult, onload }, sandbox.iframe.contentWindow, element);\n            };\n            const scriptOptions = {\n              src,\n              module: type === \"module\",\n              crossorigin: crossOrigin !== null,\n              crossoriginType: crossOrigin || \"\",\n              ignore: isMatchUrl(src, getEffectLoaders(\"jsIgnores\", plugins)),\n              attrs: parseTagAttributes(element.outerHTML),\n            } as ScriptObject;\n            getExternalScripts([scriptOptions], fetch, lifecycles.loadError, fiber).forEach((scriptResult) => {\n              dynamicScriptExecStack = dynamicScriptExecStack.then(() =>\n                scriptResult.contentPromise.then(\n                  (content) => {\n                    if (sandbox.execQueue === null) return warn(WUJIE_TIPS_REPEAT_RENDER);\n                    const execQueueLength = sandbox.execQueue?.length;\n                    sandbox.execQueue.push(() =>\n                      fiber\n                        ? sandbox.requestIdleCallback(() => {\n                            execScript({ ...scriptResult, content });\n                          })\n                        : execScript({ ...scriptResult, content })\n                    );\n                    // \n                    if (!execQueueLength) sandbox.execQueue.shift()();\n                  },\n                  () => {\n                    manualInvokeElementEvent(element, \"error\");\n                    element = null;\n                  }\n                )\n              );\n            });\n          } else {\n            const execQueueLength = sandbox.execQueue?.length;\n            sandbox.execQueue.push(() =>\n              fiber\n                ? sandbox.requestIdleCallback(() => {\n                    insertScriptToIframe(\n                      { src: null, content: text, attrs: parseTagAttributes(element.outerHTML) },\n                      sandbox.iframe.contentWindow,\n                      element\n                    );\n                  })\n                : insertScriptToIframe(\n                    { src: null, content: text, attrs: parseTagAttributes(element.outerHTML) },\n                    sandbox.iframe.contentWindow,\n                    element\n                  )\n            );\n            if (!execQueueLength) sandbox.execQueue.shift()();\n          }\n          // inline script never trigger the onload and onerror event\n          const comment = iframeDocument.createComment(`dynamic script ${src} replaced by wujie`);\n          return rawDOMAppendOrInsertBefore.call(this, comment, refChild);\n        }\n        // iframewindow.parent\n        case \"IFRAME\": {\n          // js-iframejs-iframe\n          if (element.getAttribute(WUJIE_DATA_FLAG) === \"\") {\n            return rawAppendChild.call(rawDocumentQuerySelector.call(this.ownerDocument, \"html\"), element);\n          }\n          const res = rawDOMAppendOrInsertBefore.call(this, element, refChild);\n          execHooks(plugins, \"appendOrInsertElementHook\", element, iframe.contentWindow);\n          return res;\n        }\n        default:\n      }\n    }\n  };\n}\n\nfunction findScriptElementFromIframe(rawElement: HTMLScriptElement, wujieId: string) {\n  const wujieTag = getTagFromScript(rawElement);\n  const sandbox = getWujieById(wujieId);\n  const { iframe } = sandbox;\n  const targetScript = iframe.contentWindow.__WUJIE_RAW_DOCUMENT_HEAD__.querySelector(\n    `script[${WUJIE_SCRIPT_ID}='${wujieTag}']`\n  );\n  if (targetScript === null) {\n    warn(WUJIE_TIPS_NO_SCRIPT, `<script ${WUJIE_SCRIPT_ID}='${wujieTag}'/>`);\n  }\n  return { targetScript, iframe };\n}\n\nfunction rewriteContains(opts: { rawElementContains: (other: Node | null) => boolean; wujieId: string }) {\n  return function contains(other: Node | null) {\n    const element = other as HTMLElement;\n    const { rawElementContains, wujieId } = opts;\n    if (element && isScriptElement(element)) {\n      const { targetScript } = findScriptElementFromIframe(element as HTMLScriptElement, wujieId);\n      return targetScript !== null;\n    }\n    return rawElementContains(element);\n  };\n}\n\nfunction rewriteRemoveChild(opts: { rawElementRemoveChild: <T extends Node>(child: T) => T; wujieId: string }) {\n  return function removeChild(child: Node) {\n    const element = child as HTMLElement;\n    const { rawElementRemoveChild, wujieId } = opts;\n    if (element && isScriptElement(element)) {\n      const { targetScript, iframe } = findScriptElementFromIframe(element as HTMLScriptElement, wujieId);\n      if (targetScript !== null) {\n        return iframe.contentWindow.__WUJIE_RAW_DOCUMENT_HEAD__.removeChild(targetScript);\n      }\n      return null;\n    }\n    return rawElementRemoveChild(element);\n  };\n}\n\n/**\n * headbodyheadbody\n */\nfunction patchEventListener(element: HTMLHeadElement | HTMLBodyElement) {\n  const listenerMap = new Map<string, EventListenerOrEventListenerObject[]>();\n  element._cacheListeners = listenerMap;\n\n  element.addEventListener = (\n    type: string,\n    listener: EventListenerOrEventListenerObject,\n    options?: boolean | AddEventListenerOptions\n  ) => {\n    const listeners = listenerMap.get(type) || [];\n    listenerMap.set(type, [...listeners, listener]);\n    return rawAddEventListener.call(element, type, listener, options);\n  };\n\n  element.removeEventListener = (\n    type: string,\n    listener: EventListenerOrEventListenerObject,\n    options?: boolean | AddEventListenerOptions\n  ) => {\n    const typeListeners = listenerMap.get(type);\n    const index = typeListeners?.indexOf(listener);\n    if (typeListeners?.length && index !== -1) {\n      typeListeners.splice(index, 1);\n    }\n    return rawRemoveEventListener.call(element, type, listener, options);\n  };\n}\n\n/**\n * headbody\n */\nexport function removeEventListener(element: HTMLHeadElement | HTMLBodyElement) {\n  const listenerMap = element._cacheListeners;\n  [...listenerMap.entries()].forEach(([type, listeners]) => {\n    listeners.forEach((listener) => rawRemoveEventListener.call(element, type, listener));\n  });\n}\n\n/**\n * patch head and body in render\n * intercept appendChild and insertBefore\n */\nexport function patchRenderEffect(render: ShadowRoot | Document, id: string, degrade: boolean): void {\n  // domiframeiframe\n  if (!degrade) {\n    patchEventListener(render.head);\n    patchEventListener(render.body as HTMLBodyElement);\n  }\n\n  render.head.appendChild = rewriteAppendOrInsertChild({\n    rawDOMAppendOrInsertBefore: rawAppendChild,\n    wujieId: id,\n  }) as typeof rawAppendChild;\n  render.head.insertBefore = rewriteAppendOrInsertChild({\n    rawDOMAppendOrInsertBefore: rawHeadInsertBefore as any,\n    wujieId: id,\n  }) as typeof rawHeadInsertBefore;\n  render.head.removeChild = rewriteRemoveChild({\n    rawElementRemoveChild: rawElementRemoveChild.bind(render.head),\n    wujieId: id,\n  }) as typeof rawElementRemoveChild;\n  render.head.contains = rewriteContains({\n    rawElementContains: rawElementContains.bind(render.head),\n    wujieId: id,\n  }) as typeof rawElementContains;\n  render.contains = rewriteContains({\n    rawElementContains: rawElementContains.bind(render),\n    wujieId: id,\n  }) as typeof rawElementContains;\n  render.body.appendChild = rewriteAppendOrInsertChild({\n    rawDOMAppendOrInsertBefore: rawAppendChild,\n    wujieId: id,\n  }) as typeof rawAppendChild;\n  render.body.insertBefore = rewriteAppendOrInsertChild({\n    rawDOMAppendOrInsertBefore: rawBodyInsertBefore as any,\n    wujieId: id,\n  }) as typeof rawBodyInsertBefore;\n}\n","import {\n  WUJIE_APP_ID,\n  WUJIE_IFRAME_CLASS,\n  WUJIE_SHADE_STYLE,\n  CONTAINER_POSITION_DATA_FLAG,\n  CONTAINER_OVERFLOW_DATA_FLAG,\n  LOADING_DATA_FLAG,\n  WUJIE_LOADING_STYLE,\n  WUJIE_LOADING_SVG,\n} from \"./constant\";\nimport {\n  getWujieById,\n  rawAppendChild,\n  rawElementAppendChild,\n  rawElementRemoveChild,\n  relativeElementTagAttrMap,\n} from \"./common\";\nimport { getExternalStyleSheets } from \"./entry\";\nimport Wujie from \"./sandbox\";\nimport { patchElementEffect } from \"./iframe\";\nimport { patchRenderEffect } from \"./effect\";\nimport { getCssLoader, getPresetLoaders } from \"./plugin\";\nimport { getAbsolutePath, getContainer, getCurUrl, setAttrsToElement } from \"./utils\";\n\nconst cssSelectorMap = {\n  \":root\": \":host\",\n};\n\ndeclare global {\n  interface ShadowRoot {\n    head: HTMLHeadElement;\n    body: HTMLBodyElement;\n  }\n}\n\n/**\n *  wujie webComponentshadowdom\n */\nexport function defineWujieWebComponent() {\n  const customElements = window.customElements;\n  if (customElements && !customElements?.get(\"wujie-app\")) {\n    class WujieApp extends HTMLElement {\n      connectedCallback(): void {\n        if (this.shadowRoot) return;\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\n        const sandbox = getWujieById(this.getAttribute(WUJIE_APP_ID));\n        patchElementEffect(shadowRoot, sandbox.iframe.contentWindow);\n        sandbox.shadowRoot = shadowRoot;\n      }\n\n      disconnectedCallback(): void {\n        const sandbox = getWujieById(this.getAttribute(WUJIE_APP_ID));\n        sandbox?.unmount();\n      }\n    }\n    customElements?.define(\"wujie-app\", WujieApp);\n  }\n}\n\nexport function createWujieWebComponent(id: string): HTMLElement {\n  const contentElement = window.document.createElement(\"wujie-app\");\n  contentElement.setAttribute(WUJIE_APP_ID, id);\n  contentElement.classList.add(WUJIE_IFRAME_CLASS);\n  return contentElement;\n}\n\n/**\n * \n */\nexport function renderElementToContainer(\n  element: Element | ChildNode,\n  selectorOrElement: string | HTMLElement\n): HTMLElement {\n  const container = getContainer(selectorOrElement);\n  if (container && !container.contains(element)) {\n    //  loading \n    if (!container.querySelector(`div[${LOADING_DATA_FLAG}]`)) {\n      // \n      clearChild(container);\n    }\n    // \n    if (element) {\n      rawElementAppendChild.call(container, element);\n    }\n  }\n  return container;\n}\n\n/**\n * iframe\n */\nexport function initRenderIframeAndContainer(\n  id: string,\n  parent: string | HTMLElement,\n  degradeAttrs: { [key: string]: any } = {}\n): { iframe: HTMLIFrameElement; container: HTMLElement } {\n  const iframe = createIframeContainer(id, degradeAttrs);\n  const container = renderElementToContainer(iframe, parent);\n  const contentDocument = iframe.contentWindow.document;\n  contentDocument.open();\n  contentDocument.write(\"<!DOCTYPE html><html><head></head><body></body></html>\");\n  contentDocument.close();\n  return { iframe, container };\n}\n\n/**\n * css-before-loader  css-after-loader\n */\nasync function processCssLoaderForTemplate(sandbox: Wujie, html: HTMLHtmlElement): Promise<HTMLHtmlElement> {\n  const document = sandbox.iframe.contentDocument;\n  const { plugins, replace, proxyLocation } = sandbox;\n  const cssLoader = getCssLoader({ plugins, replace });\n  const cssBeforeLoaders = getPresetLoaders(\"cssBeforeLoaders\", plugins);\n  const cssAfterLoaders = getPresetLoaders(\"cssAfterLoaders\", plugins);\n  const curUrl = getCurUrl(proxyLocation);\n\n  return await Promise.all([\n    Promise.all(\n      getExternalStyleSheets(cssBeforeLoaders, sandbox.fetch, sandbox.lifecycles.loadError).map(\n        ({ src, contentPromise }) => contentPromise.then((content) => ({ src, content }))\n      )\n    ).then((contentList) => {\n      contentList.forEach(({ src, content }) => {\n        if (!content) return;\n        const styleElement = document.createElement(\"style\");\n        styleElement.setAttribute(\"type\", \"text/css\");\n        styleElement.appendChild(document.createTextNode(content ? cssLoader(content, src, curUrl) : content));\n        const head = html.querySelector(\"head\");\n        const body = html.querySelector(\"body\");\n        html.insertBefore(styleElement, head || body || html.firstChild);\n      });\n    }),\n    Promise.all(\n      getExternalStyleSheets(cssAfterLoaders, sandbox.fetch, sandbox.lifecycles.loadError).map(\n        ({ src, contentPromise }) => contentPromise.then((content) => ({ src, content }))\n      )\n    ).then((contentList) => {\n      contentList.forEach(({ src, content }) => {\n        if (!content) return;\n        const styleElement = document.createElement(\"style\");\n        styleElement.setAttribute(\"type\", \"text/css\");\n        styleElement.appendChild(document.createTextNode(content ? cssLoader(content, src, curUrl) : content));\n        html.appendChild(styleElement);\n      });\n    }),\n  ]).then(\n    () => html,\n    () => html\n  );\n}\n\n// htmlheadbody\nfunction replaceHeadAndBody(html: HTMLHtmlElement, head: HTMLHeadElement, body: HTMLBodyElement): HTMLHtmlElement {\n  const headElement = html.querySelector(\"head\");\n  const bodyElement = html.querySelector(\"body\");\n  if (headElement) {\n    while (headElement.firstChild) {\n      rawAppendChild.call(head, headElement.firstChild.cloneNode(true));\n      headElement.removeChild(headElement.firstChild);\n    }\n    headElement.parentNode.replaceChild(head, headElement);\n  }\n  if (bodyElement) {\n    while (bodyElement.firstChild) {\n      rawAppendChild.call(body, bodyElement.firstChild.cloneNode(true));\n      bodyElement.removeChild(bodyElement.firstChild);\n    }\n    bodyElement.parentNode.replaceChild(body, bodyElement);\n  }\n  return html;\n}\n\n/**\n * templatehtml\n */\nfunction renderTemplateToHtml(iframeWindow: Window, template: string): HTMLHtmlElement {\n  const sandbox = iframeWindow.__WUJIE;\n  const { head, body, alive, execFlag } = sandbox;\n  const document = iframeWindow.document;\n  const parser = new DOMParser();\n  const parsedDocument = parser.parseFromString(template, \"text/html\");\n\n  //  template htmldocumentElement  HTMLHtmlElement\n  const parsedHtml = parsedDocument.documentElement as HTMLHtmlElement;\n  const sourceAttributes = parsedHtml.attributes;\n  let html = document.createElement(\"html\");\n  html.innerHTML = template;\n  for (let i = 0; i < sourceAttributes.length; i++) {\n    html.setAttribute(sourceAttributes[i].name, sourceAttributes[i].value);\n  }\n  // headbody\n  if (!alive && execFlag) {\n    html = replaceHeadAndBody(html, head, body);\n  } else {\n    sandbox.head = html.querySelector(\"head\");\n    sandbox.body = html.querySelector(\"body\");\n  }\n  const ElementIterator = document.createTreeWalker(html, NodeFilter.SHOW_ELEMENT, null, false);\n  let nextElement = ElementIterator.currentNode as HTMLElement;\n  while (nextElement) {\n    patchElementEffect(nextElement, iframeWindow);\n    const relativeAttr = relativeElementTagAttrMap[nextElement.tagName];\n    const url = nextElement[relativeAttr];\n    if (relativeAttr) nextElement.setAttribute(relativeAttr, getAbsolutePath(url, nextElement.baseURI || \"\"));\n    nextElement = ElementIterator.nextNode() as HTMLElement;\n  }\n  if (!html.querySelector(\"head\")) {\n    const head = document.createElement(\"head\");\n    html.appendChild(head);\n  }\n  if (!html.querySelector(\"body\")) {\n    const body = document.createElement(\"body\");\n    html.appendChild(body);\n  }\n  return html;\n}\n\n/**\n * templateshadowRoot\n */\nexport async function renderTemplateToShadowRoot(\n  shadowRoot: ShadowRoot,\n  iframeWindow: Window,\n  template: string\n): Promise<void> {\n  const html = renderTemplateToHtml(iframeWindow, template);\n  //  css-before-loader  css-after-loader\n  const processedHtml = await processCssLoaderForTemplate(iframeWindow.__WUJIE, html);\n  // change ownerDocument\n  shadowRoot.appendChild(processedHtml);\n  const shade = document.createElement(\"div\");\n  shade.setAttribute(\"style\", WUJIE_SHADE_STYLE);\n  processedHtml.insertBefore(shade, processedHtml.firstChild);\n  shadowRoot.head = shadowRoot.querySelector(\"head\");\n  shadowRoot.body = shadowRoot.querySelector(\"body\");\n\n  //  html parentNode\n  Object.defineProperty(shadowRoot.firstChild, \"parentNode\", {\n    enumerable: true,\n    configurable: true,\n    get: () => iframeWindow.document,\n  });\n\n  patchRenderEffect(shadowRoot, iframeWindow.__WUJIE.id, false);\n}\n\nexport function createIframeContainer(id: string, degradeAttrs: { [key: string]: any } = {}): HTMLIFrameElement {\n  const iframe = document.createElement(\"iframe\");\n  const defaultStyle = \"height:100%;width:100%\";\n  setAttrsToElement(iframe, {\n    ...degradeAttrs,\n    style: [defaultStyle, degradeAttrs.style].join(\";\"),\n    [WUJIE_APP_ID]: id,\n  });\n  return iframe;\n}\n\n/**\n * templateiframe\n */\nexport async function renderTemplateToIframe(\n  renderDocument: Document,\n  iframeWindow: Window,\n  template: string\n): Promise<void> {\n  // template\n  const html = renderTemplateToHtml(iframeWindow, template);\n  //  css-before-loader  css-after-loader\n  const processedHtml = await processCssLoaderForTemplate(iframeWindow.__WUJIE, html);\n  renderDocument.replaceChild(processedHtml, renderDocument.documentElement);\n\n  //  html parentNode\n  Object.defineProperty(renderDocument.documentElement, \"parentNode\", {\n    enumerable: true,\n    configurable: true,\n    get: () => iframeWindow.document,\n  });\n\n  patchRenderEffect(renderDocument, iframeWindow.__WUJIE.id, true);\n}\n\n/**\n * Element\n */\nexport function clearChild(root: ShadowRoot | Node): void {\n  // \n  while (root?.firstChild) {\n    rawElementRemoveChild.call(root, root.firstChild);\n  }\n}\n\n/**\n * loading\n */\nexport function addLoading(el: string | HTMLElement, loading: HTMLElement): void {\n  const container = getContainer(el);\n  clearChild(container);\n  //  loading \n  let containerStyles = null;\n  try {\n    containerStyles = window.getComputedStyle(container);\n  } catch {\n    return;\n  }\n  if (containerStyles.position === \"static\") {\n    container.setAttribute(CONTAINER_POSITION_DATA_FLAG, containerStyles.position);\n    container.setAttribute(\n      CONTAINER_OVERFLOW_DATA_FLAG,\n      containerStyles.overflow === \"visible\" ? \"\" : containerStyles.overflow\n    );\n    container.style.setProperty(\"position\", \"relative\");\n    container.style.setProperty(\"overflow\", \"hidden\");\n  } else if ([\"relative\", \"sticky\"].includes(containerStyles.position)) {\n    container.setAttribute(\n      CONTAINER_OVERFLOW_DATA_FLAG,\n      containerStyles.overflow === \"visible\" ? \"\" : containerStyles.overflow\n    );\n    container.style.setProperty(\"overflow\", \"hidden\");\n  }\n  const loadingContainer = document.createElement(\"div\");\n  loadingContainer.setAttribute(LOADING_DATA_FLAG, \"\");\n  loadingContainer.setAttribute(\"style\", WUJIE_LOADING_STYLE);\n  if (loading) loadingContainer.appendChild(loading);\n  else loadingContainer.innerHTML = WUJIE_LOADING_SVG;\n  container.appendChild(loadingContainer);\n}\n/**\n * loading\n */\nexport function removeLoading(el: HTMLElement): void {\n  // \n  const positionFlag = el.getAttribute(CONTAINER_POSITION_DATA_FLAG);\n  const overflowFlag = el.getAttribute(CONTAINER_OVERFLOW_DATA_FLAG);\n  if (positionFlag) el.style.removeProperty(\"position\");\n  if (overflowFlag !== null) {\n    overflowFlag ? el.style.setProperty(\"overflow\", overflowFlag) : el.style.removeProperty(\"overflow\");\n  }\n  el.removeAttribute(CONTAINER_POSITION_DATA_FLAG);\n  el.removeAttribute(CONTAINER_OVERFLOW_DATA_FLAG);\n  const loadingContainer = el.querySelector(`div[${LOADING_DATA_FLAG}]`);\n  loadingContainer && el.removeChild(loadingContainer);\n}\n/**\n * \n * rootfont-face\n */\nexport function getPatchStyleElements(rootStyleSheets: Array<CSSStyleSheet>): Array<HTMLStyleElement | null> {\n  const rootCssRules = [];\n  const fontCssRules = [];\n  const rootStyleReg = /:root/g;\n\n  // rootcssRules\n  for (let i = 0; i < rootStyleSheets.length; i++) {\n    const cssRules = rootStyleSheets[i]?.cssRules ?? [];\n    for (let j = 0; j < cssRules.length; j++) {\n      const cssRuleText = cssRules[j].cssText;\n      // rootcssRule\n      if (rootStyleReg.test(cssRuleText)) {\n        rootCssRules.push(cssRuleText.replace(rootStyleReg, (match) => cssSelectorMap[match]));\n      }\n      // font-facecssRule\n      if (cssRules[j].type === CSSRule.FONT_FACE_RULE) {\n        fontCssRules.push(cssRuleText);\n      }\n    }\n  }\n\n  let rootStyleSheetElement = null;\n  let fontStyleSheetElement = null;\n\n  // host\n  if (rootCssRules.length) {\n    rootStyleSheetElement = window.document.createElement(\"style\");\n    rootStyleSheetElement.innerHTML = rootCssRules.join(\"\");\n  }\n\n  if (fontCssRules.length) {\n    fontStyleSheetElement = window.document.createElement(\"style\");\n    fontStyleSheetElement.innerHTML = fontCssRules.join(\"\");\n  }\n\n  return [rootStyleSheetElement, fontStyleSheetElement];\n}\n","import { anchorElementGenerator, getAnchorElementQueryMap, getSyncUrl, appRouteParse, getDegradeIframe } from \"./utils\";\nimport { renderIframeReplaceApp, patchEventTimeStamp } from \"./iframe\";\nimport { renderElementToContainer, initRenderIframeAndContainer } from \"./shadow\";\nimport { getWujieById, rawDocumentQuerySelector } from \"./common\";\n\n/**\n * \n */\nexport function syncUrlToWindow(iframeWindow: Window): void {\n  const { sync, id, prefix } = iframeWindow.__WUJIE;\n  let winUrlElement = anchorElementGenerator(window.location.href);\n  const queryMap = getAnchorElementQueryMap(winUrlElement);\n  // urlid\n  if (!sync && !queryMap[id]) return (winUrlElement = null);\n  const curUrl = iframeWindow.location.pathname + iframeWindow.location.search + iframeWindow.location.hash;\n  let validShortPath = \"\";\n  // \n  if (prefix) {\n    Object.keys(prefix).forEach((shortPath) => {\n      const longPath = prefix[shortPath];\n      // \n      if (curUrl.startsWith(longPath) && (!validShortPath || longPath.length > prefix[validShortPath].length)) {\n        validShortPath = shortPath;\n      }\n    });\n  }\n  // \n  if (sync) {\n    queryMap[id] = window.encodeURIComponent(\n      validShortPath ? curUrl.replace(prefix[validShortPath], `{${validShortPath}}`) : curUrl\n    );\n    // \n  } else {\n    delete queryMap[id];\n  }\n  const newQuery =\n    \"?\" +\n    Object.keys(queryMap)\n      .map((key) => key + \"=\" + queryMap[key])\n      .join(\"&\");\n  winUrlElement.search = newQuery;\n  if (winUrlElement.href !== window.location.href) {\n    window.history.replaceState(null, \"\", winUrlElement.href);\n  }\n  winUrlElement = null;\n}\n\n/**\n * \n */\nexport function syncUrlToIframe(iframeWindow: Window): void {\n  // \n  const { pathname, search, hash } = iframeWindow.location;\n  const { id, url, sync, execFlag, prefix, inject } = iframeWindow.__WUJIE;\n\n  // \n  const idUrl = sync && !execFlag ? getSyncUrl(id, prefix) : url;\n  // href\n  const syncUrl = (/^http/.test(idUrl) ? null : idUrl) || url;\n  const { appRoutePath } = appRouteParse(syncUrl);\n\n  const preAppRoutePath = pathname + search + hash;\n  if (preAppRoutePath !== appRoutePath) {\n    iframeWindow.history.replaceState(null, \"\", inject.mainHostPath + appRoutePath);\n  }\n}\n\n/**\n * \n * hash\n */\nexport function clearInactiveAppUrl(): void {\n  let winUrlElement = anchorElementGenerator(window.location.href);\n  const queryMap = getAnchorElementQueryMap(winUrlElement);\n  Object.keys(queryMap).forEach((id) => {\n    const sandbox = getWujieById(id);\n    if (!sandbox) return;\n    // \n    if (sandbox.execFlag && sandbox.sync && !sandbox.hrefFlag && !sandbox.activeFlag) {\n      delete queryMap[id];\n    }\n  });\n  const newQuery =\n    \"?\" +\n    Object.keys(queryMap)\n      .map((key) => key + \"=\" + queryMap[key])\n      .join(\"&\");\n  winUrlElement.search = newQuery;\n  if (winUrlElement.href !== window.location.href) {\n    window.history.replaceState(null, \"\", winUrlElement.href);\n  }\n  winUrlElement = null;\n}\n\n/**\n * url\n */\nexport function pushUrlToWindow(id: string, url: string): void {\n  let winUrlElement = anchorElementGenerator(window.location.href);\n  const queryMap = getAnchorElementQueryMap(winUrlElement);\n  queryMap[id] = window.encodeURIComponent(url);\n  const newQuery =\n    \"?\" +\n    Object.keys(queryMap)\n      .map((key) => key + \"=\" + queryMap[key])\n      .join(\"&\");\n  winUrlElement.search = newQuery;\n  window.history.pushState(null, \"\", winUrlElement.href);\n  winUrlElement = null;\n}\n\n/**\n * (window.location.href)\n */\nexport function processAppForHrefJump(): void {\n  window.addEventListener(\"popstate\", () => {\n    let winUrlElement = anchorElementGenerator(window.location.href);\n    const queryMap = getAnchorElementQueryMap(winUrlElement);\n    winUrlElement = null;\n    Object.keys(queryMap)\n      .map((id) => getWujieById(id))\n      .filter((sandbox) => sandbox)\n      .forEach((sandbox) => {\n        const url = queryMap[sandbox.id];\n        const iframeBody = rawDocumentQuerySelector.call(sandbox.iframe.contentDocument, \"body\");\n        // href\n        if (/http/.test(url)) {\n          if (sandbox.degrade) {\n            renderElementToContainer(sandbox.document.documentElement, iframeBody);\n            renderIframeReplaceApp(\n              window.decodeURIComponent(url),\n              getDegradeIframe(sandbox.id).parentElement,\n              sandbox.degradeAttrs\n            );\n          } else\n            renderIframeReplaceApp(\n              window.decodeURIComponent(url),\n              sandbox.shadowRoot.host.parentElement,\n              sandbox.degradeAttrs\n            );\n          sandbox.hrefFlag = true;\n          // href\n        } else if (sandbox.hrefFlag) {\n          if (sandbox.degrade) {\n            // \n            const { iframe } = initRenderIframeAndContainer(sandbox.id, sandbox.el, sandbox.degradeAttrs);\n            patchEventTimeStamp(iframe.contentWindow, sandbox.iframe.contentWindow);\n            iframe.contentWindow.onunload = () => {\n              sandbox.unmount();\n            };\n            iframe.contentDocument.appendChild(iframeBody.firstElementChild);\n            sandbox.document = iframe.contentDocument;\n          } else renderElementToContainer(sandbox.shadowRoot.host, sandbox.el);\n          sandbox.hrefFlag = false;\n        }\n      });\n  });\n}\n","import WuJie from \"./sandbox\";\nimport { ScriptObject } from \"./template\";\nimport { renderElementToContainer } from \"./shadow\";\nimport { syncUrlToWindow } from \"./sync\";\nimport {\n  fixElementCtrSrcOrHref,\n  isConstructable,\n  anchorElementGenerator,\n  isMatchSyncQueryById,\n  isFunction,\n  warn,\n  error,\n  execHooks,\n  getCurUrl,\n  getAbsolutePath,\n  setAttrsToElement,\n  setTagToScript,\n  getTagFromScript,\n} from \"./utils\";\nimport {\n  documentProxyProperties,\n  rawAddEventListener,\n  rawRemoveEventListener,\n  rawDocumentQuerySelector,\n  mainDocumentAddEventListenerEvents,\n  mainAndAppAddEventListenerEvents,\n  appDocumentAddEventListenerEvents,\n  appDocumentOnEvents,\n  appWindowAddEventListenerEvents,\n  appWindowOnEvent,\n  windowProxyProperties,\n  windowRegWhiteList,\n  rawWindowAddEventListener,\n  rawWindowRemoveEventListener,\n} from \"./common\";\nimport type { appAddEventListenerOptions } from \"./common\";\nimport { getJsLoader } from \"./plugin\";\nimport { WUJIE_TIPS_SCRIPT_ERROR_REQUESTED, WUJIE_DATA_FLAG } from \"./constant\";\nimport { ScriptObjectLoader } from \"./index\";\n\ndeclare global {\n  interface Window {\n    // \n    __POWERED_BY_WUJIE__?: boolean;\n    // \n    __WUJIE_PUBLIC_PATH__: string;\n    // querySelector\n    __WUJIE_RAW_DOCUMENT_QUERY_SELECTOR__: typeof Document.prototype.querySelector;\n\n    // iframecreateElement\n    __WUJIE_RAW_DOCUMENT_CREATE_ELEMENT__: typeof Document.prototype.createElement;\n\n    // iframecreateTextNode\n    __WUJIE_RAW_DOCUMENT_CREATE_TEXT_NODE__: typeof Document.prototype.createTextNode;\n\n    // iframehead\n    __WUJIE_RAW_DOCUMENT_HEAD__: typeof Document.prototype.head;\n\n    // querySelector\n    __WUJIE_RAW_DOCUMENT_QUERY_SELECTOR_ALL__: typeof Document.prototype.querySelectorAll;\n    // window\n    __WUJIE_RAW_WINDOW__: Window;\n    // \n    __WUJIE: WuJie;\n    // \n    __WUJIE_INJECT: WuJie[\"inject\"];\n    // \n    __WUJIE_EVENTLISTENER__: Set<{ listener: EventListenerOrEventListenerObject; type: string; options: any }>;\n    // mount\n    __WUJIE_MOUNT: () => void;\n    // unmount\n    __WUJIE_UNMOUNT: () => void | Promise<void>;\n    // document type\n    Document: typeof Document;\n    // img type\n    HTMLImageElement: typeof HTMLImageElement;\n    // node type\n    Node: typeof Node;\n    // element type\n    Element: typeof Element;\n    // htmlElement typeof\n    HTMLElement: typeof HTMLElement;\n    // anchor type\n    HTMLAnchorElement: typeof HTMLAnchorElement;\n    // source type\n    HTMLSourceElement: typeof HTMLSourceElement;\n    // link type\n    HTMLLinkElement: typeof HTMLLinkElement;\n    // script type\n    HTMLScriptElement: typeof HTMLScriptElement;\n    // media type\n    HTMLMediaElement: typeof HTMLMediaElement;\n    EventTarget: typeof EventTarget;\n    Event: typeof Event;\n    ShadowRoot: typeof ShadowRoot;\n    // \n    $wujie: { [key: string]: any };\n  }\n  interface HTMLHeadElement {\n    _cacheListeners: Map<string, EventListenerOrEventListenerObject[]>;\n  }\n  interface HTMLBodyElement {\n    _cacheListeners: Map<string, EventListenerOrEventListenerObject[]>;\n  }\n  interface Document {\n    createTreeWalker(\n      root: Node,\n      whatToShow?: number,\n      filter?: NodeFilter | null,\n      entityReferenceExpansion?: boolean\n    ): TreeWalker;\n  }\n}\n\n/**\n * windowiframe\n */\nfunction patchIframeEvents(iframeWindow: Window) {\n  iframeWindow.__WUJIE_EVENTLISTENER__ = iframeWindow.__WUJIE_EVENTLISTENER__ || new Set();\n  iframeWindow.addEventListener = function addEventListener<K extends keyof WindowEventMap>(\n    type: K,\n    listener: (this: Window, ev: WindowEventMap[K]) => any,\n    options?: boolean | appAddEventListenerOptions\n  ) {\n    // \n    execHooks(iframeWindow.__WUJIE.plugins, \"windowAddEventListenerHook\", iframeWindow, type, listener, options);\n    //  addEventListener set\n    iframeWindow.__WUJIE_EVENTLISTENER__.add({ type, listener, options });\n    if (appWindowAddEventListenerEvents.includes(type) || (typeof options === \"object\" && options.targetWindow)) {\n      const targetWindow = typeof options === \"object\" && options.targetWindow ? options?.targetWindow : iframeWindow;\n      return rawWindowAddEventListener.call(targetWindow, type, listener, options);\n    }\n    // window.windowwindow\n    rawWindowAddEventListener.call(window.__WUJIE_RAW_WINDOW__ || window, type, listener, options);\n  };\n\n  iframeWindow.removeEventListener = function removeEventListener<K extends keyof WindowEventMap>(\n    type: K,\n    listener: (this: Window, ev: WindowEventMap[K]) => any,\n    options?: boolean | appAddEventListenerOptions\n  ) {\n    // \n    execHooks(iframeWindow.__WUJIE.plugins, \"windowRemoveEventListenerHook\", iframeWindow, type, listener, options);\n    iframeWindow.__WUJIE_EVENTLISTENER__.forEach((o) => {\n      // \n      if (o.listener === listener && o.type === type && options == o.options) {\n        iframeWindow.__WUJIE_EVENTLISTENER__.delete(o);\n      }\n    });\n    if (appWindowAddEventListenerEvents.includes(type) || (typeof options === \"object\" && options.targetWindow)) {\n      const targetWindow = typeof options === \"object\" && options.targetWindow ? options?.targetWindow : iframeWindow;\n      return rawWindowRemoveEventListener.call(targetWindow, type, listener, options);\n    }\n    rawWindowRemoveEventListener.call(window.__WUJIE_RAW_WINDOW__ || window, type, listener, options);\n  };\n}\n\nfunction patchIframeVariable(iframeWindow: Window, wujie: WuJie, appHostPath: string): void {\n  iframeWindow.__WUJIE = wujie;\n  iframeWindow.__WUJIE_PUBLIC_PATH__ = appHostPath + \"/\";\n  iframeWindow.$wujie = wujie.provide;\n  iframeWindow.__WUJIE_RAW_WINDOW__ = iframeWindow;\n}\n\n/**\n * iframehistorypushStatereplaceState\n * location\n * \n * @param iframeWindow\n * @param appHostPath  host path\n * @param mainHostPath  host path\n */\nfunction patchIframeHistory(iframeWindow: Window, appHostPath: string, mainHostPath: string): void {\n  const history = iframeWindow.history;\n  const rawHistoryPushState = history.pushState;\n  const rawHistoryReplaceState = history.replaceState;\n  history.pushState = function (data: any, title: string, url?: string): void {\n    const baseUrl =\n      mainHostPath + iframeWindow.location.pathname + iframeWindow.location.search + iframeWindow.location.hash;\n    const mainUrl = getAbsolutePath(url?.replace(appHostPath, \"\"), baseUrl);\n    const ignoreFlag = url === undefined;\n\n    rawHistoryPushState.call(history, data, title, ignoreFlag ? undefined : mainUrl);\n    if (ignoreFlag) return;\n    updateBase(iframeWindow, appHostPath, mainHostPath);\n    syncUrlToWindow(iframeWindow);\n  };\n  history.replaceState = function (data: any, title: string, url?: string): void {\n    const baseUrl =\n      mainHostPath + iframeWindow.location.pathname + iframeWindow.location.search + iframeWindow.location.hash;\n    const mainUrl = getAbsolutePath(url?.replace(appHostPath, \"\"), baseUrl);\n    const ignoreFlag = url === undefined;\n\n    rawHistoryReplaceState.call(history, data, title, ignoreFlag ? undefined : mainUrl);\n    if (ignoreFlag) return;\n    updateBase(iframeWindow, appHostPath, mainHostPath);\n    syncUrlToWindow(iframeWindow);\n  };\n}\n\n/**\n * iframebase\n * @param iframeWindow\n * @param appHostPath\n * @param mainHostPath\n */\nfunction updateBase(iframeWindow: Window, appHostPath: string, mainHostPath: string) {\n  const baseUrl = new URL(iframeWindow.location.href?.replace(mainHostPath, \"\"), appHostPath);\n  const baseElement = rawDocumentQuerySelector.call(iframeWindow.document, \"base\");\n  if (baseElement) baseElement.setAttribute(\"href\", appHostPath + baseUrl.pathname);\n}\n\n/**\n * patch iframe window effect\n * @param iframeWindow\n */\n// TODO \nfunction patchWindowEffect(iframeWindow: Window): void {\n  // \n  function processWindowProperty(key: string): boolean {\n    const value = iframeWindow[key];\n    try {\n      if (typeof value === \"function\" && !isConstructable(value)) {\n        iframeWindow[key] = window[key].bind(window);\n      } else {\n        iframeWindow[key] = window[key];\n      }\n      return true;\n    } catch (e) {\n      warn(e.message);\n      return false;\n    }\n  }\n  Object.getOwnPropertyNames(iframeWindow).forEach((key) => {\n    // \n    if (key === \"getSelection\") {\n      Object.defineProperty(iframeWindow, key, {\n        get: () => iframeWindow.document[key],\n      });\n      return;\n    }\n    // \n    if (windowProxyProperties.includes(key)) {\n      processWindowProperty(key);\n      return;\n    }\n    // \n    windowRegWhiteList.some((reg) => {\n      if (reg.test(key) && key in iframeWindow.parent) {\n        return processWindowProperty(key);\n      }\n      return false;\n    });\n  });\n  // onEvent set\n  const windowOnEvents = Object.getOwnPropertyNames(window)\n    .filter((p) => /^on/.test(p))\n    .filter((e) => !appWindowOnEvent.includes(e));\n\n  // window\n  windowOnEvents.forEach((e) => {\n    const descriptor = Object.getOwnPropertyDescriptor(iframeWindow, e) || {\n      enumerable: true,\n      writable: true,\n    };\n    try {\n      Object.defineProperty(iframeWindow, e, {\n        enumerable: descriptor.enumerable,\n        configurable: true,\n        get: () => window[e],\n        set:\n          descriptor.writable || descriptor.set\n            ? (handler) => {\n                window[e] = typeof handler === \"function\" ? handler.bind(iframeWindow) : handler;\n              }\n            : undefined,\n      });\n    } catch (e) {\n      warn(e.message);\n    }\n  });\n  // \n  execHooks(iframeWindow.__WUJIE.plugins, \"windowPropertyOverride\", iframeWindow);\n}\n\n/**\n * \n */\nfunction recordEventListeners(iframeWindow: Window) {\n  const sandbox = iframeWindow.__WUJIE;\n  iframeWindow.Node.prototype.addEventListener = function (\n    type: string,\n    handler: EventListenerOrEventListenerObject,\n    options?: boolean | AddEventListenerOptions\n  ): void {\n    // \n    const elementListenerList = sandbox.elementEventCacheMap.get(this);\n    if (elementListenerList) {\n      if (!elementListenerList.find((listener) => listener.type === type && listener.handler === handler)) {\n        elementListenerList.push({ type, handler, options });\n      }\n    } else sandbox.elementEventCacheMap.set(this, [{ type, handler, options }]);\n    return rawAddEventListener.call(this, type, handler, options);\n  };\n\n  iframeWindow.Node.prototype.removeEventListener = function (\n    type: string,\n    handler: EventListenerOrEventListenerObject,\n    options?: boolean | EventListenerOptions\n  ): void {\n    // \n    const elementListenerList = sandbox.elementEventCacheMap.get(this);\n    if (elementListenerList) {\n      const index = elementListenerList?.findIndex((ele) => ele.type === type && ele.handler === handler);\n      elementListenerList.splice(index, 1);\n    }\n    if (!elementListenerList?.length) {\n      sandbox.elementEventCacheMap.delete(this);\n    }\n    return rawRemoveEventListener.call(this, type, handler, options);\n  };\n}\n\n/**\n * \n */\nexport function recoverEventListeners(rootElement: Element | ChildNode, iframeWindow: Window) {\n  const sandbox = iframeWindow.__WUJIE;\n  const elementEventCacheMap: WeakMap<\n    Node,\n    Array<{ type: string; handler: EventListenerOrEventListenerObject; options: any }>\n  > = new WeakMap();\n  const ElementIterator = document.createTreeWalker(rootElement, NodeFilter.SHOW_ELEMENT, null, false);\n  let nextElement = ElementIterator.currentNode;\n  while (nextElement) {\n    const elementListenerList = sandbox.elementEventCacheMap.get(nextElement);\n    if (elementListenerList?.length) {\n      elementEventCacheMap.set(nextElement, elementListenerList);\n      elementListenerList.forEach((listener) => {\n        nextElement.addEventListener(listener.type, listener.handler, listener.options);\n      });\n    }\n    nextElement = ElementIterator.nextNode() as HTMLElement;\n  }\n  sandbox.elementEventCacheMap = elementEventCacheMap;\n}\n\n/**\n * \n */\nexport function recoverDocumentListeners(\n  oldRootElement: Element | ChildNode,\n  newRootElement: Element | ChildNode,\n  iframeWindow: Window\n) {\n  const sandbox = iframeWindow.__WUJIE;\n  const elementEventCacheMap: WeakMap<\n    Node,\n    Array<{ type: string; handler: EventListenerOrEventListenerObject; options: any }>\n  > = new WeakMap();\n  const elementListenerList = sandbox.elementEventCacheMap.get(oldRootElement);\n  if (elementListenerList?.length) {\n    elementEventCacheMap.set(newRootElement, elementListenerList);\n    elementListenerList.forEach((listener) => {\n      newRootElement.addEventListener(listener.type, listener.handler, listener.options);\n    });\n  }\n  sandbox.elementEventCacheMap = elementEventCacheMap;\n}\n\n/**\n * vuee.timeStamp < attachedTimestamp \n */\nexport function patchEventTimeStamp(targetWindow: Window, iframeWindow: Window) {\n  Object.defineProperty(targetWindow.Event.prototype, \"timeStamp\", {\n    get: () => {\n      return iframeWindow.document.createEvent(\"Event\").timeStamp;\n    },\n  });\n}\n\n/**\n * patch document effect\n * @param iframeWindow\n */\n// TODO \nfunction patchDocumentEffect(iframeWindow: Window): void {\n  const sandbox = iframeWindow.__WUJIE;\n\n  /**\n   *  addEventListenerremoveEventListener\n   *  handler thishandler.bind(document)\n   * removeEventListenerhandler => handler.bind(document)\n   * callback = handler.bind(document) removeEventListener\n   */\n  const handlerCallbackMap: WeakMap<EventListenerOrEventListenerObject, EventListenerOrEventListenerObject> =\n    new WeakMap();\n  const handlerTypeMap: WeakMap<EventListenerOrEventListenerObject, Array<string>> = new WeakMap();\n  iframeWindow.Document.prototype.addEventListener = function (\n    type: string,\n    handler: EventListenerOrEventListenerObject,\n    options?: boolean | AddEventListenerOptions\n  ): void {\n    if (!handler) return;\n    let callback = handlerCallbackMap.get(handler);\n    const typeList = handlerTypeMap.get(handler);\n    //  handlerCallbackMap\n    if (!callback) {\n      callback = typeof handler === \"function\" ? handler.bind(this) : handler;\n      handlerCallbackMap.set(handler, callback);\n    }\n    //  handlerTypeMap\n    if (typeList) {\n      if (!typeList.includes(type)) typeList.push(type);\n    } else {\n      handlerTypeMap.set(handler, [type]);\n    }\n\n    // \n    execHooks(iframeWindow.__WUJIE.plugins, \"documentAddEventListenerHook\", iframeWindow, type, callback, options);\n    if (appDocumentAddEventListenerEvents.includes(type)) {\n      return rawAddEventListener.call(this, type, callback, options);\n    }\n    //  sandbox.document\n    if (sandbox.degrade) return sandbox.document.addEventListener(type, callback, options);\n    if (mainDocumentAddEventListenerEvents.includes(type))\n      return window.document.addEventListener(type, callback, options);\n    if (mainAndAppAddEventListenerEvents.includes(type)) {\n      window.document.addEventListener(type, callback, options);\n      sandbox.shadowRoot.addEventListener(type, callback, options);\n      return;\n    }\n    sandbox.shadowRoot.addEventListener(type, callback, options);\n  };\n  iframeWindow.Document.prototype.removeEventListener = function (\n    type: string,\n    handler: EventListenerOrEventListenerObject,\n    options?: boolean | AddEventListenerOptions\n  ): void {\n    const callback: EventListenerOrEventListenerObject = handlerCallbackMap.get(handler);\n    const typeList = handlerTypeMap.get(handler);\n    if (callback) {\n      if (typeList?.includes(type)) {\n        typeList.splice(typeList.indexOf(type), 1);\n        if (!typeList.length) {\n          handlerCallbackMap.delete(handler);\n          handlerTypeMap.delete(handler);\n        }\n      }\n\n      // \n      execHooks(iframeWindow.__WUJIE.plugins, \"documentRemoveEventListenerHook\", iframeWindow, type, callback, options);\n      if (appDocumentAddEventListenerEvents.includes(type)) {\n        return rawRemoveEventListener.call(this, type, callback, options);\n      }\n      if (sandbox.degrade) return sandbox.document.removeEventListener(type, callback, options);\n      if (mainDocumentAddEventListenerEvents.includes(type)) {\n        return window.document.removeEventListener(type, callback, options);\n      }\n      if (mainAndAppAddEventListenerEvents.includes(type)) {\n        window.document.removeEventListener(type, callback, options);\n        sandbox.shadowRoot.removeEventListener(type, callback, options);\n        return;\n      }\n      sandbox.shadowRoot.removeEventListener(type, callback, options);\n    }\n  };\n  // onEvent\n  const elementOnEvents = Object.keys(iframeWindow.HTMLElement.prototype).filter((ele) => /^on/.test(ele));\n  const documentOnEvent = Object.keys(iframeWindow.Document.prototype)\n    .filter((ele) => /^on/.test(ele))\n    .filter((ele) => !appDocumentOnEvents.includes(ele));\n  elementOnEvents\n    .filter((e) => documentOnEvent.includes(e))\n    .forEach((e) => {\n      const descriptor = Object.getOwnPropertyDescriptor(iframeWindow.Document.prototype, e) || {\n        enumerable: true,\n        writable: true,\n      };\n      try {\n        Object.defineProperty(iframeWindow.Document.prototype, e, {\n          enumerable: descriptor.enumerable,\n          configurable: true,\n          get: () => (sandbox.degrade ? sandbox.document[e] : sandbox.shadowRoot.firstElementChild[e]),\n          set:\n            descriptor.writable || descriptor.set\n              ? (handler) => {\n                  const val = typeof handler === \"function\" ? handler.bind(iframeWindow.document) : handler;\n                  sandbox.degrade ? (sandbox.document[e] = val) : (sandbox.shadowRoot.firstElementChild[e] = val);\n                }\n              : undefined,\n        });\n      } catch (e) {\n        warn(e.message);\n      }\n    });\n  // get\n  const {\n    ownerProperties,\n    modifyProperties,\n    shadowProperties,\n    shadowMethods,\n    documentProperties,\n    documentMethods,\n    documentEvents,\n  } = documentProxyProperties;\n  modifyProperties.concat(shadowProperties, shadowMethods, documentProperties, documentMethods).forEach((propKey) => {\n    const descriptor = Object.getOwnPropertyDescriptor(iframeWindow.Document.prototype, propKey) || {\n      enumerable: true,\n      writable: true,\n    };\n    try {\n      Object.defineProperty(iframeWindow.Document.prototype, propKey, {\n        enumerable: descriptor.enumerable,\n        configurable: true,\n        get: () => sandbox.proxyDocument[propKey],\n        set: undefined,\n      });\n    } catch (e) {\n      warn(e.message);\n    }\n  });\n  // document\n  // TODO \n  documentEvents.forEach((propKey) => {\n    const descriptor = Object.getOwnPropertyDescriptor(iframeWindow.Document.prototype, propKey) || {\n      enumerable: true,\n      writable: true,\n    };\n    //getsetiframeWindow.document[propKey]handleriframeWindow.document[propKey]handler\n    try {\n      Object.defineProperty(iframeWindow.Document.prototype, propKey, {\n        enumerable: descriptor.enumerable,\n        configurable: true,\n        get: () => (sandbox.degrade ? sandbox : window).document[propKey],\n        // handler\n        set:\n          descriptor.writable || descriptor.set\n            ? (handler) => {\n                // (sandbox.degrade ? sandbox : window).document[propKey] =\n                //   typeof handler === \"function\" ? handler.bind(iframeWindow.document) : handler;\n                (sandbox.degrade ? sandbox : window).document.removeEventListener(\n                  propKey,\n                  handlerCallbackMap.get(handler)\n                );\n                // \n                (sandbox.degrade ? sandbox : window).document.addEventListener(\n                  propKey,\n                  typeof handler === \"function\" ? handler.bind(iframeWindow.document) : handler\n                );\n                // \n                handlerCallbackMap.set(handler, handler.bind(iframeWindow.document));\n              }\n            : undefined,\n      });\n    } catch (e) {\n      warn(e.message);\n    }\n  });\n  // process owner property\n  ownerProperties.forEach((propKey) => {\n    Object.defineProperty(iframeWindow.document, propKey, {\n      enumerable: true,\n      configurable: true,\n      get: () => sandbox.proxyDocument[propKey],\n      set: undefined,\n    });\n  });\n  // \n  execHooks(iframeWindow.__WUJIE.plugins, \"documentPropertyOverride\", iframeWindow);\n}\n\n/**\n * patch Node effect\n * 1 getRootNode\n * 2 appendChildinsertBefore svg createElement  patch  patch\n * @param iframeWindow\n */\nfunction patchNodeEffect(iframeWindow: Window): void {\n  const rawGetRootNode = iframeWindow.Node.prototype.getRootNode;\n  const rawAppendChild = iframeWindow.Node.prototype.appendChild;\n  const rawInsertRule = iframeWindow.Node.prototype.insertBefore;\n  const rawRemoveChild = iframeWindow.Node.prototype.removeChild;\n  iframeWindow.Node.prototype.getRootNode = function (options?: GetRootNodeOptions): Node {\n    const rootNode = rawGetRootNode.call(this, options);\n    if (rootNode === iframeWindow.__WUJIE.shadowRoot) return iframeWindow.document;\n    else return rootNode;\n  };\n  iframeWindow.Node.prototype.appendChild = function <T extends Node>(node: T): T {\n    const res = rawAppendChild.call(this, node);\n    patchElementEffect(node, iframeWindow);\n    return res;\n  };\n  iframeWindow.Node.prototype.insertBefore = function <T extends Node>(node: T, child: Node | null): T {\n    const res = rawInsertRule.call(this, node, child);\n    patchElementEffect(node, iframeWindow);\n    return res;\n  };\n  iframeWindow.Node.prototype.removeChild = function <T extends Node>(node: T): T {\n    let res;\n    try {\n      res = rawRemoveChild.call(this, node);\n    } catch (e) {\n      console.warn(\n        `Failed to removeChild: ${node.nodeName.toLowerCase()} is not a child of ${this.nodeName.toLowerCase()}, try again with parentNode attribute. `\n      );\n      if (node.isConnected && isFunction(node.parentNode?.removeChild)) {\n        node.parentNode.removeChild(node);\n      }\n    }\n    patchElementEffect(node, iframeWindow);\n    return res;\n  };\n}\n\n/**\n * \n * @param iframeWindow\n */\nfunction patchRelativeUrlEffect(iframeWindow: Window): void {\n  fixElementCtrSrcOrHref(iframeWindow, iframeWindow.HTMLImageElement, \"src\");\n  fixElementCtrSrcOrHref(iframeWindow, iframeWindow.HTMLAnchorElement, \"href\");\n  fixElementCtrSrcOrHref(iframeWindow, iframeWindow.HTMLSourceElement, \"src\");\n  fixElementCtrSrcOrHref(iframeWindow, iframeWindow.HTMLLinkElement, \"href\");\n  fixElementCtrSrcOrHref(iframeWindow, iframeWindow.HTMLScriptElement, \"src\");\n  fixElementCtrSrcOrHref(iframeWindow, iframeWindow.HTMLMediaElement, \"src\");\n}\n\n/**\n * base\n */\nexport function initBase(iframeWindow: Window, url: string): void {\n  const iframeDocument = iframeWindow.document;\n  const baseElement = iframeDocument.createElement(\"base\");\n  const iframeUrlElement = anchorElementGenerator(iframeWindow.location.href);\n  const appUrlElement = anchorElementGenerator(url);\n  baseElement.setAttribute(\"href\", appUrlElement.protocol + \"//\" + appUrlElement.host + iframeUrlElement.pathname);\n  iframeDocument.head.appendChild(baseElement);\n}\n\n/**\n * iframedom\n * @param iframeWindow\n * @param wujie\n * @param mainHostPath\n * @param appHostPath\n */\nfunction initIframeDom(iframeWindow: Window, wujie: WuJie, mainHostPath: string, appHostPath: string): void {\n  const iframeDocument = iframeWindow.document;\n  const newDoc = window.document.implementation.createHTMLDocument(\"\");\n  const newDocumentElement = iframeDocument.importNode(newDoc.documentElement, true);\n  iframeDocument.documentElement\n    ? iframeDocument.replaceChild(newDocumentElement, iframeDocument.documentElement)\n    : iframeDocument.appendChild(newDocumentElement);\n  iframeWindow.__WUJIE_RAW_DOCUMENT_HEAD__ = iframeDocument.head;\n  iframeWindow.__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR__ = iframeWindow.Document.prototype.querySelector;\n  iframeWindow.__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR_ALL__ = iframeWindow.Document.prototype.querySelectorAll;\n  iframeWindow.__WUJIE_RAW_DOCUMENT_CREATE_ELEMENT__ = iframeWindow.Document.prototype.createElement;\n  iframeWindow.__WUJIE_RAW_DOCUMENT_CREATE_TEXT_NODE__ = iframeWindow.Document.prototype.createTextNode;\n  initBase(iframeWindow, wujie.url);\n  patchIframeHistory(iframeWindow, appHostPath, mainHostPath);\n  patchIframeEvents(iframeWindow);\n  if (wujie.degrade) recordEventListeners(iframeWindow);\n  syncIframeUrlToWindow(iframeWindow);\n\n  patchWindowEffect(iframeWindow);\n  patchDocumentEffect(iframeWindow);\n  patchNodeEffect(iframeWindow);\n  patchRelativeUrlEffect(iframeWindow);\n}\n\n/**\n * js\n */\n// TODO \nfunction stopIframeLoading(iframe: HTMLIFrameElement, useObjectURL: { mainHostPath: string } | false) {\n  const iframeWindow = iframe.contentWindow;\n  const oldDoc = iframeWindow.document;\n  const loopDeadline = Date.now() + 5e3;\n  return new Promise<void>((resolve) => {\n    function loop() {\n      setTimeout(() => {\n        let newDoc: Document;\n        try {\n          newDoc = iframeWindow.document;\n        } catch (err) {\n          newDoc = null;\n        }\n        // wait for document ready\n        if ((!newDoc || newDoc == oldDoc) && Date.now() < loopDeadline) {\n          loop();\n          return;\n        }\n\n        // document ready, if is using ObjectURL, remove its \"blob:\" prefix\n        if (useObjectURL) {\n          const href = iframeWindow.location.href;\n          newDoc.open();\n          newDoc.close();\n\n          const deadline = Date.now() + 1e3;\n          const loop2 = function () {\n            if (Date.now() > deadline) {\n              //  URL \n              // \n              disableSandboxEmptyPageURL();\n              iframe.src = useObjectURL.mainHostPath;\n              stopIframeLoading(iframe, false).then(resolve);\n              return;\n            }\n\n            if (iframeWindow.location.href === href) setTimeout(loop2, 1);\n            else resolve();\n          };\n          loop2();\n\n          return;\n        }\n\n        // document ready\n        iframeWindow.stop ? iframeWindow.stop() : newDoc.execCommand(\"Stop\");\n        resolve();\n      }, 1);\n    }\n    loop();\n  });\n}\n\nexport function patchElementEffect(\n  element: (HTMLElement | Node | ShadowRoot) & { _hasPatch?: boolean },\n  iframeWindow: Window\n): void {\n  const proxyLocation = iframeWindow.__WUJIE.proxyLocation as Location;\n  if (element._hasPatch) return;\n  try {\n    Object.defineProperties(element, {\n      baseURI: {\n        configurable: true,\n        get: () => proxyLocation.protocol + \"//\" + proxyLocation.host + proxyLocation.pathname,\n        set: undefined,\n      },\n      ownerDocument: {\n        configurable: true,\n        get: () => iframeWindow.document,\n      },\n      _hasPatch: { get: () => true },\n    });\n  } catch (error) {\n    console.warn(error);\n  }\n  execHooks(iframeWindow.__WUJIE.plugins, \"patchElementHook\", element, iframeWindow);\n}\n\n/**\n * \n * @param iframeWindow\n */\nexport function syncIframeUrlToWindow(iframeWindow: Window): void {\n  iframeWindow.addEventListener(\"hashchange\", () => syncUrlToWindow(iframeWindow));\n  iframeWindow.addEventListener(\"popstate\", () => {\n    syncUrlToWindow(iframeWindow);\n  });\n}\n\n/**\n * iframe\n * @param scriptResult script\n * @param iframeWindow\n * @param rawElement \n */\nexport function insertScriptToIframe(\n  scriptResult: ScriptObject | ScriptObjectLoader,\n  iframeWindow: Window,\n  rawElement?: HTMLScriptElement\n) {\n  const { src, module, content, crossorigin, crossoriginType, async, attrs, callback, onload } =\n    scriptResult as ScriptObjectLoader;\n  const scriptElement = iframeWindow.document.createElement(\"script\");\n  const nextScriptElement = iframeWindow.document.createElement(\"script\");\n  const { replace, plugins, proxyLocation } = iframeWindow.__WUJIE;\n  const jsLoader = getJsLoader({ plugins, replace });\n  let code = jsLoader(content, src, getCurUrl(proxyLocation));\n  // \n  attrs &&\n    Object.keys(attrs)\n      .filter((key) => !Object.keys(scriptResult).includes(key))\n      .forEach((key) => scriptElement.setAttribute(key, String(attrs[key])));\n\n  // \n  if (content) {\n    // patch location\n    if (!iframeWindow.__WUJIE.degrade && !module && attrs?.type !== \"importmap\") {\n      code = `(function(window, self, global, location) {\n      ${code}\n}).bind(window.__WUJIE.proxy)(\n  window.__WUJIE.proxy,\n  window.__WUJIE.proxy,\n  window.__WUJIE.proxy,\n  window.__WUJIE.proxyLocation,\n);`;\n    }\n    const descriptor = Object.getOwnPropertyDescriptor(scriptElement, \"src\");\n    //  src  descriptor\n    if (descriptor?.configurable || !descriptor) {\n      //  webpack publicPath  auto \n      try {\n        Object.defineProperty(scriptElement, \"src\", { get: () => src || \"\" });\n      } catch (error) {\n        console.warn(error);\n      }\n    }\n  } else {\n    src && scriptElement.setAttribute(\"src\", src);\n    crossorigin && scriptElement.setAttribute(\"crossorigin\", crossoriginType);\n  }\n  module && scriptElement.setAttribute(\"type\", \"module\");\n  scriptElement.textContent = code || \"\";\n  nextScriptElement.textContent =\n    \"if(window.__WUJIE.execQueue && window.__WUJIE.execQueue.length){ window.__WUJIE.execQueue.shift()()}\";\n\n  const container = rawDocumentQuerySelector.call(iframeWindow.document, \"head\");\n  const execNextScript = () => !async && container.appendChild(nextScriptElement);\n  const afterExecScript = () => {\n    onload?.();\n    execNextScript();\n  };\n\n  // \n  if (/^<!DOCTYPE html/i.test(code)) {\n    error(WUJIE_TIPS_SCRIPT_ERROR_REQUESTED, scriptResult);\n    return execNextScript();\n  }\n\n  // \n  if (rawElement) {\n    setTagToScript(scriptElement, getTagFromScript(rawElement));\n  }\n  // \n  const isOutlineScript = !content && src;\n  if (isOutlineScript) {\n    scriptElement.onload = afterExecScript;\n    scriptElement.onerror = afterExecScript;\n  }\n  container.appendChild(scriptElement);\n\n  // \n  callback?.(iframeWindow);\n  //  hooks\n  execHooks(plugins, \"appendOrInsertElementHook\", scriptElement, iframeWindow, rawElement);\n  // \n  !isOutlineScript && afterExecScript();\n}\n\n/**\n * iframe\n * @param src \n * @param element\n * @param degradeAttrs\n */\nexport function renderIframeReplaceApp(\n  src: string,\n  element: HTMLElement,\n  degradeAttrs: { [key: string]: any } = {}\n): void {\n  const iframe = window.document.createElement(\"iframe\");\n  const defaultStyle = \"height:100%;width:100%\";\n  setAttrsToElement(iframe, { ...degradeAttrs, src, style: [defaultStyle, degradeAttrs.style].join(\";\") });\n  renderElementToContainer(iframe, element);\n}\n\nconst [getSandboxEmptyPageURL, disableSandboxEmptyPageURL] = (() => {\n  const disabledMarkKey = \"wujie:disableSandboxEmptyPageURL\";\n  let disabled = false;\n  try {\n    disabled = localStorage.getItem(disabledMarkKey) === \"true\";\n  } catch (e) {\n    // pass\n  }\n\n  if (disabled || typeof URL === \"undefined\" || typeof URL.createObjectURL !== \"function\")\n    return [() => \"\", () => void 0] as const;\n\n  let prevURL = \"\";\n  const getSandboxEmptyPageURL = () => {\n    if (disabled) return \"\";\n    if (prevURL) return prevURL;\n\n    const blob = new Blob([\"<!DOCTYPE html><html><head></head><body></body></html>\"], { type: \"text/html\" });\n    prevURL = URL.createObjectURL(blob);\n    return prevURL;\n  };\n\n  const disableSandboxEmptyPageURL = () => {\n    disabled = true;\n    try {\n      // TODO: \n      localStorage.setItem(disabledMarkKey, \"true\");\n    } catch (e) {}\n  };\n\n  return [getSandboxEmptyPageURL, disableSandboxEmptyPageURL];\n})();\n\n/**\n * js\n * iframe\n * iframehtml\n */\nexport function iframeGenerator(\n  sandbox: WuJie,\n  attrs: { [key: string]: any },\n  mainHostPath: string,\n  appHostPath: string,\n  appRoutePath: string\n): HTMLIFrameElement {\n  let src = attrs && attrs.src;\n  let useObjectURL = false;\n  if (!src) {\n    src = getSandboxEmptyPageURL();\n    useObjectURL = !!src;\n    if (!src) src = mainHostPath; // fallback to mainHostPath\n  }\n\n  const iframe = window.document.createElement(\"iframe\");\n  const attrsMerge = {\n    style: \"display: none\",\n    ...attrs,\n    src,\n    name: sandbox.id,\n    [WUJIE_DATA_FLAG]: \"\",\n  };\n  setAttrsToElement(iframe, attrsMerge);\n  window.document.body.appendChild(iframe);\n\n  const iframeWindow = iframe.contentWindow;\n  // \n  patchIframeVariable(iframeWindow, sandbox, appHostPath);\n  sandbox.iframeReady = stopIframeLoading(iframe, useObjectURL && { mainHostPath }).then(() => {\n    if (!iframeWindow.__WUJIE) {\n      patchIframeVariable(iframeWindow, sandbox, appHostPath);\n    }\n    initIframeDom(iframeWindow, sandbox, mainHostPath, appHostPath);\n    /**\n     * url\n     */\n    if (!isMatchSyncQueryById(iframeWindow.__WUJIE.id)) {\n      iframeWindow.history.replaceState(null, \"\", mainHostPath + appRoutePath);\n    }\n  });\n  return iframe;\n}\n","import { patchElementEffect, renderIframeReplaceApp } from \"./iframe\";\nimport { renderElementToContainer } from \"./shadow\";\nimport { pushUrlToWindow } from \"./sync\";\nimport { documentProxyProperties, rawDocumentQuerySelector } from \"./common\";\nimport { WUJIE_TIPS_RELOAD_DISABLED, WUJIE_TIPS_GET_ELEMENT_BY_ID } from \"./constant\";\nimport {\n  getTargetValue,\n  anchorElementGenerator,\n  getDegradeIframe,\n  isCallable,\n  checkProxyFunction,\n  warn,\n  stopMainAppRun,\n} from \"./utils\";\n\n/**\n * location href set\n */\nfunction locationHrefSet(iframe: HTMLIFrameElement, value: string, appHostPath: string): boolean {\n  const { shadowRoot, id, degrade, document, degradeAttrs } = iframe.contentWindow.__WUJIE;\n  let url = value;\n  if (!/^http/.test(url)) {\n    let hrefElement = anchorElementGenerator(url);\n    url = appHostPath + hrefElement.pathname + hrefElement.search + hrefElement.hash;\n    hrefElement = null;\n  }\n  iframe.contentWindow.__WUJIE.hrefFlag = true;\n  if (degrade) {\n    const iframeBody = rawDocumentQuerySelector.call(iframe.contentDocument, \"body\");\n    renderElementToContainer(document.documentElement, iframeBody);\n    renderIframeReplaceApp(window.decodeURIComponent(url), getDegradeIframe(id).parentElement, degradeAttrs);\n  } else renderIframeReplaceApp(url, shadowRoot.host.parentElement, degradeAttrs);\n  pushUrlToWindow(id, url);\n  return true;\n}\n\n/**\n * windowdocumentlocation\n */\nexport function proxyGenerator(\n  iframe: HTMLIFrameElement,\n  urlElement: HTMLAnchorElement,\n  mainHostPath: string,\n  appHostPath: string\n): {\n  proxyWindow: Window;\n  proxyDocument: Object;\n  proxyLocation: Object;\n} {\n  const proxyWindow = new Proxy(iframe.contentWindow, {\n    get: (target: Window, p: PropertyKey): any => {\n      // location\n      if (p === \"location\") {\n        return target.__WUJIE.proxyLocation;\n      }\n      // \n      if (p === \"self\" || (p === \"window\" && Object.getOwnPropertyDescriptor(window, \"window\").get)) {\n        return target.__WUJIE.proxy;\n      }\n      // this\n      if (p === \"__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR__\" || p === \"__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR_ALL__\") {\n        return target[p];\n      }\n      // https://262.ecma-international.org/8.0/#sec-proxy-object-internal-methods-and-internal-slots-get-p-receiver\n      const descriptor = Object.getOwnPropertyDescriptor(target, p);\n      if (descriptor?.configurable === false && descriptor?.writable === false) {\n        return target[p];\n      }\n      // this\n      return getTargetValue(target, p);\n    },\n\n    set: (target: Window, p: PropertyKey, value: any) => {\n      checkProxyFunction(target, value);\n      target[p] = value;\n      return true;\n    },\n\n    has: (target: Window, p: PropertyKey) => p in target,\n  });\n\n  // proxy document\n  const proxyDocument = new Proxy(\n    {},\n    {\n      get: function (_fakeDocument, propKey) {\n        const document = window.document;\n        const { shadowRoot, proxyLocation } = iframe.contentWindow.__WUJIE;\n        // iframewebcomponent\n        if (!shadowRoot) stopMainAppRun();\n        const rawCreateElement = iframe.contentWindow.__WUJIE_RAW_DOCUMENT_CREATE_ELEMENT__;\n        const rawCreateTextNode = iframe.contentWindow.__WUJIE_RAW_DOCUMENT_CREATE_TEXT_NODE__;\n        // need fix\n        if (propKey === \"createElement\" || propKey === \"createTextNode\") {\n          return new Proxy(document[propKey], {\n            apply(_createElement, _ctx, args) {\n              const rawCreateMethod = propKey === \"createElement\" ? rawCreateElement : rawCreateTextNode;\n              const element = rawCreateMethod.apply(iframe.contentDocument, args);\n              patchElementEffect(element, iframe.contentWindow);\n              return element;\n            },\n          });\n        }\n        if (propKey === \"documentURI\" || propKey === \"URL\") {\n          return (proxyLocation as Location).href;\n        }\n\n        // from shadowRoot\n        if (\n          propKey === \"getElementsByTagName\" ||\n          propKey === \"getElementsByClassName\" ||\n          propKey === \"getElementsByName\"\n        ) {\n          return new Proxy(shadowRoot.querySelectorAll, {\n            apply(querySelectorAll, _ctx, args) {\n              let arg = args[0];\n              if (_ctx !== iframe.contentDocument) {\n                return _ctx[propKey].apply(_ctx, args);\n              }\n\n              if (propKey === \"getElementsByTagName\" && arg === \"script\") {\n                return iframe.contentDocument.scripts;\n              }\n              if (propKey === \"getElementsByClassName\") arg = \".\" + arg;\n              if (propKey === \"getElementsByName\") arg = `[name=\"${arg}\"]`;\n\n              // FIXME: This string must be a valid CSS selector string; if it's not, a SyntaxError exception is thrown;\n              // so we should ensure that the program can execute normally in case of exceptions.\n              // reference: https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelectorAll\n\n              let res: NodeList[] | [];\n              try {\n                res = querySelectorAll.call(shadowRoot, arg);\n              } catch (error) {\n                res = [];\n              }\n\n              return res;\n            },\n          });\n        }\n        if (propKey === \"getElementById\") {\n          return new Proxy(shadowRoot.querySelector, {\n            // case document.querySelector.call\n            apply(target, ctx, args) {\n              if (ctx !== iframe.contentDocument) {\n                return ctx[propKey]?.apply(ctx, args);\n              }\n              try {\n                return (\n                  target.call(shadowRoot, `[id=\"${args[0]}\"]`) ||\n                  iframe.contentWindow.__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR__.call(\n                    iframe.contentWindow.document,\n                    `#${args[0]}`\n                  )\n                );\n              } catch (error) {\n                warn(WUJIE_TIPS_GET_ELEMENT_BY_ID);\n                return null;\n              }\n            },\n          });\n        }\n        if (propKey === \"querySelector\" || propKey === \"querySelectorAll\") {\n          const rawPropMap = {\n            querySelector: \"__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR__\",\n            querySelectorAll: \"__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR_ALL__\",\n          };\n          return new Proxy(shadowRoot[propKey], {\n            apply(target, ctx, args) {\n              if (ctx !== iframe.contentDocument) {\n                return ctx[propKey]?.apply(ctx, args);\n              }\n              // shadowDomarraybaserouter\n              return (\n                target.apply(shadowRoot, args) ||\n                (args[0] === \"base\"\n                  ? null\n                  : iframe.contentWindow[rawPropMap[propKey]].call(iframe.contentWindow.document, args[0]))\n              );\n            },\n          });\n        }\n        if (propKey === \"documentElement\" || propKey === \"scrollingElement\") return shadowRoot.firstElementChild;\n        if (propKey === \"forms\") return shadowRoot.querySelectorAll(\"form\");\n        if (propKey === \"images\") return shadowRoot.querySelectorAll(\"img\");\n        if (propKey === \"links\") return shadowRoot.querySelectorAll(\"a\");\n        const { ownerProperties, shadowProperties, shadowMethods, documentProperties, documentMethods } =\n          documentProxyProperties;\n        if (ownerProperties.concat(shadowProperties).includes(propKey.toString())) {\n          if (propKey === \"activeElement\" && shadowRoot.activeElement === null) return shadowRoot.body;\n          return shadowRoot[propKey];\n        }\n        if (shadowMethods.includes(propKey.toString())) {\n          return getTargetValue(shadowRoot, propKey) ?? getTargetValue(document, propKey);\n        }\n        // from window.document\n        if (documentProperties.includes(propKey.toString())) {\n          return document[propKey];\n        }\n        if (documentMethods.includes(propKey.toString())) {\n          return getTargetValue(document, propKey);\n        }\n      },\n    }\n  );\n\n  // proxy location\n  const proxyLocation = new Proxy(\n    {},\n    {\n      get: function (_fakeLocation, propKey) {\n        const location = iframe.contentWindow.location;\n        if (\n          propKey === \"host\" ||\n          propKey === \"hostname\" ||\n          propKey === \"protocol\" ||\n          propKey === \"port\" ||\n          propKey === \"origin\"\n        ) {\n          return urlElement[propKey];\n        }\n        if (propKey === \"href\") {\n          return location[propKey].replace(mainHostPath, appHostPath);\n        }\n        if (propKey === \"reload\") {\n          warn(WUJIE_TIPS_RELOAD_DISABLED);\n          return () => null;\n        }\n        if (propKey === \"replace\") {\n          return new Proxy(location[propKey], {\n            apply(replace, _ctx, args) {\n              return replace.call(location, args[0]?.replace(appHostPath, mainHostPath));\n            },\n          });\n        }\n        return getTargetValue(location, propKey);\n      },\n      set: function (_fakeLocation, propKey, value) {\n        // iframe\n        if (propKey === \"href\") {\n          return locationHrefSet(iframe, value, appHostPath);\n        }\n        iframe.contentWindow.location[propKey] = value;\n        return true;\n      },\n      ownKeys: function () {\n        return Object.keys(iframe.contentWindow.location).filter((key) => key !== \"reload\");\n      },\n      getOwnPropertyDescriptor: function (_target, key) {\n        return { enumerable: true, configurable: true, value: this[key] };\n      },\n    }\n  );\n  return { proxyWindow, proxyDocument, proxyLocation };\n}\n\n/**\n * documentlocation\n */\nexport function localGenerator(\n  iframe: HTMLIFrameElement,\n  urlElement: HTMLAnchorElement,\n  mainHostPath: string,\n  appHostPath: string\n): {\n  proxyDocument: Object;\n  proxyLocation: Object;\n} {\n  //  document\n  const proxyDocument = {};\n  const sandbox = iframe.contentWindow.__WUJIE;\n  // \n  Object.defineProperties(proxyDocument, {\n    createElement: {\n      get: () => {\n        return function (...args) {\n          const element = iframe.contentWindow.__WUJIE_RAW_DOCUMENT_CREATE_ELEMENT__.apply(\n            iframe.contentDocument,\n            args\n          );\n          patchElementEffect(element, iframe.contentWindow);\n          return element;\n        };\n      },\n    },\n    createTextNode: {\n      get: () => {\n        return function (...args) {\n          const element = iframe.contentWindow.__WUJIE_RAW_DOCUMENT_CREATE_TEXT_NODE__.apply(\n            iframe.contentDocument,\n            args\n          );\n          patchElementEffect(element, iframe.contentWindow);\n          return element;\n        };\n      },\n    },\n    documentURI: {\n      get: () => (sandbox.proxyLocation as Location).href,\n    },\n    URL: {\n      get: () => (sandbox.proxyLocation as Location).href,\n    },\n    getElementsByTagName: {\n      get() {\n        return function (...args) {\n          const tagName = args[0];\n          if (tagName === \"script\") {\n            return iframe.contentDocument.scripts as any;\n          }\n          return sandbox.document.getElementsByTagName(tagName) as any;\n        };\n      },\n    },\n    getElementById: {\n      get() {\n        return function (...args) {\n          const id = args[0];\n          return (\n            (sandbox.document.getElementById(id) as any) ||\n            iframe.contentWindow.__WUJIE_RAW_DOCUMENT_HEAD__.querySelector(`#${id}`)\n          );\n        };\n      },\n    },\n  });\n  // \n  const {\n    modifyLocalProperties,\n    modifyProperties,\n    ownerProperties,\n    shadowProperties,\n    shadowMethods,\n    documentProperties,\n    documentMethods,\n  } = documentProxyProperties;\n  modifyProperties\n    .filter((key) => !modifyLocalProperties.includes(key))\n    .concat(ownerProperties, shadowProperties, shadowMethods, documentProperties, documentMethods)\n    .forEach((key) => {\n      Object.defineProperty(proxyDocument, key, {\n        get: () => {\n          const value = sandbox.document?.[key];\n          return isCallable(value) ? value.bind(sandbox.document) : value;\n        },\n      });\n    });\n\n  //  location\n  const proxyLocation = {};\n  const location = iframe.contentWindow.location;\n  const locationKeys = Object.keys(location);\n  const constantKey = [\"host\", \"hostname\", \"port\", \"protocol\", \"port\"];\n  constantKey.forEach((key) => {\n    proxyLocation[key] = urlElement[key];\n  });\n  Object.defineProperties(proxyLocation, {\n    href: {\n      get: () => location.href.replace(mainHostPath, appHostPath),\n      set: (value) => {\n        locationHrefSet(iframe, value, appHostPath);\n      },\n    },\n    reload: {\n      get() {\n        warn(WUJIE_TIPS_RELOAD_DISABLED);\n        return () => null;\n      },\n    },\n  });\n  locationKeys\n    .filter((key) => !constantKey.concat([\"href\", \"reload\"]).includes(key))\n    .forEach((key) => {\n      Object.defineProperty(proxyLocation, key, {\n        get: () => (isCallable(location[key]) ? location[key].bind(location) : location[key]),\n      });\n    });\n  return { proxyDocument, proxyLocation };\n}\n","import { warn, error } from \"./utils\";\nimport { WUJIE_ALL_EVENT, WUJIE_TIPS_NO_SUBJECT } from \"./constant\";\n\nexport type EventObj = { [event: string]: Array<Function> };\n\n// map\n// WuJie__WUJIE_INJECT\nexport const appEventObjMap = (() => {\n  if (window.__WUJIE_INJECT?.appEventObjMap) return window.__WUJIE_INJECT.appEventObjMap;\n  else {\n    const cacheMap = window.__POWERED_BY_WUJIE__ ? window.__WUJIE.inject.appEventObjMap : new Map<String, EventObj>();\n    window.__WUJIE_INJECT = { ...window.__WUJIE_INJECT, appEventObjMap: cacheMap };\n    return cacheMap;\n  }\n})();\n\n// eventBus \nexport class EventBus {\n  private id: string;\n  private eventObj: EventObj;\n\n  constructor(id: string) {\n    this.id = id;\n    this.$clear();\n    if (!appEventObjMap.get(this.id)) {\n      appEventObjMap.set(this.id, {});\n    }\n    this.eventObj = appEventObjMap.get(this.id);\n  }\n\n  // \n  public $on(event: string, fn: Function): EventBus {\n    const cbs = this.eventObj[event];\n    if (!cbs) {\n      this.eventObj[event] = [fn];\n      return this;\n    }\n    if (!cbs.includes(fn)) cbs.push(fn);\n    return this;\n  }\n\n  /** $emit$emit */\n  public $onAll(fn: (event: string, ...args: Array<any>) => any): EventBus {\n    return this.$on(WUJIE_ALL_EVENT, fn);\n  }\n\n  // \n  public $once(event: string, fn: Function): void {\n    const on = function (...args: Array<any>) {\n      this.$off(event, on);\n      fn(...args);\n    }.bind(this);\n    this.$on(event, on);\n  }\n\n  // \n  public $off(event: string, fn: Function): EventBus {\n    const cbs = this.eventObj[event];\n    if (!event || !cbs || !cbs.length) {\n      warn(`${event} ${WUJIE_TIPS_NO_SUBJECT}`);\n      return this;\n    }\n\n    let cb;\n    let i = cbs.length;\n    while (i--) {\n      cb = cbs[i];\n      if (cb === fn) {\n        cbs.splice(i, 1);\n        break;\n      }\n    }\n    return this;\n  }\n\n  // $onAll\n  public $offAll(fn: Function): EventBus {\n    return this.$off(WUJIE_ALL_EVENT, fn);\n  }\n\n  // \n  public $emit(event: string, ...args: Array<any>): EventBus {\n    let cbs = [];\n    let allCbs = [];\n\n    appEventObjMap.forEach((eventObj) => {\n      if (eventObj[event]) cbs = cbs.concat(eventObj[event]);\n      if (eventObj[WUJIE_ALL_EVENT]) allCbs = allCbs.concat(eventObj[WUJIE_ALL_EVENT]);\n    });\n\n    if (!event || (cbs.length === 0 && allCbs.length === 0)) {\n      warn(`${event} ${WUJIE_TIPS_NO_SUBJECT}`);\n    } else {\n      try {\n        for (let i = 0, l = cbs.length; i < l; i++) cbs[i](...args);\n        for (let i = 0, l = allCbs.length; i < l; i++) allCbs[i](event, ...args);\n      } catch (e) {\n        error(e);\n      }\n    }\n    return this;\n  }\n\n  // \n  public $clear(): EventBus {\n    const eventObj = appEventObjMap.get(this.id) ?? {};\n    const events = Object.keys(eventObj);\n    events.forEach((event) => delete eventObj[event]);\n    return this;\n  }\n}\n","import {\n  iframeGenerator,\n  recoverEventListeners,\n  recoverDocumentListeners,\n  insertScriptToIframe,\n  patchEventTimeStamp,\n} from \"./iframe\";\nimport { syncUrlToWindow, syncUrlToIframe, clearInactiveAppUrl } from \"./sync\";\nimport {\n  createWujieWebComponent,\n  clearChild,\n  getPatchStyleElements,\n  renderElementToContainer,\n  renderTemplateToShadowRoot,\n  renderTemplateToIframe,\n  initRenderIframeAndContainer,\n  removeLoading,\n} from \"./shadow\";\nimport { proxyGenerator, localGenerator } from \"./proxy\";\nimport { ScriptResultList } from \"./entry\";\nimport { getPlugins, getPresetLoaders } from \"./plugin\";\nimport { removeEventListener } from \"./effect\";\nimport {\n  SandboxCache,\n  idToSandboxCacheMap,\n  addSandboxCacheWithWujie,\n  deleteWujieById,\n  rawElementAppendChild,\n  rawDocumentQuerySelector,\n} from \"./common\";\nimport { EventBus, appEventObjMap, EventObj } from \"./event\";\nimport { isFunction, wujieSupport, appRouteParse, requestIdleCallback, getAbsolutePath, eventTrigger } from \"./utils\";\nimport { WUJIE_DATA_ATTACH_CSS_FLAG } from \"./constant\";\nimport { plugin, ScriptObjectLoader, loadErrorHandler } from \"./index\";\n\nexport type lifecycle = (appWindow: Window) => any;\ntype lifecycles = {\n  beforeLoad: lifecycle;\n  beforeMount: lifecycle;\n  afterMount: lifecycle;\n  beforeUnmount: lifecycle;\n  afterUnmount: lifecycle;\n  activated: lifecycle;\n  deactivated: lifecycle;\n  loadError: loadErrorHandler;\n};\n/**\n *  Proxyiframe \n */\nexport default class Wujie {\n  public id: string;\n  /**  */\n  public url: string;\n  /**  */\n  public alive: boolean;\n  /** window */\n  public proxy: WindowProxy;\n  /** document */\n  public proxyDocument: Object;\n  /** location */\n  public proxyLocation: Object;\n  /**  */\n  public bus: EventBus;\n  /**  */\n  public el: HTMLElement;\n  /** js */\n  public iframe: HTMLIFrameElement;\n  /** css */\n  public shadowRoot: ShadowRoot;\n  /** template */\n  public template: string;\n  /**  */\n  public replace: (code: string) => string;\n  /** fetch */\n  public fetch: (input: RequestInfo, init?: RequestInit) => Promise<Response>;\n  /**  */\n  public lifecycles: lifecycles;\n  /**  */\n  public plugins: Array<plugin>;\n  /** jsready */\n  public iframeReady: Promise<void>;\n  /**  */\n  public preload: Promise<void>;\n  /** iframe */\n  public degradeAttrs: { [key: string]: any };\n  /** js */\n  public execQueue: Array<Function>;\n  /**  */\n  public execFlag: boolean;\n  /**  */\n  public activeFlag: boolean;\n  /** mount */\n  public mountFlag: boolean;\n  /**  */\n  public sync: boolean;\n  /**  */\n  public prefix: { [key: string]: string };\n  /**  */\n  public hrefFlag: boolean;\n  /** fiber */\n  public fiber: boolean;\n  /**  */\n  public degrade: boolean;\n  /** document */\n  public document: Document;\n  /** styleSheet */\n  public styleSheetElements: Array<HTMLLinkElement | HTMLStyleElement>;\n  /** head */\n  public head: HTMLHeadElement;\n  /** body */\n  public body: HTMLBodyElement;\n  /** dom */\n  public elementEventCacheMap: WeakMap<\n    Node,\n    Array<{ type: string; handler: EventListenerOrEventListenerObject; options: any }>\n  > = new WeakMap();\n\n  /** $wujie */\n  public provide: {\n    bus: EventBus;\n    shadowRoot?: ShadowRoot;\n    props?: { [key: string]: any };\n    location?: Object;\n  };\n\n  /**  */\n  public inject: {\n    idToSandboxMap: Map<String, SandboxCache>;\n    appEventObjMap: Map<String, EventObj>;\n    mainHostPath: string;\n  };\n\n  /** \n   * 1\n   * 2iframefetch\n   * 3shadow\n   * 4\n   */\n  public async active(options: {\n    url: string;\n    sync?: boolean;\n    prefix?: { [key: string]: string };\n    template?: string;\n    el?: string | HTMLElement;\n    props?: { [key: string]: any };\n    alive?: boolean;\n    fetch?: (input: RequestInfo, init?: RequestInit) => Promise<Response>;\n    replace?: (code: string) => string;\n  }): Promise<void> {\n    const { sync, url, el, template, props, alive, prefix, fetch, replace } = options;\n    this.url = url;\n    this.sync = sync;\n    this.alive = alive;\n    this.hrefFlag = false;\n    this.prefix = prefix ?? this.prefix;\n    this.replace = replace ?? this.replace;\n    this.provide.props = props ?? this.provide.props;\n    this.activeFlag = true;\n    // wait iframe init\n    await this.iframeReady;\n\n    // fetch\n    // TODO fetch\n    const iframeWindow = this.iframe.contentWindow;\n    const iframeFetch = fetch\n      ? (input: RequestInfo, init?: RequestInit) =>\n          fetch(typeof input === \"string\" ? getAbsolutePath(input, (this.proxyLocation as Location).href) : input, init)\n      : this.fetch;\n    if (iframeFetch) {\n      iframeWindow.fetch = iframeFetch;\n      this.fetch = iframeFetch;\n    }\n\n    // \n    if (this.execFlag && this.alive) {\n      // \n      syncUrlToWindow(iframeWindow);\n    } else {\n      // urliframeurl\n      syncUrlToIframe(iframeWindow);\n      syncUrlToWindow(iframeWindow);\n    }\n\n    // inject template\n    this.template = template ?? this.template;\n\n    /*  */\n    if (this.degrade) {\n      const iframeBody = rawDocumentQuerySelector.call(iframeWindow.document, \"body\") as HTMLElement;\n      const { iframe, container } = initRenderIframeAndContainer(this.id, el ?? iframeBody, this.degradeAttrs);\n      this.el = container;\n      // jsiframedom\n      if (el) clearChild(iframeBody);\n      // vueevent.timeStamp\n      patchEventTimeStamp(iframe.contentWindow, iframeWindow);\n      // iframeunmount\n      iframe.contentWindow.onunload = () => {\n        this.unmount();\n      };\n      if (this.document) {\n        if (this.alive) {\n          iframe.contentDocument.replaceChild(this.document.documentElement, iframe.contentDocument.documentElement);\n          // \n          recoverEventListeners(iframe.contentDocument.documentElement, iframeWindow);\n        } else {\n          await renderTemplateToIframe(iframe.contentDocument, this.iframe.contentWindow, this.template);\n          // react16\n          recoverDocumentListeners(this.document.documentElement, iframe.contentDocument.documentElement, iframeWindow);\n        }\n      } else {\n        await renderTemplateToIframe(iframe.contentDocument, this.iframe.contentWindow, this.template);\n      }\n      this.document = iframe.contentDocument;\n      return;\n    }\n\n    if (this.shadowRoot) {\n      /*\n       document.addEventListener was transfer to shadowRoot.addEventListener\n       react 16 SyntheticEvent will remember document event for avoid repeat listen\n       shadowRoot have to dispatchEvent for react 16 so can't be destroyed\n       this may lead memory leak risk\n       */\n      this.el = renderElementToContainer(this.shadowRoot.host, el);\n      if (this.alive) return;\n    } else {\n      // iframeWeb Componentconnect\n      const iframeBody = rawDocumentQuerySelector.call(iframeWindow.document, \"body\") as HTMLElement;\n      this.el = renderElementToContainer(createWujieWebComponent(this.id), el ?? iframeBody);\n    }\n\n    await renderTemplateToShadowRoot(this.shadowRoot, iframeWindow, this.template);\n    this.patchCssRules();\n\n    // inject shadowRoot to app\n    this.provide.shadowRoot = this.shadowRoot;\n  }\n\n  // \n  public requestIdleCallback(callback) {\n    return requestIdleCallback(() => {\n      // \n      if (!this.iframe) return;\n      callback.apply(this);\n    });\n  }\n  /** \n   * 1js\n   * 2\n   */\n  public async start(getExternalScripts: () => ScriptResultList): Promise<void> {\n    this.execFlag = true;\n    // \n    const scriptResultList = await getExternalScripts();\n    // \n    if (!this.iframe) return;\n    const iframeWindow = this.iframe.contentWindow;\n    // \n    iframeWindow.__POWERED_BY_WUJIE__ = true;\n    // \n    const beforeScriptResultList: ScriptObjectLoader[] = getPresetLoaders(\"jsBeforeLoaders\", this.plugins);\n    // \n    const afterScriptResultList: ScriptObjectLoader[] = getPresetLoaders(\"jsAfterLoaders\", this.plugins);\n    // \n    const syncScriptResultList: ScriptResultList = [];\n    // async\n    const asyncScriptResultList: ScriptResultList = [];\n    // deferDOMContentLoaded\n    const deferScriptResultList: ScriptResultList = [];\n    scriptResultList.forEach((scriptResult) => {\n      if (scriptResult.defer) deferScriptResultList.push(scriptResult);\n      else if (scriptResult.async) asyncScriptResultList.push(scriptResult);\n      else syncScriptResultList.push(scriptResult);\n    });\n\n    // \n    beforeScriptResultList.forEach((beforeScriptResult) => {\n      this.execQueue.push(() =>\n        this.fiber\n          ? this.requestIdleCallback(() => insertScriptToIframe(beforeScriptResult, iframeWindow))\n          : insertScriptToIframe(beforeScriptResult, iframeWindow)\n      );\n    });\n\n    // \n    syncScriptResultList.concat(deferScriptResultList).forEach((scriptResult) => {\n      this.execQueue.push(() =>\n        scriptResult.contentPromise.then((content) =>\n          this.fiber\n            ? this.requestIdleCallback(() => insertScriptToIframe({ ...scriptResult, content }, iframeWindow))\n            : insertScriptToIframe({ ...scriptResult, content }, iframeWindow)\n        )\n      );\n    });\n\n    // \n    asyncScriptResultList.forEach((scriptResult) => {\n      scriptResult.contentPromise.then((content) => {\n        this.fiber\n          ? this.requestIdleCallback(() => insertScriptToIframe({ ...scriptResult, content }, iframeWindow))\n          : insertScriptToIframe({ ...scriptResult, content }, iframeWindow);\n      });\n    });\n\n    //mount\n    this.execQueue.push(this.fiber ? () => this.requestIdleCallback(() => this.mount()) : () => this.mount());\n\n    // DOMContentLoaded \n    const domContentLoadedTrigger = () => {\n      eventTrigger(iframeWindow.document, \"DOMContentLoaded\");\n      eventTrigger(iframeWindow, \"DOMContentLoaded\");\n      this.execQueue.shift()?.();\n    };\n    this.execQueue.push(this.fiber ? () => this.requestIdleCallback(domContentLoadedTrigger) : domContentLoadedTrigger);\n\n    // \n    afterScriptResultList.forEach((afterScriptResult) => {\n      this.execQueue.push(() =>\n        this.fiber\n          ? this.requestIdleCallback(() => insertScriptToIframe(afterScriptResult, iframeWindow))\n          : insertScriptToIframe(afterScriptResult, iframeWindow)\n      );\n    });\n\n    // loaded \n    const domLoadedTrigger = () => {\n      eventTrigger(iframeWindow.document, \"readystatechange\");\n      eventTrigger(iframeWindow, \"load\");\n      this.execQueue.shift()?.();\n    };\n    this.execQueue.push(this.fiber ? () => this.requestIdleCallback(domLoadedTrigger) : domLoadedTrigger);\n    // mountloading\n    if (this.alive || !isFunction(this.iframe.contentWindow.__WUJIE_UNMOUNT)) removeLoading(this.el);\n    this.execQueue.shift()();\n\n    // execQueuestart\n    return new Promise((resolve) => {\n      this.execQueue.push(() => {\n        resolve();\n        this.execQueue.shift()?.();\n      });\n    });\n  }\n\n  /**\n   * mount__WUJIE_MOUNTasync\n   * fibermountmount\n   * __WUJIE_MOUNTwindowmount\n   * window.__WUJIE.mount()\n   */\n  public mount(): void {\n    if (this.mountFlag) return;\n    if (isFunction(this.iframe.contentWindow.__WUJIE_MOUNT)) {\n      removeLoading(this.el);\n      this.lifecycles?.beforeMount?.(this.iframe.contentWindow);\n      this.iframe.contentWindow.__WUJIE_MOUNT();\n      this.lifecycles?.afterMount?.(this.iframe.contentWindow);\n      this.mountFlag = true;\n    }\n    if (this.alive) {\n      this.lifecycles?.activated?.(this.iframe.contentWindow);\n    }\n    this.execQueue.shift()?.();\n  }\n\n  /** proxyLocation.hrefshadow */\n  public async unmount(): Promise<void> {\n    this.activeFlag = false;\n    // \n    clearInactiveAppUrl();\n    if (this.alive) {\n      this.lifecycles?.deactivated?.(this.iframe.contentWindow);\n    }\n    if (!this.mountFlag) return;\n    if (isFunction(this.iframe.contentWindow.__WUJIE_UNMOUNT) && !this.alive && !this.hrefFlag) {\n      this.lifecycles?.beforeUnmount?.(this.iframe.contentWindow);\n      await this.iframe.contentWindow.__WUJIE_UNMOUNT();\n      this.lifecycles?.afterUnmount?.(this.iframe.contentWindow);\n      this.mountFlag = false;\n      this.bus?.$clear();\n      if (!this.degrade) {\n        clearChild(this.shadowRoot);\n        // head body\n        removeEventListener(this.head);\n        removeEventListener(this.body);\n      }\n      clearChild(this.head);\n      clearChild(this.body);\n    }\n  }\n\n  /**  */\n  public async destroy() {\n    await this.unmount();\n    this.bus.$clear();\n    this.shadowRoot = null;\n    this.proxy = null;\n    this.proxyDocument = null;\n    this.proxyLocation = null;\n    this.execQueue = null;\n    this.provide = null;\n    this.degradeAttrs = null;\n    this.styleSheetElements = null;\n    this.bus = null;\n    this.replace = null;\n    this.fetch = null;\n    this.execFlag = null;\n    this.mountFlag = null;\n    this.hrefFlag = null;\n    this.document = null;\n    this.head = null;\n    this.body = null;\n    this.elementEventCacheMap = null;\n    this.lifecycles = null;\n    this.plugins = null;\n    this.provide = null;\n    this.inject = null;\n    this.execQueue = null;\n    this.prefix = null;\n    //  dom\n    if (this.el) {\n      clearChild(this.el);\n      this.el = null;\n    }\n    //  iframe \n    if (this.iframe) {\n      const iframeWindow = this.iframe.contentWindow;\n      if (iframeWindow?.__WUJIE_EVENTLISTENER__) {\n        iframeWindow.__WUJIE_EVENTLISTENER__.forEach((o) => {\n          iframeWindow.removeEventListener(o.type, o.listener, o.options);\n        });\n      }\n      this.iframe.parentNode?.removeChild(this.iframe);\n      this.iframe = null;\n    }\n    deleteWujieById(this.id);\n  }\n\n  /** mount */\n  public rebuildStyleSheets(): void {\n    if (this.styleSheetElements && this.styleSheetElements.length) {\n      this.styleSheetElements.forEach((styleSheetElement) => {\n        rawElementAppendChild.call(this.degrade ? this.document.head : this.shadowRoot.head, styleSheetElement);\n      });\n    }\n    this.patchCssRules();\n  }\n\n  /**\n   * \n   * 1:root:host\n   * 2@font-faceshadowRoot\n   */\n  public patchCssRules(): void {\n    if (this.degrade) return;\n    if (this.shadowRoot.host.hasAttribute(WUJIE_DATA_ATTACH_CSS_FLAG)) return;\n    const [hostStyleSheetElement, fontStyleSheetElement] = getPatchStyleElements(\n      Array.from(this.iframe.contentDocument.querySelectorAll(\"style\")).map(\n        (styleSheetElement) => styleSheetElement.sheet\n      )\n    );\n    if (hostStyleSheetElement) {\n      this.shadowRoot.head.appendChild(hostStyleSheetElement);\n      this.styleSheetElements.push(hostStyleSheetElement);\n    }\n    if (fontStyleSheetElement) {\n      this.shadowRoot.host.appendChild(fontStyleSheetElement);\n    }\n    (hostStyleSheetElement || fontStyleSheetElement) &&\n      this.shadowRoot.host.setAttribute(WUJIE_DATA_ATTACH_CSS_FLAG, \"\");\n  }\n\n  /**\n   * @param id id\n   * @param url urlprotocolhostpathqueryhash\n   */\n  constructor(options: {\n    name: string;\n    url: string;\n    attrs: { [key: string]: any };\n    degradeAttrs: { [key: string]: any };\n    fiber: boolean;\n    degrade;\n    plugins: Array<plugin>;\n    lifecycles: lifecycles;\n  }) {\n    // inject\n    if (window.__POWERED_BY_WUJIE__) this.inject = window.__WUJIE.inject;\n    else {\n      this.inject = {\n        idToSandboxMap: idToSandboxCacheMap,\n        appEventObjMap,\n        mainHostPath: window.location.protocol + \"//\" + window.location.host,\n      };\n    }\n    const { name, url, attrs, fiber, degradeAttrs, degrade, lifecycles, plugins } = options;\n    this.id = name;\n    this.fiber = fiber;\n    this.degrade = degrade || !wujieSupport;\n    this.bus = new EventBus(this.id);\n    this.url = url;\n    this.degradeAttrs = degradeAttrs;\n    this.provide = { bus: this.bus };\n    this.styleSheetElements = [];\n    this.execQueue = [];\n    this.lifecycles = lifecycles;\n    this.plugins = getPlugins(plugins);\n\n    // \n    const { urlElement, appHostPath, appRoutePath } = appRouteParse(url);\n    const { mainHostPath } = this.inject;\n    // iframe\n    this.iframe = iframeGenerator(this, attrs, mainHostPath, appHostPath, appRoutePath);\n\n    if (this.degrade) {\n      const { proxyDocument, proxyLocation } = localGenerator(this.iframe, urlElement, mainHostPath, appHostPath);\n      this.proxyDocument = proxyDocument;\n      this.proxyLocation = proxyLocation;\n    } else {\n      const { proxyWindow, proxyDocument, proxyLocation } = proxyGenerator(\n        this.iframe,\n        urlElement,\n        mainHostPath,\n        appHostPath\n      );\n      this.proxy = proxyWindow;\n      this.proxyDocument = proxyDocument;\n      this.proxyLocation = proxyLocation;\n    }\n    this.provide.location = this.proxyLocation;\n\n    addSandboxCacheWithWujie(this.id, this);\n  }\n}\n","import importHTML, { processCssLoader } from \"./entry\";\nimport { StyleObject, ScriptAttributes } from \"./template\";\nimport WuJie, { lifecycle } from \"./sandbox\";\nimport { defineWujieWebComponent, addLoading } from \"./shadow\";\nimport { processAppForHrefJump } from \"./sync\";\nimport { getPlugins } from \"./plugin\";\nimport {\n  wujieSupport,\n  mergeOptions,\n  isFunction,\n  requestIdleCallback,\n  isMatchSyncQueryById,\n  warn,\n  stopMainAppRun,\n} from \"./utils\";\nimport { getWujieById, getOptionsById, addSandboxCacheWithOptions } from \"./common\";\nimport { EventBus } from \"./event\";\nimport { WUJIE_TIPS_NOT_SUPPORTED } from \"./constant\";\n\nexport const bus = new EventBus(Date.now().toString());\n\nexport interface ScriptObjectLoader {\n  /**  */\n  src?: string;\n  /** module */\n  module?: boolean;\n  /** async */\n  async?: boolean;\n  /** crossorigin */\n  crossorigin?: boolean;\n  /** crossorigin */\n  crossoriginType?: \"anonymous\" | \"use-credentials\" | \"\";\n  /**  */\n  attrs?: ScriptAttributes;\n  /** script */\n  content?: string;\n  /**  */\n  callback?: (appWindow: Window) => any;\n  /**  */\n  onload?: Function;\n}\nexport interface plugin {\n  /** htmlloader */\n  htmlLoader?: (code: string) => string;\n  /** js */\n  jsExcludes?: Array<string | RegExp>;\n  /** js */\n  jsIgnores?: Array<string | RegExp>;\n  /** jsloader */\n  jsBeforeLoaders?: Array<ScriptObjectLoader>;\n  /** jsloader */\n  jsLoader?: (code: string, url: string, base: string) => string;\n  /** jsloader */\n  jsAfterLoaders?: Array<ScriptObjectLoader>;\n  /** css */\n  cssExcludes?: Array<string | RegExp>;\n  /** css */\n  cssIgnores?: Array<string | RegExp>;\n  /** cssloader */\n  cssBeforeLoaders?: Array<StyleObject>;\n  /** cssloader */\n  cssLoader?: (code: string, url: string, base: string) => string;\n  /** cssloader */\n  cssAfterLoaders?: Array<StyleObject>;\n  /**  window addEventListener  */\n  windowAddEventListenerHook?: eventListenerHook;\n  /**  window removeEventListener  */\n  windowRemoveEventListenerHook?: eventListenerHook;\n  /**  document addEventListener  */\n  documentAddEventListenerHook?: eventListenerHook;\n  /**  document removeEventListener  */\n  documentRemoveEventListenerHook?: eventListenerHook;\n  /**  bodyhead */\n  appendOrInsertElementHook?: <T extends Node>(element: T, iframeWindow: Window) => void;\n  /**  */\n  patchElementHook?: <T extends Node>(element: T, iframeWindow: Window) => void;\n  /**  window  */\n  windowPropertyOverride?: (iframeWindow: Window) => void;\n  /**  document  */\n  documentPropertyOverride?: (iframeWindow: Window) => void;\n}\n\ntype eventListenerHook = (\n  iframeWindow: Window,\n  type: string,\n  handler: EventListenerOrEventListenerObject,\n  options?: boolean | AddEventListenerOptions\n) => void;\n\nexport type loadErrorHandler = (url: string, e: Error) => any;\n\ntype baseOptions = {\n  /**  */\n  name: string;\n  /** url */\n  url: string;\n  /** html, url */\n  html?: string;\n  /**  */\n  replace?: (code: string) => string;\n  /** fetch */\n  fetch?: (input: RequestInfo, init?: RequestInit) => Promise<Response>;\n  /**  */\n  props?: { [key: string]: any };\n  /** iframe */\n  attrs?: { [key: string]: any };\n  /** iframe */\n  degradeAttrs?: { [key: string]: any };\n  /** fiber */\n  fiber?: boolean;\n  /** state */\n  alive?: boolean;\n  /** iframe */\n  degrade?: boolean;\n  /**  */\n  plugins?: Array<plugin>;\n  /**  */\n  beforeLoad?: lifecycle;\n  beforeMount?: lifecycle;\n  afterMount?: lifecycle;\n  beforeUnmount?: lifecycle;\n  afterUnmount?: lifecycle;\n  activated?: lifecycle;\n  deactivated?: lifecycle;\n  loadError?: loadErrorHandler;\n};\n\nexport type preOptions = Omit<baseOptions, \"url\"> & {\n  /**  */\n  exec?: boolean;\n  url?: string;\n};\n\nexport type startOptions = baseOptions & {\n  /**  */\n  el: HTMLElement | string;\n  /**\n   * \n   * falsehistory\n   * https://html.spec.whatwg.org/multipage/history.html#the-history-interface\n   */\n  sync?: boolean;\n  /**  */\n  prefix?: { [key: string]: string };\n  /** loading */\n  loading?: HTMLElement;\n};\n\ntype optionProperty = \"url\" | \"el\";\n\n/**\n *  preOptions  startOptions url  el \n */\nexport type cacheOptions = Omit<preOptions & startOptions, optionProperty> &\n  Partial<Pick<startOptions, optionProperty>>;\n\n/**\n * \n * wujie.__WUJIE true\n * window.__POWERED_BY_WUJIE__ false\n * iframeloading\n */\nif (window.__WUJIE && !window.__POWERED_BY_WUJIE__) {\n  stopMainAppRun();\n}\n\n// \nprocessAppForHrefJump();\n\n// webComponent\ndefineWujieWebComponent();\n\n// \nif (!wujieSupport) warn(WUJIE_TIPS_NOT_SUPPORTED);\n\n/**\n * \n */\nexport function setupApp(options: cacheOptions): void {\n  if (options.name) addSandboxCacheWithOptions(options.name, options);\n}\n\n/**\n * app\n */\nexport async function startApp(startOptions: startOptions): Promise<Function | void> {\n  const sandbox = getWujieById(startOptions.name);\n  const cacheOptions = getOptionsById(startOptions.name);\n  // \n  const options = mergeOptions(startOptions, cacheOptions);\n  const {\n    name,\n    url,\n    html,\n    replace,\n    fetch,\n    props,\n    attrs,\n    degradeAttrs,\n    fiber,\n    alive,\n    degrade,\n    sync,\n    prefix,\n    el,\n    loading,\n    plugins,\n    lifecycles,\n  } = options;\n  // \n  if (sandbox) {\n    sandbox.plugins = getPlugins(plugins);\n    sandbox.lifecycles = lifecycles;\n    const iframeWindow = sandbox.iframe.contentWindow;\n    if (sandbox.preload) {\n      await sandbox.preload;\n    }\n    if (alive) {\n      // \n      await sandbox.active({ url, sync, prefix, el, props, alive, fetch, replace });\n      // \n      if (!sandbox.execFlag) {\n        sandbox.lifecycles?.beforeLoad?.(sandbox.iframe.contentWindow);\n        const { getExternalScripts } = await importHTML({\n          url,\n          html,\n          opts: {\n            fetch: fetch || window.fetch,\n            plugins: sandbox.plugins,\n            loadError: sandbox.lifecycles.loadError,\n            fiber,\n          },\n        });\n        await sandbox.start(getExternalScripts);\n      }\n      sandbox.lifecycles?.activated?.(sandbox.iframe.contentWindow);\n      return () => sandbox.destroy();\n    } else if (isFunction(iframeWindow.__WUJIE_MOUNT)) {\n      /**\n       * webcomponentdisconnectedCallbacksandbox.unmount\n       * webcomponentstartAppunmount\n       */\n      await sandbox.unmount();\n      await sandbox.active({ url, sync, prefix, el, props, alive, fetch, replace });\n      // cssmount\n      sandbox.rebuildStyleSheets();\n      // \n      sandbox.lifecycles?.beforeMount?.(sandbox.iframe.contentWindow);\n      iframeWindow.__WUJIE_MOUNT();\n      sandbox.lifecycles?.afterMount?.(sandbox.iframe.contentWindow);\n      sandbox.mountFlag = true;\n      return () => sandbox.destroy();\n    } else {\n      // \n      await sandbox.destroy();\n    }\n  }\n\n  // loading\n  addLoading(el, loading);\n  const newSandbox = new WuJie({ name, url, attrs, degradeAttrs, fiber, degrade, plugins, lifecycles });\n  newSandbox.lifecycles?.beforeLoad?.(newSandbox.iframe.contentWindow);\n  const { template, getExternalScripts, getExternalStyleSheets } = await importHTML({\n    url,\n    html,\n    opts: {\n      fetch: fetch || window.fetch,\n      plugins: newSandbox.plugins,\n      loadError: newSandbox.lifecycles.loadError,\n      fiber,\n    },\n  });\n\n  const processedHtml = await processCssLoader(newSandbox, template, getExternalStyleSheets);\n  await newSandbox.active({ url, sync, prefix, template: processedHtml, el, props, alive, fetch, replace });\n  await newSandbox.start(getExternalScripts);\n  return () => newSandbox.destroy();\n}\n\n/**\n * APP\n */\nexport function preloadApp(preOptions: preOptions): void {\n  requestIdleCallback((): void | Promise<void> => {\n    /**\n     * \n     * urlidurl\n     */\n    if (getWujieById(preOptions.name) || isMatchSyncQueryById(preOptions.name)) return;\n    const cacheOptions = getOptionsById(preOptions.name);\n    // \n    const options = mergeOptions({ ...preOptions }, cacheOptions);\n    const {\n      name,\n      url,\n      html,\n      props,\n      alive,\n      replace,\n      fetch,\n      exec,\n      attrs,\n      degradeAttrs,\n      fiber,\n      degrade,\n      prefix,\n      plugins,\n      lifecycles,\n    } = options;\n\n    const sandbox = new WuJie({ name, url, attrs, degradeAttrs, fiber, degrade, plugins, lifecycles });\n    if (sandbox.preload) return sandbox.preload;\n    const runPreload = async () => {\n      sandbox.lifecycles?.beforeLoad?.(sandbox.iframe.contentWindow);\n      const { template, getExternalScripts, getExternalStyleSheets } = await importHTML({\n        url,\n        html,\n        opts: {\n          fetch: fetch || window.fetch,\n          plugins: sandbox.plugins,\n          loadError: sandbox.lifecycles.loadError,\n          fiber,\n        },\n      });\n      const processedHtml = await processCssLoader(sandbox, template, getExternalStyleSheets);\n      await sandbox.active({ url, props, prefix, alive, template: processedHtml, fetch, replace });\n      if (exec) {\n        await sandbox.start(getExternalScripts);\n      } else {\n        await getExternalScripts();\n      }\n    };\n    sandbox.preload = runPreload();\n  });\n}\n\n/**\n * APP\n */\nexport function destroyApp(id: string): void {\n  const sandbox = getWujieById(id);\n  if (sandbox) {\n    sandbox.destroy();\n  }\n}\n","import Vue from \"vue\";\nimport { bus, preloadApp, startApp as rawStartApp, destroyApp, setupApp } from \"wujie\";\n\nconst wujieVueOptions = {\n  name: \"WujieVue\",\n  props: {\n    width: { type: String, default: \"\" },\n    height: { type: String, default: \"\" },\n    name: { type: String, default: \"\" },\n    loading: { type: HTMLElement, default: undefined },\n    url: { type: String, default: \"\" },\n    sync: { type: Boolean, default: undefined },\n    prefix: { type: Object, default: undefined },\n    alive: { type: Boolean, default: undefined },\n    props: { type: Object, default: undefined },\n    attrs: { type: Object, default: undefined },\n    replace: { type: Function, default: undefined },\n    fetch: { type: Function, default: undefined },\n    fiber: { type: Boolean, default: undefined },\n    degrade: { type: Boolean, default: undefined },\n    plugins: { type: Array, default: null },\n    beforeLoad: { type: Function, default: null },\n    beforeMount: { type: Function, default: null },\n    afterMount: { type: Function, default: null },\n    beforeUnmount: { type: Function, default: null },\n    afterUnmount: { type: Function, default: null },\n    activated: { type: Function, default: null },\n    deactivated: { type: Function, default: null },\n    loadError: { type: Function, default: null },\n  },\n  data() {\n    return {\n      startAppQueue: Promise.resolve(),\n    };\n  },\n  mounted() {\n    if (this.name) {\n      if (window.__WUJIE_QUEUE) {\n        if (window.__WUJIE_QUEUE[this.name]) {\n          this.startAppQueue = window.__WUJIE_QUEUE[this.name];\n        } else {\n          window.__WUJIE_QUEUE[this.name] = this.startAppQueue;\n        }\n      } else {\n        window.__WUJIE_QUEUE = {\n          [this.name]: this.startAppQueue,\n        };\n      }\n    }\n    bus.$onAll(this.handleEmit);\n    this.execStartApp();\n    this.$watch(\n      () => this.name + this.url,\n      () => this.execStartApp()\n    );\n  },\n  methods: {\n    handleEmit(event, ...args) {\n      this.$emit(event, ...args);\n    },\n    async startApp() {\n      try {\n        // $props vue 2.2\n        await rawStartApp({\n          name: this.name,\n          url: this.url,\n          el: this.$refs.wujie,\n          loading: this.loading,\n          alive: this.alive,\n          fetch: this.fetch,\n          props: this.props,\n          attrs: this.attrs,\n          replace: this.replace,\n          sync: this.sync,\n          prefix: this.prefix,\n          fiber: this.fiber,\n          degrade: this.degrade,\n          plugins: this.plugins,\n          beforeLoad: this.beforeLoad,\n          beforeMount: this.beforeMount,\n          afterMount: this.afterMount,\n          beforeUnmount: this.beforeUnmount,\n          afterUnmount: this.afterUnmount,\n          activated: this.activated,\n          deactivated: this.deactivated,\n          loadError: this.loadError,\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    },\n    execStartApp() {\n      this.startAppQueue = this.startAppQueue.then(this.startApp);\n      window.__WUJIE_QUEUE[this.name] = this.startAppQueue;\n    },\n    destroy() {\n      destroyApp(this.name);\n    },\n  },\n  beforeDestroy() {\n    bus.$offAll(this.handleEmit);\n  },\n  render(c) {\n    return c(\"div\", {\n      style: {\n        width: this.width,\n        height: this.height,\n      },\n      ref: \"wujie\",\n    });\n  },\n};\n\nconst WujieVue = Vue.extend(wujieVueOptions);\n\nWujieVue.setupApp = setupApp;\nWujieVue.preloadApp = preloadApp;\nWujieVue.bus = bus;\nWujieVue.destroyApp = destroyApp;\nWujieVue.install = function (Vue) {\n  Vue.component(\"WujieVue\", WujieVue);\n};\n\nexport default WujieVue;\n","<template>\n  <!--nameurl -->\n  <WujieVue width=\"100%\" height=\"100%\" name=\"react17\" :url=\"react17Url\"></WujieVue>\n</template>\n\n<script>\nimport hostMap from \"../hostMap\";\nimport wujieVue from \"wujie-vue2\";\nexport default {\n  data() {\n    return {\n      react17Url: hostMap(\"//localhost:7100/\") + this.$route.params.path,\n    };\n  },\n  watch: {\n    \"$route.params.path\": {\n      handler: function () {\n        wujieVue.bus.$emit(\"react17-router-change\", `/${this.$route.params.path}`);\n      },\n      immediate: true,\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n","import mod from \"-!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/.pnpm/thread-loader@2.1.3_webpack@4.46.0/node_modules/thread-loader/dist/cjs.js!../../../../node_modules/.pnpm/babel-loader@8.2.5_@babel+core@7.18.13_webpack@4.46.0/node_modules/babel-loader/lib/index.js!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/index.js??vue-loader-options!./React17-sub.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/.pnpm/thread-loader@2.1.3_webpack@4.46.0/node_modules/thread-loader/dist/cjs.js!../../../../node_modules/.pnpm/babel-loader@8.2.5_@babel+core@7.18.13_webpack@4.46.0/node_modules/babel-loader/lib/index.js!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/index.js??vue-loader-options!./React17-sub.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./React17-sub.vue?vue&type=template&id=7dc10650&scoped=true&\"\nimport script from \"./React17-sub.vue?vue&type=script&lang=js&\"\nexport * from \"./React17-sub.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7dc10650\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('WujieVue',{attrs:{\"width\":\"100%\",\"height\":\"100%\",\"name\":\"vue2\",\"url\":_vm.vue2Url,\"sync\":true}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <!--nameurl -->\n  <WujieVue width=\"100%\" height=\"100%\" name=\"vue2\" :url=\"vue2Url\" :sync=\"true\"></WujieVue>\n</template>\n\n<script>\nimport hostMap from \"../hostMap\";\n\nexport default {\n  data() {\n    return {\n      vue2Url: hostMap(\"//localhost:7200/\"),\n    };\n  },\n  methods: {\n    jump(name) {\n      this.$router.push({ name });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n","import mod from \"-!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/.pnpm/thread-loader@2.1.3_webpack@4.46.0/node_modules/thread-loader/dist/cjs.js!../../../../node_modules/.pnpm/babel-loader@8.2.5_@babel+core@7.18.13_webpack@4.46.0/node_modules/babel-loader/lib/index.js!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/index.js??vue-loader-options!./Vue2.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/.pnpm/thread-loader@2.1.3_webpack@4.46.0/node_modules/thread-loader/dist/cjs.js!../../../../node_modules/.pnpm/babel-loader@8.2.5_@babel+core@7.18.13_webpack@4.46.0/node_modules/babel-loader/lib/index.js!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/index.js??vue-loader-options!./Vue2.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Vue2.vue?vue&type=template&id=5a74e1ae&scoped=true&\"\nimport script from \"./Vue2.vue?vue&type=script&lang=js&\"\nexport * from \"./Vue2.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5a74e1ae\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('WujieVue',{attrs:{\"width\":\"100%\",\"height\":\"100%\",\"name\":\"vue2\",\"url\":_vm.vue2Url}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <!--nameurl -->\n  <WujieVue width=\"100%\" height=\"100%\" name=\"vue2\" :url=\"vue2Url\"></WujieVue>\n</template>\n\n<script>\nimport hostMap from \"../hostMap\";\n\nexport default {\n  computed: {\n    vue2Url() {\n      return hostMap(\"//localhost:7200/\") + `#/${this.$route.params.path}`;\n    },\n  },\n  methods: {\n    jump(name) {\n      this.$router.push({ name });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n","import mod from \"-!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/.pnpm/thread-loader@2.1.3_webpack@4.46.0/node_modules/thread-loader/dist/cjs.js!../../../../node_modules/.pnpm/babel-loader@8.2.5_@babel+core@7.18.13_webpack@4.46.0/node_modules/babel-loader/lib/index.js!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/index.js??vue-loader-options!./Vue2-sub.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/.pnpm/thread-loader@2.1.3_webpack@4.46.0/node_modules/thread-loader/dist/cjs.js!../../../../node_modules/.pnpm/babel-loader@8.2.5_@babel+core@7.18.13_webpack@4.46.0/node_modules/babel-loader/lib/index.js!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/index.js??vue-loader-options!./Vue2-sub.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Vue2-sub.vue?vue&type=template&id=53c9eb48&scoped=true&\"\nimport script from \"./Vue2-sub.vue?vue&type=script&lang=js&\"\nexport * from \"./Vue2-sub.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"53c9eb48\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('WujieVue',{attrs:{\"width\":\"100%\",\"height\":\"100%\",\"name\":\"vite\",\"url\":_vm.viteUrl,\"sync\":true}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <!--nameurl -->\n  <WujieVue width=\"100%\" height=\"100%\" name=\"vite\" :url=\"viteUrl\" :sync=\"true\"></WujieVue>\n</template>\n\n<script>\nimport hostMap from \"../hostMap\";\n\nexport default {\n  data() {\n    return {\n      viteUrl: hostMap(\"//localhost:7500/\"),\n    };\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n","import mod from \"-!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/.pnpm/thread-loader@2.1.3_webpack@4.46.0/node_modules/thread-loader/dist/cjs.js!../../../../node_modules/.pnpm/babel-loader@8.2.5_@babel+core@7.18.13_webpack@4.46.0/node_modules/babel-loader/lib/index.js!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/index.js??vue-loader-options!./Vite.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/.pnpm/thread-loader@2.1.3_webpack@4.46.0/node_modules/thread-loader/dist/cjs.js!../../../../node_modules/.pnpm/babel-loader@8.2.5_@babel+core@7.18.13_webpack@4.46.0/node_modules/babel-loader/lib/index.js!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/index.js??vue-loader-options!./Vite.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Vite.vue?vue&type=template&id=947c7230&scoped=true&\"\nimport script from \"./Vite.vue?vue&type=script&lang=js&\"\nexport * from \"./Vite.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"947c7230\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('WujieVue',{attrs:{\"width\":\"100%\",\"height\":\"100%\",\"name\":\"vite\",\"url\":_vm.viteUrl}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <!--nameurl -->\n  <WujieVue width=\"100%\" height=\"100%\" name=\"vite\" :url=\"viteUrl\"></WujieVue>\n</template>\n\n<script>\nimport hostMap from \"../hostMap\";\n\nexport default {\n  computed: {\n    viteUrl() {\n      return hostMap(\"//localhost:7500/\") + this.$route.params.path;\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n","import mod from \"-!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/.pnpm/thread-loader@2.1.3_webpack@4.46.0/node_modules/thread-loader/dist/cjs.js!../../../../node_modules/.pnpm/babel-loader@8.2.5_@babel+core@7.18.13_webpack@4.46.0/node_modules/babel-loader/lib/index.js!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/index.js??vue-loader-options!./Vite-sub.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/.pnpm/thread-loader@2.1.3_webpack@4.46.0/node_modules/thread-loader/dist/cjs.js!../../../../node_modules/.pnpm/babel-loader@8.2.5_@babel+core@7.18.13_webpack@4.46.0/node_modules/babel-loader/lib/index.js!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/index.js??vue-loader-options!./Vite-sub.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Vite-sub.vue?vue&type=template&id=3b8cef63&scoped=true&\"\nimport script from \"./Vite-sub.vue?vue&type=script&lang=js&\"\nexport * from \"./Vite-sub.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3b8cef63\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('WujieVue',{attrs:{\"width\":\"100%\",\"height\":\"100%\",\"name\":\"vue3\",\"url\":_vm.vue3Url,\"sync\":true}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <!--nameurl -->\n  <WujieVue width=\"100%\" height=\"100%\" name=\"vue3\" :url=\"vue3Url\" :sync=\"true\"></WujieVue>\n</template>\n\n<script>\nimport hostMap from \"../hostMap\";\nexport default {\n  data() {\n    return {\n      vue3Url: hostMap(\"//localhost:7300/\"),\n    };\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n","import mod from \"-!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/.pnpm/thread-loader@2.1.3_webpack@4.46.0/node_modules/thread-loader/dist/cjs.js!../../../../node_modules/.pnpm/babel-loader@8.2.5_@babel+core@7.18.13_webpack@4.46.0/node_modules/babel-loader/lib/index.js!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/index.js??vue-loader-options!./Vue3.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/.pnpm/thread-loader@2.1.3_webpack@4.46.0/node_modules/thread-loader/dist/cjs.js!../../../../node_modules/.pnpm/babel-loader@8.2.5_@babel+core@7.18.13_webpack@4.46.0/node_modules/babel-loader/lib/index.js!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/index.js??vue-loader-options!./Vue3.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Vue3.vue?vue&type=template&id=3e8a9450&scoped=true&\"\nimport script from \"./Vue3.vue?vue&type=script&lang=js&\"\nexport * from \"./Vue3.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3e8a9450\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('WujieVue',{attrs:{\"width\":\"100%\",\"height\":\"100%\",\"name\":\"vue3\",\"url\":_vm.vue3Url}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <!--nameurl -->\n  <WujieVue width=\"100%\" height=\"100%\" name=\"vue3\" :url=\"vue3Url\"></WujieVue>\n</template>\n\n<script>\nimport hostMap from \"../hostMap\";\nimport wujieVue from \"wujie-vue2\";\nexport default {\n  data() {\n    return {\n      vue3Url: hostMap(\"//localhost:7300/\") + this.$route.params.path,\n    };\n  },\n  watch: {\n    \"$route.params.path\": {\n      handler: function () {\n        wujieVue.bus.$emit(\"vue3-router-change\", `/${this.$route.params.path}`);\n      },\n      immediate: true,\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n","import mod from \"-!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/.pnpm/thread-loader@2.1.3_webpack@4.46.0/node_modules/thread-loader/dist/cjs.js!../../../../node_modules/.pnpm/babel-loader@8.2.5_@babel+core@7.18.13_webpack@4.46.0/node_modules/babel-loader/lib/index.js!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/index.js??vue-loader-options!./Vue3-sub.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/.pnpm/thread-loader@2.1.3_webpack@4.46.0/node_modules/thread-loader/dist/cjs.js!../../../../node_modules/.pnpm/babel-loader@8.2.5_@babel+core@7.18.13_webpack@4.46.0/node_modules/babel-loader/lib/index.js!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/index.js??vue-loader-options!./Vue3-sub.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Vue3-sub.vue?vue&type=template&id=56aa1742&scoped=true&\"\nimport script from \"./Vue3-sub.vue?vue&type=script&lang=js&\"\nexport * from \"./Vue3-sub.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"56aa1742\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('WujieVue',{staticClass:\"angular-container\",attrs:{\"name\":\"angular12\",\"url\":_vm.url,\"attrs\":_vm.attrs,\"sync\":true}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <WujieVue class=\"angular-container\" name=\"angular12\" :url=\"url\" :attrs=\"attrs\" :sync=\"true\"></WujieVue>\n</template>\n\n<script>\nimport hostMap from \"../hostMap\";\n\nexport default {\n  data() {\n    return {\n      url: hostMap(\"//localhost:7400/\"),\n      // iframeurlgithub pages csp\n      attrs: process.env.NODE_ENV === \"production\" ? { src: hostMap(\"//localhost:7400/\") } : {},\n    };\n  },\n};\n</script>\n\n<style lang=\"css\" scoped>\n.angular-container {\n  width: 100%;\n  height: 100%;\n}\n</style>\n","import mod from \"-!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/.pnpm/thread-loader@2.1.3_webpack@4.46.0/node_modules/thread-loader/dist/cjs.js!../../../../node_modules/.pnpm/babel-loader@8.2.5_@babel+core@7.18.13_webpack@4.46.0/node_modules/babel-loader/lib/index.js!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/index.js??vue-loader-options!./Angular12.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/.pnpm/thread-loader@2.1.3_webpack@4.46.0/node_modules/thread-loader/dist/cjs.js!../../../../node_modules/.pnpm/babel-loader@8.2.5_@babel+core@7.18.13_webpack@4.46.0/node_modules/babel-loader/lib/index.js!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/index.js??vue-loader-options!./Angular12.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Angular12.vue?vue&type=template&id=2dc62798&scoped=true&\"\nimport script from \"./Angular12.vue?vue&type=script&lang=js&\"\nexport * from \"./Angular12.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Angular12.vue?vue&type=style&index=0&id=2dc62798&prod&lang=css&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2dc62798\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticStyle:{\"height\":\"100%\",\"width\":\"100%\"}},[_c('WujieVue',{staticClass:\"item\",attrs:{\"name\":\"react16\",\"url\":_vm.react16Url,\"sync\":true}}),_c('WujieVue',{staticClass:\"item\",attrs:{\"name\":\"react17\",\"url\":_vm.react17Url,\"sync\":true}}),_c('WujieVue',{staticClass:\"item\",attrs:{\"name\":\"vue2\",\"url\":_vm.vue2Url,\"sync\":true}}),_c('WujieVue',{staticClass:\"item\",attrs:{\"name\":\"vue3\",\"url\":_vm.vue3Url,\"sync\":true}}),_c('WujieVue',{staticClass:\"item\",attrs:{\"name\":\"vite\",\"url\":_vm.vite,\"sync\":true}}),_c('WujieVue',{staticClass:\"item\",attrs:{\"name\":\"angular12\",\"url\":_vm.angular12Url,\"sync\":true}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div style=\"height: 100%; width: 100%\">\n    <WujieVue class=\"item\" name=\"react16\" :url=\"react16Url\" :sync=\"true\"></WujieVue>\n    <WujieVue class=\"item\" name=\"react17\" :url=\"react17Url\" :sync=\"true\"></WujieVue>\n    <WujieVue class=\"item\" name=\"vue2\" :url=\"vue2Url\" :sync=\"true\"></WujieVue>\n    <WujieVue class=\"item\" name=\"vue3\" :url=\"vue3Url\" :sync=\"true\"></WujieVue>\n    <WujieVue class=\"item\" name=\"vite\" :url=\"vite\" :sync=\"true\"></WujieVue>\n    <WujieVue class=\"item\" name=\"angular12\" :url=\"angular12Url\" :sync=\"true\"></WujieVue>\n  </div>\n</template>\n\n<script>\nimport hostMap from \"../hostMap\";\n\nexport default {\n  data() {\n    return {\n      react16Url: hostMap(\"//localhost:7600/\"),\n      react17Url: hostMap(\"//localhost:7100/\"),\n      vue2Url: hostMap(\"//localhost:7200/\"),\n      vue3Url: hostMap(\"//localhost:7300/\"),\n      vite: hostMap(\"//localhost:7500/\"),\n      angular12Url: hostMap(\"//localhost:7400/\"),\n    };\n  },\n  methods: {\n    jump(name) {\n      this.$router.push({ name });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.item {\n  display: inline-block;\n  border: 1px dashed #ccc;\n  border-radius: 8px;\n  width: 45%;\n  height: 45%;\n  margin: 20px;\n  overflow: scroll;\n}\n</style>\n","import mod from \"-!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/.pnpm/thread-loader@2.1.3_webpack@4.46.0/node_modules/thread-loader/dist/cjs.js!../../../../node_modules/.pnpm/babel-loader@8.2.5_@babel+core@7.18.13_webpack@4.46.0/node_modules/babel-loader/lib/index.js!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/index.js??vue-loader-options!./Multiple.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/.pnpm/thread-loader@2.1.3_webpack@4.46.0/node_modules/thread-loader/dist/cjs.js!../../../../node_modules/.pnpm/babel-loader@8.2.5_@babel+core@7.18.13_webpack@4.46.0/node_modules/babel-loader/lib/index.js!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/index.js??vue-loader-options!./Multiple.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Multiple.vue?vue&type=template&id=7ef41522&scoped=true&\"\nimport script from \"./Multiple.vue?vue&type=script&lang=js&\"\nexport * from \"./Multiple.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Multiple.vue?vue&type=style&index=0&id=7ef41522&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7ef41522\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{staticClass:\"title\"},[_vm._v(\"\")]),_c('div',{staticClass:\"main-content\"},[_c('div',{staticStyle:{\"padding-bottom\":\"10px\"}},[_vm._v(\"\"+_vm._s(_vm.message))]),_c('button',{staticStyle:{\"margin-right\":\"10px\"},on:{\"click\":() => _vm.postMessageToVue2()}},[_vm._v(\"vue2\")]),_c('button',{on:{\"click\":() => _vm.postMessageToVue3()}},[_vm._v(\"vue2iframe\")])]),_c('div',{staticClass:\"sub-content\"},[_c('WujieVue',{attrs:{\"width\":\"100%\",\"height\":\"100%\",\"name\":\"vue2\",\"url\":_vm.vue2Url,\"sync\":true}})],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <!--nameurl -->\n  <div>\n    <div class=\"title\"></div>\n    <div class=\"main-content\">\n      <div style=\"padding-bottom: 10px\">{{ message }}</div>\n      <button style=\"margin-right: 10px\" @click=\"() => postMessageToVue2()\">vue2</button>\n      <button @click=\"() => postMessageToVue3()\">vue2iframe</button>\n    </div>\n    <div class=\"sub-content\">\n      <WujieVue width=\"100%\" height=\"100%\" name=\"vue2\" :url=\"vue2Url\" :sync=\"true\"></WujieVue>\n    </div>\n  </div>\n</template>\n\n<script>\nimport hostMap from \"../hostMap\";\n\nexport default {\n  data() {\n    return {\n      message: \"\",\n      vue2Url: hostMap(\"//localhost:7200/\") + \"#postmessage\",\n    };\n  },\n  methods: {\n    postMessageToVue2(message) {\n      const subAppWindow = window.document.querySelector('iframe[name=\"vue2\"]').contentWindow;\n      const data = message || { type: \"vue2\", message: \"hello, i'm main app\" };\n      subAppWindow.postMessage(JSON.stringify(data), \"*\");\n    },\n    postMessageToVue3(message) {\n      const iframeWindow = window.document\n        .querySelector(\"wujie-app[data-wujie-id='vue2']\")\n        .shadowRoot.querySelector(\"iframe\").contentWindow;\n      const data = message || { type: \"vue3\", message: \"hello, i'm main app\" };\n      iframeWindow.postMessage(JSON.stringify(data), \"*\");\n    },\n    handleMessage(e) {\n      try {\n        let res = JSON.parse(e.data);\n        if (res.type === \"main\") {\n          this.message = res.message;\n        }\n        if (res.type === \"vue2\") {\n          this.postMessageToVue2(res);\n        }\n        if (res.type === \"vue3\") {\n          this.postMessageToVue3(res);\n        }\n      } catch (err) {\n        return;\n      }\n    },\n  },\n  mounted() {\n    window.addEventListener(\"message\", this.handleMessage);\n  },\n  onMounted() {\n    window.removeEventListener(\"message\", this.handleMessage);\n  },\n};\n</script>\n\n<style lang=\"css\" scoped>\n.title {\n  margin-top: 20px;\n  text-align: center;\n  font-size: 20px;\n  font-weight: 800;\n}\n.main-content {\n  margin: 40px;\n  font-size: 16px;\n}\n.sub-content {\n  margin: 40px;\n  height: 500px;\n  border: 1px dashed #ccc;\n}\n</style>\n","import mod from \"-!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/.pnpm/thread-loader@2.1.3_webpack@4.46.0/node_modules/thread-loader/dist/cjs.js!../../../../node_modules/.pnpm/babel-loader@8.2.5_@babel+core@7.18.13_webpack@4.46.0/node_modules/babel-loader/lib/index.js!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/index.js??vue-loader-options!./PostMessage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/.pnpm/thread-loader@2.1.3_webpack@4.46.0/node_modules/thread-loader/dist/cjs.js!../../../../node_modules/.pnpm/babel-loader@8.2.5_@babel+core@7.18.13_webpack@4.46.0/node_modules/babel-loader/lib/index.js!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/index.js??vue-loader-options!./PostMessage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PostMessage.vue?vue&type=template&id=27f13918&scoped=true&\"\nimport script from \"./PostMessage.vue?vue&type=script&lang=js&\"\nexport * from \"./PostMessage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PostMessage.vue?vue&type=style&index=0&id=27f13918&prod&lang=css&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"27f13918\",\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\nimport VueRouter from \"vue-router\";\nimport Home from \"../views/Home.vue\";\nimport React16 from \"../views/React16.vue\";\nimport React16Sub from \"../views/React16-sub.vue\";\nimport React17 from \"../views/React17.vue\";\nimport React17Sub from \"../views/React17-sub.vue\";\nimport Vue2 from \"../views/Vue2.vue\";\nimport Vue2Sub from \"../views/Vue2-sub.vue\";\nimport Vite from \"../views/Vite.vue\";\nimport ViteSub from \"../views/Vite-sub.vue\";\nimport Vue3 from \"../views/Vue3.vue\";\nimport Vue3Sub from \"../views/Vue3-sub.vue\";\nimport Angular12 from \"../views/Angular12.vue\";\nimport Multiple from \"../views/Multiple.vue\";\nimport PostMessage from \"../views/PostMessage.vue\";\n\nconst basename = process.env.NODE_ENV === \"production\" ? \"/demo-main-vue/\" : \"\";\n\nVue.use(VueRouter);\n\nconst routes = [\n  {\n    path: \"/home\",\n    name: \"home\",\n    component: Home,\n  },\n  {\n    path: \"/react16\",\n    name: \"react16\",\n    component: React16,\n  },\n  {\n    path: \"/react16-sub/:path\",\n    name: \"react16-sub\",\n    component: React16Sub,\n  },\n  {\n    path: \"/react17\",\n    name: \"react17\",\n    component: React17,\n  },\n  {\n    path: \"/react17-sub/:path\",\n    name: \"react17-sub\",\n    component: React17Sub,\n  },\n  {\n    path: \"/vue2\",\n    name: \"vue2\",\n    component: Vue2,\n  },\n  {\n    path: \"/vue2-sub/:path\",\n    name: \"vue2-sub\",\n    component: Vue2Sub,\n  },\n  {\n    path: \"/vite\",\n    name: \"vite\",\n    component: Vite,\n  },\n  {\n    path: \"/vite-sub/:path\",\n    name: \"vite-sub\",\n    component: ViteSub,\n  },\n  {\n    path: \"/vue3\",\n    name: \"vue3\",\n    component: Vue3,\n  },\n  {\n    path: \"/vue3-sub/:path\",\n    name: \"vue3-sub\",\n    component: Vue3Sub,\n  },\n  {\n    path: \"/angular12\",\n    name: \"angular12\",\n    component: Angular12,\n  },\n  {\n    path: \"/all\",\n    name: \"all\",\n    component: Multiple,\n  },\n  {\n    path: \"/postmessage\",\n    name: \"postmessage\",\n    component: PostMessage,\n  },\n  {\n    path: \"/\",\n    redirect: \"/home\",\n  },\n];\n\nconst router = new VueRouter({\n  mode: \"history\",\n  base: basename,\n  routes,\n});\n\nexport default router;\n","// credentialsinclude\nexport default function fetch(url, options) {\n  console.log(\"fetch\", url, options);\n  return window.fetch(url, { ...options, credentials: \"omit\" });\n}\n","const lifecycles = {\n  beforeLoad: (appWindow) => console.log(`${appWindow.__WUJIE.id} beforeLoad `),\n  beforeMount: (appWindow) => console.log(`${appWindow.__WUJIE.id} beforeMount `),\n  afterMount: (appWindow) => console.log(`${appWindow.__WUJIE.id} afterMount `),\n  beforeUnmount: (appWindow) => console.log(`${appWindow.__WUJIE.id} beforeUnmount `),\n  afterUnmount: (appWindow) => console.log(`${appWindow.__WUJIE.id} afterUnmount `),\n  activated: (appWindow) => console.log(`${appWindow.__WUJIE.id} activated `),\n  deactivated: (appWindow) => console.log(`${appWindow.__WUJIE.id} deactivated `),\n  loadError: (url, e) => console.log(`${url} `, e),\n};\n\nexport default lifecycles;\n","const plugins = [\n  {\n    htmlLoader: (code) => {\n      console.log(\"html-loader\");\n      return code;\n    },\n    jsBeforeLoaders: [\n      {\n        callback(appWindow) {\n          console.log(\"js-before-loader-callback\", appWindow.__WUJIE.id);\n        },\n      },\n    ],\n    jsLoader: (code, url) => {\n      console.log(\"js-loader\", url);\n      return code;\n    },\n    jsAfterLoaders: [\n      {\n        callback(appWindow) {\n          console.log(\"js-after-loader-callback\", appWindow.__WUJIE.id);\n        },\n      },\n    ],\n    cssBeforeLoaders: [\n      //html\n      { src: \"https://vfiles.gtimg.cn/wuji_dashboard/xy/test_wuji_damy/HDaBURp7.css\" },\n      //html\n      { content: \"img{width: 300px}\" },\n    ],\n    cssLoader: (code, url) => {\n      console.log(\"css-loader\", url, code.slice(0, 50) + \"...\");\n      return code;\n    },\n    cssAfterLoaders: [\n      //html\n      { src: \"https://vfiles.gtimg.cn/wuji_dashboard/xy/test_wuji_damy/FQsK8IN6.css\" },\n      //html\n      { content: \"img{height: 300px}\" },\n    ],\n  },\n];\n\nexport default plugins;\n","import \"whatwg-fetch\"; // fetch polyfill\nimport \"custom-event-polyfill\";\n\nimport Vue from \"vue\";\nimport App from \"./App.vue\";\nimport router from \"./router\";\nimport WujieVue from \"wujie-vue2\";\nimport hostMap from \"./hostMap\";\nimport credentialsFetch from \"./fetch\";\nimport Switch from \"ant-design-vue/es/switch\";\nimport Tooltip from \"ant-design-vue/es/tooltip\";\nimport button from \"ant-design-vue/es/button/index\";\nimport Icon from \"ant-design-vue/es/icon/index\";\nimport \"ant-design-vue/es/button/style/index.css\";\nimport \"ant-design-vue/es/style/index.css\";\nimport \"ant-design-vue/es/switch/style/index.css\";\nimport \"ant-design-vue/es/tooltip/style/index.css\";\nimport \"ant-design-vue/es/icon/style/index.css\";\nimport lifecycles from \"./lifecycle\";\nimport plugins from \"./plugin\";\n\nconst isProduction = process.env.NODE_ENV === \"production\";\nconst { setupApp, preloadApp, bus } = WujieVue;\nVue.use(WujieVue).use(Switch).use(Tooltip).use(button).use(Icon);\n\nVue.config.productionTip = false;\n\nbus.$on(\"click\", (msg) => window.alert(msg));\n\n//  xxx-sub \nbus.$on(\"sub-route-change\", (name, path) => {\n  const mainName = `${name}-sub`;\n  const mainPath = `/${name}-sub${path}`;\n  const currentName = router.currentRoute.name;\n  const currentPath = router.currentRoute.path;\n  if (mainName === currentName && mainPath !== currentPath) {\n    router.push({ path: mainPath });\n  }\n});\n\nconst degrade = window.localStorage.getItem(\"degrade\") === \"true\" || !window.Proxy || !window.CustomElementRegistry;\nconst props = {\n  jump: (name) => {\n    router.push({ name });\n  },\n};\n/**\n *  attrs\n *  iframe  srcgithub pages csp\n *  host+port\n */\nconst attrs = isProduction ? { src: hostMap(\"//localhost:8000/\") } : {};\n/**\n * \n * preloadAppstartApp\n */\nsetupApp({\n  name: \"react16\",\n  url: hostMap(\"//localhost:7600/\"),\n  attrs,\n  exec: true,\n  props,\n  fetch: credentialsFetch,\n  plugins,\n  prefix: { \"prefix-dialog\": \"/dialog\", \"prefix-location\": \"/location\" },\n  degrade,\n  ...lifecycles,\n});\n\nsetupApp({\n  name: \"react17\",\n  url: hostMap(\"//localhost:7100/\"),\n  attrs,\n  exec: true,\n  alive: true,\n  props,\n  fetch: credentialsFetch,\n  degrade,\n  ...lifecycles,\n});\n\nsetupApp({\n  name: \"vue2\",\n  url: hostMap(\"//localhost:7200/\"),\n  attrs,\n  exec: true,\n  props,\n  fetch: credentialsFetch,\n  degrade,\n  ...lifecycles,\n});\n\nsetupApp({\n  name: \"vue3\",\n  url: hostMap(\"//localhost:7300/\"),\n  attrs,\n  exec: true,\n  alive: true,\n  plugins: [{ cssExcludes: [\"https://stackpath.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\"] }],\n  props,\n  // credentials\n  fetch: (url, options) =>\n    url.includes(hostMap(\"//localhost:7300/\")) ? credentialsFetch(url, options) : window.fetch(url, options),\n  degrade,\n  ...lifecycles,\n});\n\nsetupApp({\n  name: \"angular12\",\n  url: hostMap(\"//localhost:7400/\"),\n  attrs,\n  exec: true,\n  props,\n  fetch: credentialsFetch,\n  degrade,\n  ...lifecycles,\n});\n\nsetupApp({\n  name: \"vite\",\n  url: hostMap(\"//localhost:7500/\"),\n  attrs,\n  exec: true,\n  props,\n  fetch: credentialsFetch,\n  degrade,\n  ...lifecycles,\n});\n\nif (window.localStorage.getItem(\"preload\") !== \"false\") {\n  preloadApp({\n    name: \"react16\",\n  });\n  preloadApp({\n    name: \"react17\",\n  });\n  preloadApp({\n    name: \"vue2\",\n  });\n  preloadApp({\n    name: \"angular12\",\n  });\n  if (window.Proxy) {\n    preloadApp({\n      name: \"vue3\",\n    });\n    preloadApp({\n      name: \"vite\",\n    });\n  }\n}\n\nnew Vue({\n  router,\n  render: (h) => h(App),\n}).$mount(\"#app\");\n","export * from \"-!../../../node_modules/.pnpm/mini-css-extract-plugin@0.9.0_webpack@4.46.0/node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@3.0.0/node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&id=4d00876c&prod&lang=css&\"","export * from \"-!../../../../node_modules/.pnpm/mini-css-extract-plugin@0.9.0_webpack@4.46.0/node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@3.0.0/node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/index.js??vue-loader-options!./PostMessage.vue?vue&type=style&index=0&id=27f13918&prod&lang=css&scoped=true&\"","export * from \"-!../../../../node_modules/.pnpm/mini-css-extract-plugin@0.9.0_webpack@4.46.0/node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@3.0.0/node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/.pnpm/vue-loader@15.10.0_cache-loader@4.1.0_css-loader@3.6.0_vue-template-compiler@2.7.10_webpack@4.46.0/node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&id=72f0e334&prod&scoped=true&lang=css&\""],"sourceRoot":""}