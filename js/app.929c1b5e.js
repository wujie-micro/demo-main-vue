(function(e){function t(t){for(var o,c,l=t[0],s=t[1],a=t[2],d=0,f=[];d<l.length;d++)c=l[d],Object.prototype.hasOwnProperty.call(r,c)&&r[c]&&f.push(r[c][0]),r[c]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);u&&u(t);while(f.length)f.shift()();return i.push.apply(i,a||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,l=1;l<n.length;l++){var s=n[l];0!==r[s]&&(o=!1)}o&&(i.splice(t--,1),e=c(c.s=n[0]))}return e}var o={},r={app:0},i=[];function c(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=o,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)c.d(n,o,function(t){return e[t]}.bind(null,o));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var a=0;a<l.length;a++)t(l[a]);var u=s;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},"068e":function(e,t,n){},2154:function(e,t,n){"use strict";n("ed34")},"56d7":function(e,t,n){"use strict";n.r(t);n("caad");var o=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{class:e.active?"active":"",attrs:{id:"nav"},on:{click:e.close}},[n("router-link",{attrs:{to:"/home"}},[e._v("介绍")]),n("router-link",{attrs:{to:"/react16"}},[e._v("react16")]),n("router-link",{attrs:{to:"/react17"}},[e._v(" react17 "),n("span",{staticClass:"alive"},[e._v("保活")])]),n("router-link",{attrs:{to:"/vue2"}},[e._v("vue2")]),n("router-link",{attrs:{to:"/vue3"}},[e._v(" vue3 "),n("span",{staticClass:"alive"},[e._v("保活")])]),n("router-link",{attrs:{to:"/vite"}},[e._v("vite")]),n("router-link",{attrs:{to:"/angular12"}},[e._v("angular12")]),n("router-link",{attrs:{to:"/all"}},[e._v("all")]),n("a-button",{staticClass:"menu-icon",attrs:{type:"primary",icon:"unordered-list",size:"large"},on:{click:function(t){t.stopPropagation(),e.active=!e.active}}})],1),n("div",{staticClass:"content",on:{click:function(t){e.active=!1}}},[n("router-view")],1)])},i=[],c={name:"App",data(){return{active:!1}},methods:{close(){this.active&&(this.active=!1)}}},l=c,s=(n("034f"),n("2877")),a=Object(s["a"])(l,r,i,!1,null,null,null),u=a.exports,d=n("8c4f"),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("div",{staticClass:"tool"},[n("a-button",{staticClass:"button-gap",staticStyle:{visibility:"hidden"},attrs:{type:"primary",icon:"unordered-list",size:"large"}}),n("div",{staticClass:"button-list"},[n("a-tooltip",{attrs:{placement:"top"}},[n("template",{slot:"title"},[e._v("主动降级，去除shadow+proxy")]),n("a-switch",{staticClass:"switch button-gap",attrs:{disabled:e.disable,"checked-children":"降级开","un-checked-children":"降级关"},model:{value:e.degrade,callback:function(t){e.degrade=t},expression:"degrade"}})],2),n("a-tooltip",{attrs:{placement:"top"}},[n("template",{slot:"title"},[e._v("预加载+预执行")]),n("a-switch",{staticClass:"switch button-gap",attrs:{"checked-children":"预加载开","un-checked-children":"预加载关"},model:{value:e.preload,callback:function(t){e.preload=t},expression:"preload"}})],2),n("a-tooltip",{attrs:{placement:"top"}},[n("template",{slot:"title"},[e._v("主应用为hash模式")]),n("a",{staticClass:"docs button-gap",attrs:{href:"https://wujie-micro.github.io/demo-main-react/",target:"_blank"}},[e._v("react主应用")])],2),n("a",{staticClass:"docs button-gap",attrs:{href:"https://github.com/Tencent/wujie",target:"_blank"}},[e._v("仓库")]),n("a",{staticClass:"docs button-gap",attrs:{href:"https://wujie-micro.github.io/doc/",target:"_blank"}},[e._v("文档")])],1)],1),n("h1",{staticClass:"header"},[n("img",{style:{width:"70px",height:"70px","margin-right":"15px"},attrs:{src:"https://vfiles.gtimg.cn/wuji_dashboard/xy/test_wuji_damy/XC5WMbxE.svg"}}),n("span",{staticClass:"bland"},[e._v("无界")])]),n("h2",{staticClass:"subtitle"},[e._v("—极致的微前端框架")]),e._m(0)])},h=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"detail-content"},[n("div",{staticClass:"item"},[n("div",{staticClass:"title"},[e._v("极速 🚀")]),n("div",{staticClass:"detail"},[n("ul",[n("li",[e._v("极致预加载提速")]),n("li",[e._v("应用秒开无白屏")]),n("li",[e._v("应用丝滑般切换")])])])]),n("div",{staticClass:"item"},[n("div",{staticClass:"title"},[e._v("强大 💪")]),n("div",{staticClass:"detail"},[n("ul",[n("li",[e._v("多应用同时激活在线")]),n("li",[e._v("应用级别保活")]),n("li",[e._v("去中心化的通信")])])])]),n("div",{staticClass:"item"},[n("div",{staticClass:"title"},[e._v("简单 🤞")]),n("div",{staticClass:"detail"},[n("ul",[n("li",[e._v("更小的体积")]),n("li",[e._v("精简的API")]),n("li",[e._v("开箱即用")])])])])])}],p={name:"Home",data(){return{preload:"false"!==window.localStorage.getItem("preload"),degrade:"true"===window.localStorage.getItem("degrade")||!window.Proxy||!window.CustomElementRegistry,disable:!window.Proxy||!window.CustomElementRegistry}},watch:{preload(e){window.localStorage.setItem("preload",e),setTimeout(()=>window.location.reload(),1e3)},degrade(e){window.localStorage.setItem("degrade",e),setTimeout(()=>window.location.reload(),1e3)}}},m=p,y=(n("b563"),n("2154"),Object(s["a"])(m,f,h,!1,null,"341fbafa",null)),v=y.exports,w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("WujieVue",{attrs:{width:"100%",height:"100%",name:"react16",url:e.react16Url,sync:!0,fetch:e.fetch,props:e.props,attrs:e.attrs,degrade:e.degrade,plugins:e.plugins,prefix:{"prefix-dialog":"/dialog","prefix-location":"/location"},beforeLoad:e.lifecycles.beforeLoad,beforeMount:e.lifecycles.beforeMount,afterMount:e.lifecycles.afterMount,beforeUnmount:e.lifecycles.beforeUnmount,afterUnmount:e.lifecycles.afterUnmount,activated:e.lifecycles.activated,deactivated:e.lifecycles.deactivated,loadError:e.lifecycles.loadError}})},g=[];const b={"//localhost:7100":"//wujie-micro.github.io/demo-react17/","//localhost:7200":"//wujie-micro.github.io/demo-vue2/","//localhost:7300":"//wujie-micro.github.io/demo-vue3/","//localhost:7400":"//wujie-micro.github.io/demo-angular12/","//localhost:7500":"//wujie-micro.github.io/demo-vite/","//localhost:7600":"//wujie-micro.github.io/demo-react16/"};function E(e){return b[e]}function _(e,t){const n=!e.includes("//vfiles.gtimg.cn/");return window.fetch(e,{...t,credentials:n?"include":"omit"})}const U={beforeLoad:e=>console.log(e.__WUJIE.id+" beforeLoad 生命周期"),beforeMount:e=>console.log(e.__WUJIE.id+" beforeMount 生命周期"),afterMount:e=>console.log(e.__WUJIE.id+" afterMount 生命周期"),beforeUnmount:e=>console.log(e.__WUJIE.id+" beforeUnmount 生命周期"),afterUnmount:e=>console.log(e.__WUJIE.id+" afterUnmount 生命周期"),activated:e=>console.log(e.__WUJIE.id+" activated 生命周期"),deactivated:e=>console.log(e.__WUJIE.id+" deactivated 生命周期"),loadError:(e,t)=>console.log(e+" 加载失败",t)};var x=U;const j=[{htmlLoader:e=>(console.log("html-loader"),e),jsBeforeLoaders:[{callback(e){console.log("js-before-loader-callback",e.__WUJIE.id)}}],jsLoader:(e,t)=>(console.log("js-loader",t),e),jsAfterLoaders:[{callback(e){console.log("js-after-loader-callback",e.__WUJIE.id)}}],cssBeforeLoaders:[{src:"https://vfiles.gtimg.cn/wuji_dashboard/xy/test_wuji_damy/HDaBURp7.css"},{content:"img{width: 300px}"}],cssLoader:(e,t)=>(console.log("css-loader",t,e.slice(0,50)+"..."),e),cssAfterLoaders:[{src:"https://vfiles.gtimg.cn/wuji_dashboard/xy/test_wuji_damy/FQsK8IN6.css"},{content:"img{height: 300px}"}]}];var W=j,L={data(){return{react16Url:E("//localhost:7600"),props:{jump:this.jump},attrs:{src:E("//localhost:7600")},fetch:_,lifecycles:x,degrade:"true"===window.localStorage.getItem("degrade"),plugins:W}},methods:{jump(e){this.$router.push({name:e})}}},M=L,O=Object(s["a"])(M,w,g,!1,null,"5b70e240",null),C=O.exports,P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("WujieVue",{attrs:{width:"100%",height:"100%",name:"react17",url:e.react17Url,sync:!0,alive:!0,fetch:e.fetch,degrade:e.degrade,props:e.props,attrs:e.attrs,beforeLoad:e.lifecycles.beforeLoad,beforeMount:e.lifecycles.beforeMount,afterMount:e.lifecycles.afterMount,beforeUnmount:e.lifecycles.beforeUnmount,afterUnmount:e.lifecycles.afterUnmount,activated:e.lifecycles.activated,deactivated:e.lifecycles.deactivated,loadError:e.lifecycles.loadError}})},I=[],S={data(){return{react17Url:E("//localhost:7100"),props:{jump:this.jump},attrs:{src:E("//localhost:7100")},fetch:_,lifecycles:x,degrade:"true"===window.localStorage.getItem("degrade")}},methods:{jump(e){this.$router.push({name:e})}}},R=S,A=Object(s["a"])(R,P,I,!1,null,"2aca5b5a",null),T=A.exports,D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("WujieVue",{attrs:{width:"100%",height:"100%",name:"vue2",url:e.vue2Url,props:e.props,attrs:e.attrs,sync:!0,fetch:e.fetch,degrade:e.degrade,beforeLoad:e.lifecycles.beforeLoad,beforeMount:e.lifecycles.beforeMount,afterMount:e.lifecycles.afterMount,beforeUnmount:e.lifecycles.beforeUnmount,afterUnmount:e.lifecycles.afterUnmount,activated:e.lifecycles.activated,deactivated:e.lifecycles.deactivated,loadError:e.lifecycles.loadError}})},J=[],$={data(){return{vue2Url:E("//localhost:7200"),attrs:{src:E("//localhost:7200")},props:{jump:this.jump},fetch:_,degrade:"true"===window.localStorage.getItem("degrade"),lifecycles:x}},methods:{jump(e){this.$router.push({name:e})}}},k=$,N=Object(s["a"])(k,D,J,!1,null,"6052c5de",null),B=N.exports,F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("WujieVue",{attrs:{width:"100%",height:"100%",name:"vite",url:e.viteUrl,sync:!0,fetch:e.fetch,props:e.props,attrs:e.attrs,degrade:e.degrade,beforeLoad:e.lifecycles.beforeLoad,beforeMount:e.lifecycles.beforeMount,afterMount:e.lifecycles.afterMount,beforeUnmount:e.lifecycles.beforeUnmount,afterUnmount:e.lifecycles.afterUnmount,activated:e.lifecycles.activated,deactivated:e.lifecycles.deactivated,loadError:e.lifecycles.loadError}})},H=[],Q={data(){return{viteUrl:E("//localhost:7500"),fetch:_,props:{jump:this.jump},attrs:{src:E("//localhost:7500")},degrade:"true"===window.localStorage.getItem("degrade"),lifecycles:x}},methods:{jump(e){this.$router.push({name:e})}}},q=Q,Y=Object(s["a"])(q,F,H,!1,null,"7606f450",null),V=Y.exports,z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("WujieVue",{attrs:{width:"100%",height:"100%",name:"vue3",url:e.vue3Url,sync:!0,fetch:e.fetch,alive:!0,props:e.props,attrs:e.attrs,degrade:e.degrade,beforeLoad:e.lifecycles.beforeLoad,beforeMount:e.lifecycles.beforeMount,afterMount:e.lifecycles.afterMount,beforeUnmount:e.lifecycles.beforeUnmount,afterUnmount:e.lifecycles.afterUnmount,activated:e.lifecycles.activated,deactivated:e.lifecycles.deactivated,loadError:e.lifecycles.loadError,plugins:[{cssExcludes:["https://stackpath.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"]}]}})},K=[],X={data(){return{vue3Url:E("//localhost:7300"),props:{jump:this.jump},attrs:{src:E("//localhost:7300")},lifecycles:x,fetch:(e,t)=>e.includes(E("//localhost:7300"))?_(e,t):window.fetch(e,t),degrade:"true"===window.localStorage.getItem("degrade")}},methods:{jump(e){this.$router.push({name:e})}}},G=X,Z=Object(s["a"])(G,z,K,!1,null,"768b8aa0",null),ee=Z.exports,te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("WujieVue",{staticClass:"angular-container",attrs:{name:"angular12",url:e.url,attrs:e.attrs,fetch:e.fetch,sync:!0,degrade:e.degrade,beforeLoad:e.lifecycles.beforeLoad,beforeMount:e.lifecycles.beforeMount,afterMount:e.lifecycles.afterMount,beforeUnmount:e.lifecycles.beforeUnmount,afterUnmount:e.lifecycles.afterUnmount,activated:e.lifecycles.activated,deactivated:e.lifecycles.deactivated,loadError:e.lifecycles.loadError}})},ne=[],oe={data(){return{url:E("//localhost:7400"),attrs:{src:E("//localhost:7400")},fetch:_,degrade:"true"===window.localStorage.getItem("degrade"),lifecycles:x}}},re=oe,ie=(n("6ebd"),Object(s["a"])(re,te,ne,!1,null,"7fcccadb",null)),ce=ie.exports,le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{height:"100%",width:"100%"}},[n("WujieVue",{staticClass:"item",attrs:{name:"react16",url:e.react16Url,sync:!0,fetch:e.fetch,props:e.props,attrs:e.react16Attrs,degrade:e.degrade,prefix:{"prefix-dialog":"/dialog","prefix-location":"/location"},beforeLoad:e.lifecycles.beforeLoad,beforeMount:e.lifecycles.beforeMount,afterMount:e.lifecycles.afterMount,beforeUnmount:e.lifecycles.beforeUnmount,afterUnmount:e.lifecycles.afterUnmount,activated:e.lifecycles.activated,deactivated:e.lifecycles.deactivated,loadError:e.lifecycles.loadError}}),n("WujieVue",{staticClass:"item",attrs:{name:"react17",url:e.react17Url,sync:!0,fetch:e.fetch,props:e.props,attrs:e.react17Attrs,degrade:e.degrade,alive:!0,beforeLoad:e.lifecycles.beforeLoad,beforeMount:e.lifecycles.beforeMount,afterMount:e.lifecycles.afterMount,beforeUnmount:e.lifecycles.beforeUnmount,afterUnmount:e.lifecycles.afterUnmount,activated:e.lifecycles.activated,deactivated:e.lifecycles.deactivated,loadError:e.lifecycles.loadError}}),n("WujieVue",{staticClass:"item",attrs:{name:"vue2",url:e.vue2Url,props:e.props,attrs:e.vue2Attrs,sync:!0,fetch:e.fetch,degrade:e.degrade,beforeLoad:e.lifecycles.beforeLoad,beforeMount:e.lifecycles.beforeMount,afterMount:e.lifecycles.afterMount,beforeUnmount:e.lifecycles.beforeUnmount,afterUnmount:e.lifecycles.afterUnmount,activated:e.lifecycles.activated,deactivated:e.lifecycles.deactivated,loadError:e.lifecycles.loadError}}),n("WujieVue",{staticClass:"item",attrs:{name:"vue3",url:e.vue3Url,sync:!0,fetch:e.vue3Fetch,props:e.props,attrs:e.vue3Attrs,degrade:e.degrade,alive:!0,beforeLoad:e.lifecycles.beforeLoad,beforeMount:e.lifecycles.beforeMount,afterMount:e.lifecycles.afterMount,beforeUnmount:e.lifecycles.beforeUnmount,afterUnmount:e.lifecycles.afterUnmount,activated:e.lifecycles.activated,deactivated:e.lifecycles.deactivated,loadError:e.lifecycles.loadError}}),n("WujieVue",{staticClass:"item",attrs:{name:"vite",url:e.vite,sync:!0,fetch:e.fetch,props:e.props,attrs:e.viteAttrs,degrade:e.degrade,beforeLoad:e.lifecycles.beforeLoad,beforeMount:e.lifecycles.beforeMount,afterMount:e.lifecycles.afterMount,beforeUnmount:e.lifecycles.beforeUnmount,afterUnmount:e.lifecycles.afterUnmount,activated:e.lifecycles.activated,deactivated:e.lifecycles.deactivated,loadError:e.lifecycles.loadError}}),n("WujieVue",{staticClass:"item",attrs:{name:"angular12",url:e.angular12Url,sync:!0,fetch:e.fetch,props:e.props,attrs:e.angular12Attrs,degrade:e.degrade,beforeLoad:e.lifecycles.beforeLoad,beforeMount:e.lifecycles.beforeMount,afterMount:e.lifecycles.afterMount,beforeUnmount:e.lifecycles.beforeUnmount,afterUnmount:e.lifecycles.afterUnmount,activated:e.lifecycles.activated,deactivated:e.lifecycles.deactivated,loadError:e.lifecycles.loadError}})],1)},se=[],ae={data(){return{react16Url:E("//localhost:7600"),react17Url:E("//localhost:7100"),vue2Url:E("//localhost:7200"),vue3Url:E("//localhost:7300"),vite:E("//localhost:7500"),angular12Url:E("//localhost:7400"),react16Attrs:{src:E("//localhost:7600")},react17Attrs:{src:E("//localhost:7100")},vue2Attrs:{src:E("//localhost:7200")},vue3Attrs:{src:E("//localhost:7300")},viteAttrs:{src:E("//localhost:7500")},angular12Attrs:{src:E("//localhost:7400")},props:{jump:this.jump},degrade:"true"===window.localStorage.getItem("degrade"),fetch:_,lifecycles:x,vue3Fetch:(e,t)=>e.includes(E("//localhost:7300"))?_(e,t):window.fetch(e,t)}},methods:{jump(e){this.$router.push({name:e})}}},ue=ae,de=(n("97b6"),Object(s["a"])(ue,le,se,!1,null,"43e2171e",null)),fe=de.exports;const he="/demo-main-vue/";o["a"].use(d["a"]);const pe=[{path:"/home",name:"home",component:v},{path:"/react16",name:"react16",component:C},{path:"/react17",name:"react17",component:T},{path:"/vue2",name:"vue2",component:B},{path:"/vite",name:"vite",component:V},{path:"/vue3",name:"vue3",component:ee},{path:"/angular12",name:"angular12",component:ce},{path:"/all",name:"all",component:fe},{path:"/",redirect:"/home"}],me=new d["a"]({mode:"history",base:he,routes:pe});var ye=me;n("d9e2"),n("13d5");const ve="data-wujie-id",we="data-wujie-Flag",ge="data-wujie-attach-css-flag",be="wujie_iframe",Ee="_wujie_all_event",_e="position: fixed; z-index: 2147483647; visibility: hidden; inset: 0px; backface-visibility: hidden;",Ue="url参数为空",xe="子应用调用reload无法生效",je="此报错可以忽略，iframe主动中断主应用代码在子应用运行",We="事件订阅数量为空",Le="window上不存在fetch属性，需要自行polyfill",Me="监听事件回调函数不存在",Oe="当前浏览器不支持无界，子应用将采用iframe方式渲染",Ce="脚本请求出现错误",Pe="样式请求出现错误",Ie="无界组件短时间重复渲染了两次，可能存在性能问题请检查代码";function Se(e){return"function"===typeof e}function Re(e){return"LINK"===(null===e||void 0===e?void 0:e.toUpperCase())||"STYLE"===(null===e||void 0===e?void 0:e.toUpperCase())||"SCRIPT"===(null===e||void 0===e?void 0:e.toUpperCase())||"IFRAME"===(null===e||void 0===e?void 0:e.toUpperCase())}const Ae=window.Proxy&&window.CustomElementRegistry,Te="function"===typeof document.all&&"undefined"===typeof document.all,De=new WeakMap,Je=e=>{if(De.has(e))return!0;const t=Te?"function"===typeof e&&"undefined"!==typeof e:"function"===typeof e;return t&&De.set(e,t),t},$e=new WeakMap;function ke(e){if($e.has(e))return $e.get(e);const t=0===e.name.indexOf("bound ")&&!e.hasOwnProperty("prototype");return $e.set(e,t),t}const Ne=new WeakMap;function Be(e){const t=e.prototype&&e.prototype.constructor===e&&Object.getOwnPropertyNames(e.prototype).length>1;if(t)return!0;if(Ne.has(e))return Ne.get(e);let n=t;if(!n){const t=e.toString(),o=/^function\b\s[A-Z].*/,r=/^class\b/;n=o.test(t)||r.test(t)}return Ne.set(e,n),n}function Fe(e,t){const n=e[t];if(Je(n)&&!ke(n)&&!Be(n)){const t=Function.prototype.bind.call(n,e);for(const e in n)t[e]=n[e];return n.hasOwnProperty("prototype")&&!t.hasOwnProperty("prototype")&&Object.defineProperty(t,"prototype",{value:n.prototype,enumerable:!1,writable:!0}),t}return n}function He(e){return window.document.querySelector(`iframe[${ve}="${e}"]`)}function Qe(e){if(!e)throw et(Ue),new Error;const t=qe(e),n=t.protocol+"//"+t.host,o=t.pathname+t.search+t.hash;return{urlElement:t,appHostPath:n,appRoutePath:o}}function qe(e){const t=window.document.createElement("a");return t.href=e,t}function Ye(e){const t=e.search.replace("?","").split("&"),n={};return t.forEach(e=>{const[t,o]=e.split("=");t&&o&&(n[t]=o)}),n}function Ve(e){const t=Ye(qe(window.location.href));return Object.keys(t).includes(e)}function ze(e,t,n){const o=e.Element.prototype.setAttribute;t.prototype.setAttribute=function(e,t){let r=t;e===n&&(r=new URL(t,this.baseURI||"").href),o.call(this,e,r)};const r=Object.getOwnPropertyDescriptor(t.prototype,n),{enumerable:i,configurable:c,get:l,set:s}=r;Object.defineProperty(t.prototype,n,{enumerable:i,configurable:c,get:function(){return l.call(this)},set:function(e){s.call(this,new URL(e,this.baseURI).href)}})}function Ke(e,t){var n;let o=qe(window.location.href);const r=Ye(o);o=null;const i=window.decodeURIComponent(r[e]||""),c=null===(n=i.match(/^{([^}]*)}/))||void 0===n?void 0:n[1];return t&&c?i.replace(`{${c}}`,t[c]):i}const Xe=window.requestIdleCallback||(e=>setTimeout(e,1));function Ge(e){return"string"===typeof e?document.querySelector(e):e}function Ze(e,t){null===console||void 0===console||console.warn("[wujie warn]: "+e,t)}function et(e,t){null===console||void 0===console||console.error("[wujie error]: "+e,t)}function tt(e){const t=e.indexOf(">")+1,n=e.lastIndexOf("<");return e.substring(t,n)}function nt(e){if("object"===typeof e)return"/";try{const{origin:t,pathname:n}=new URL(e,location.href),o=n.split("/");return o.pop(),`${t}${o.join("/")}/`}catch(t){return console.warn(t),""}}function ot(e){return function(t,...n){return e.reduce((e,t)=>Se(t)?t(e,...n):e,t||"")}}function rt(e){Promise.resolve().then(e)}function it(e,t,...n){try{e.map(e=>e[t]).filter(e=>Se(e)).forEach(e=>e(...n))}catch(o){et(o)}}const ct=/(<script[\s\S]*?>)[\s\S]*?<\/script>/gi,lt=/<(script)\s+((?!type=('|")text\/ng-template\3).)*?>.*?<\/\1>/is,st=/.*\ssrc=('|")?([^>'"\s]+)/,at=/.*\stype=('|")?([^>'"\s]+)/,ut=/.*\sentry\s*.*/,dt=/.*\sasync\s*.*/,ft=/.*\sdefer\s*.*/,ht=/.*\snomodule\s*.*/,pt=/.*\stype=('|")?module('|")?\s*.*/,mt=/<(link)\s+.*?>/gis,yt=/\srel=('|")?(preload|prefetch|modulepreload)\1/,vt=/.*\shref=('|")?([^>'"\s]+)/,wt=/.*\sas=('|")?font\1.*/,gt=/<style[^>]*>[\s\S]*?<\/style>/gi,bt=/\s+rel=('|")?stylesheet\1.*/,Et=/.*\shref=('|")?([^>'"\s]+)/,_t=/<!--([\s\S]*?)-->/g,Ut=/<link(\s+|\s+.+\s+)ignore(\s*|\s+.*|=.*)>/is,xt=/<style(\s+|\s+.+\s+)ignore(\s*|\s+.*|=.*)>/is,jt=/<script(\s+|\s+.+\s+)ignore(\s*|\s+.*|=.*)>/is,Wt=/.*\scrossorigin=?('|")?(use-credentials|anonymous)?('|")?/i;function Lt(e){return e.startsWith("//")||e.startsWith("http://")||e.startsWith("https://")}function Mt(e,t){return new URL(e,t).toString()}function Ot(e){const t=["text/javascript","module","application/javascript","text/ecmascript","application/ecmascript"];return!e||-1!==t.indexOf(e)}function Ct(){const e=window.document.createElement("script");return"noModule"in e}const Pt=(e,t=!1)=>`\x3c!-- ${t?"prefetch/preload/modulepreload":""} link ${e} replaced by wujie --\x3e`,It=e=>`\x3c!-- inline-style-${e} replaced by wujie --\x3e`,St=(e,t="")=>`\x3c!-- ${t} script ${e} replaced by wujie --\x3e`,Rt="\x3c!-- inline scripts replaced by wujie --\x3e",At=e=>`\x3c!-- ignore asset ${e||"file"} replaced by wujie --\x3e`,Tt=(e,t)=>`\x3c!-- ${t?"nomodule":"module"} script ${e} ignored by wujie --\x3e`;function Dt(e,t,n){const o=[],r=[];let i=null;const c=Ct(),l=e.replace(_t,"").replace(mt,e=>{const n=!!e.match(bt);if(n){const n=e.match(Et),o=e.match(Ut);if(n){const e=n&&n[2];let i=e;return e&&!Lt(e)&&(i=Mt(e,t)),o?At(i):(r.push({src:i}),Pt(i))}}const o=e.match(yt)&&e.match(vt)&&!e.match(wt);if(o){const[,,t]=e.match(vt);return Pt(t,!0)}return e}).replace(gt,e=>{if(xt.test(e))return At("style file");{const t=tt(e);return r.push({src:"",content:t}),It(r.length-1)}}).replace(ct,(e,n)=>{const r=n.match(jt),l=!!n.match(pt),s=n.match(Wt),a=(null===s||void 0===s?void 0:s[2])||"",u=c&&!!n.match(ht)||!c&&l,d=n.match(at),f=d&&d[2];if(!Ot(f))return e;if(lt.test(e)&&n.match(st)){const d=n.match(ut),f=n.match(st);let h=f&&f[2];if(i&&d)throw new SyntaxError("You should not set multiply entry script!");if(h&&!Lt(h)&&(h=Mt(h,t)),i=i||d&&h,r)return At(h||"js file");if(u)return Tt(h||"js file",c);if(h){const e=!!n.match(dt),t=!!n.match(ft);return o.push(e||t?{async:e,defer:t,src:h,module:l,crossorigin:!!s,crossoriginType:a}:{src:h,module:l,crossorigin:!!s,crossoriginType:a}),St(h,(e?"async":t&&"defer")||"")}return e}{if(r)return At("js file");if(u)return Tt("js file",c);const t=tt(e),n=t.split(/[\r\n]+/).every(e=>!e.trim()||e.trim().startsWith("//"));return!n&&t&&o.push({src:null,content:t,module:l,crossorigin:!!s,crossoriginType:a}),Rt}});let s={template:l,scripts:o,styles:r,entry:i||o[o.length-1]};return"function"===typeof n&&(s=n(s)),s}var Jt=function(e,t,n,o){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function c(e){try{s(o.next(e))}catch(t){i(t)}}function l(e){try{s(o["throw"](e))}catch(t){i(t)}}function s(e){e.done?n(e.value):r(e.value).then(c,l)}s((o=o.apply(e,t||[])).next())}))};const $t={},kt={},Nt={};if(!window.fetch)throw et(Le),new Error;const Bt=window.fetch.bind(window);function Ft(e){return e}function Ht(e,t,n){return Jt(this,void 0,void 0,(function*(){const o=ot(e.plugins.map(e=>e.cssLoader)),r=n().map(({src:e,contentPromise:t})=>({src:e,contentPromise:t.then(t=>o(t,e))})),i=yield Qt(t,r);return e.replace?e.replace(i):i}))}function Qt(e,t){return Jt(this,void 0,void 0,(function*(){let n=e;return Promise.all(t.map((e,t)=>e.contentPromise.then(o=>{e.src?n=n.replace(Pt(e.src),`<style>/* ${e.src} */${o}</style>`):o&&(n=n.replace(It(t),`<style>/* inline-style-${t} */${o}</style>`))}))).then(()=>n)}))}const qt=e=>e.startsWith("<"),Yt=(e,t,n,o,r)=>t[e]||(t[e]=n(e).then(n=>{if(n.status>=400){if(t[e]=null,o)return et(Pe,{src:e,response:n}),null===r||void 0===r||r(e,new Error(Pe)),"";throw et(Ce,{src:e,response:n}),null===r||void 0===r||r(e,new Error(Ce)),new Error(Ce)}return n.text()}).catch(n=>{if(t[e]=null,o)return et(Pe,e),null===r||void 0===r||r(e,n),"";throw et(Ce,e),null===r||void 0===r||r(e,n),n}));function Vt(e,t=Bt,n){return e.map(({src:e,content:o})=>o?{src:"",contentPromise:Promise.resolve(o)}:qt(e)?{src:"",contentPromise:Promise.resolve(tt(e))}:{src:e,contentPromise:Yt(e,$t,t,!0,n)})}function zt(e,t=Bt,n){return e.map(e=>{const{src:o,async:r,defer:i,module:c}=e;let l=null;return l=(r||i)&&o&&!c?new Promise((e,r)=>Xe(()=>Yt(o,kt,t,!1,n).then(e,r))):c&&o?Promise.resolve(""):o?Yt(o,kt,t,!1,n):Promise.resolve(e.content),Object.assign(Object.assign({},e),{contentPromise:l})})}function Kt(e,t){var n;const o=null!==(n=t.fetch)&&void 0!==n?n:Bt,{plugins:r,loadError:i}=t,c=r?ot(r.map(e=>e.htmlLoader)):Ft,l=r?r.map(e=>e.jsExcludes).reduce((e,t)=>e.concat(t),[]).filter(e=>e):[],s=r?r.map(e=>e.cssExcludes).reduce((e,t)=>e.concat(t),[]).filter(e=>e):[],a=nt,u=(e,t)=>o(e).then(e=>e.text(),t=>(null===i||void 0===i||i(e,t),Promise.reject(t))).then(n=>{const r=a(e),{template:c,scripts:u,styles:d}=Dt(t(n),r);return{template:c,assetPublicPath:r,getExternalScripts:()=>zt(u.filter(e=>!e.src||!l.length||!l.includes(e.src)),o,i),getExternalStyleSheets:()=>Vt(d.filter(e=>!e.src||!s.length||!s.includes(e.src)),o,i)}});return(null===t||void 0===t?void 0:t.plugins.some(e=>e.htmlLoader))?u(e,c):Nt[e]||(Nt[e]=u(e,c))}const Xt=window.__POWERED_BY_WUJIE__?window.__WUJIE.inject.idToSandboxMap:new Map;function Gt(e){return Xt.get(e)||null}function Zt(e,t){Xt.set(e,t)}function en(e){Xt.delete(e)}const tn={modifyLocalProperties:["createElement","createTextNode","documentURI","URL","getElementsByTagName"],modifyProperties:["createElement","createTextNode","documentURI","URL","getElementsByTagName","getElementsByClassName","getElementsByName","getElementById","querySelector","querySelectorAll","documentElement","scrollingElement","forms","images","links"],shadowProperties:["activeElement","childElementCount","children","firstElementChild","firstChild","fullscreenElement","lastElementChild","pictureInPictureElement","pointerLockElement","styleSheets"],shadowMethods:["append","contains","getSelection","elementFromPoint","elementsFromPoint","getAnimations","replaceChildren"],documentProperties:["characterSet","compatMode","contentType","designMode","dir","doctype","embeds","fullscreenEnabled","hidden","implementation","lastModified","pictureInPictureEnabled","plugins","readyState","referrer","visibilityState","fonts"],documentMethods:["execCommand","createRange","exitFullscreen","exitPictureInPicture","getElementsByTagNameNS","hasFocus","prepend"],documentEvents:["onreadystatechange","onpointerlockchange","onpointerlockerror","onbeforecopy","onbeforecut","onbeforepaste","onfreeze","onresume","onsearch","onfullscreenchange","onfullscreenerror","onsecuritypolicyviolation","onvisibilitychange"],ownerProperties:["head","body"]},nn=["DOMContentLoaded","fullscreenchange","fullscreenerror","readystatechange","scroll","selectionchange","visibilitychange","wheel"],on=["gotpointercapture","lostpointercapture"],rn=["hashchange","popstate"],cn={IMG:"src",A:"href",SOURCE:"src"},ln=["getComputedStyle","visualViewport","matchMedia","DOMParser"],sn=[/animationFrame$/i,/resizeObserver$|mutationObserver$|intersectionObserver$/i,/height$|width$|left$/i,/^screen/i,/X$|Y$/],an=HTMLElement.prototype.appendChild,un=HTMLElement.prototype.removeChild,dn=HTMLHeadElement.prototype.insertBefore,fn=HTMLBodyElement.prototype.insertBefore,hn=Window.prototype.addEventListener,pn=Window.prototype.removeEventListener,mn=Node.prototype.appendChild,yn=window.__POWERED_BY_WUJIE__?window.__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR__:Document.prototype.querySelector;function vn(e,t){return Object.defineProperties(e,{srcElement:{get:t},target:{get:t}}),e}function wn(e,t){const n=new CustomEvent(t),o=vn(n,()=>e);Se(e["on"+t])?e["on"+t](o):e.dispatchEvent(o)}function gn(e,t){if(!e.innerHTML||t.degrade)return;const n=An([e.sheet]);n&&t.shadowRoot.head.appendChild(n)}function bn(e,t,n){const o=Object.getOwnPropertyDescriptor(Element.prototype,"innerHTML"),r=Object.getOwnPropertyDescriptor(HTMLElement.prototype,"innerText"),i=Object.getOwnPropertyDescriptor(Node.prototype,"textContent");Object.defineProperties(e,{innerHTML:{get:function(){return o.get.call(e)},set:function(r){o.set.call(e,t(r)),rt(()=>gn(this,n))}},innerText:{get:function(){return r.get.call(e)},set:function(o){r.set.call(e,t(o)),rt(()=>gn(this,n))}},textContent:{get:function(){return i.get.call(e)},set:function(o){i.set.call(e,t(o)),rt(()=>gn(this,n))}},appendChild:{value:function(o){return rt(()=>gn(this,n)),o.nodeType===Node.TEXT_NODE?mn.call(e,e.ownerDocument.createTextNode(t(o.textContent))):mn(o)}}})}function En(e){return function(t,n){var o,r;let i=t;const{rawDOMAppendOrInsertBefore:c,wujieId:l}=e,s=Gt(l);if(!Re(i.tagName)||!l)return c.call(this,i,n);const{styleSheetElements:a,replace:u,fetch:d,plugins:f,iframe:h,lifecycles:p}=s,m=h.contentDocument;if(i.tagName)switch(null===(o=i.tagName)||void 0===o?void 0:o.toUpperCase()){case"LINK":{const{href:e}=i;e&&!f.map(e=>e.cssExcludes).reduce((e,t)=>e.concat(t),[]).filter(e=>e).includes(e)&&Vt([{src:e}],d,p.loadError).forEach(({src:e,contentPromise:t})=>t.then(t=>{const o=m.createElement("style");o.innerHTML=ot(f.map(e=>e.cssLoader))(u?u(t):t,e),a.push(o),gn(o,s),c.call(this,o,n),wn(i,"load"),i=null},()=>{wn(i,"error"),i=null}));const t=m.createComment(`dynamic link ${e} replaced by wujie`);return c.call(this,t,n)}case"STYLE":{const e=t;a.push(e);const o=e.innerHTML,r=e=>ot(f.map(e=>e.cssLoader))(u?u(e):e);return o&&(e.innerHTML=r(o)),bn(e,r,s),gn(e,s),c.call(this,i,n)}case"SCRIPT":{const{src:e,text:t}=i;if(e&&!f.map(e=>e.jsExcludes).reduce((e,t)=>e.concat(t),[]).filter(e=>e).includes(e)){const t=e=>{if(null===s.iframe)return Ze(Ie);ro(e,s.iframe.contentWindow),wn(i,"load"),i=null};zt([{src:e}],d,p.loadError).forEach(e=>e.contentPromise.then(n=>{var o;if(null===s.execQueue)return Ze(Ie);const r=null===(o=s.execQueue)||void 0===o?void 0:o.length;s.execQueue.push(()=>s.fiber?Xe(()=>{t(Object.assign(Object.assign({},e),{content:n}))}):t(Object.assign(Object.assign({},e),{content:n}))),r||s.execQueue.shift()()},()=>{wn(i,"error"),i=null}))}else{const e=null===(r=s.execQueue)||void 0===r?void 0:r.length;s.execQueue.push(()=>Xe(()=>{ro({src:null,content:t},s.iframe.contentWindow)})),e||s.execQueue.shift()()}const o=m.createComment(`dynamic script ${e} replaced by wujie`);return c.call(this,o,n)}case"IFRAME":{if(""===i.getAttribute(we))return mn.call(yn.call(this.ownerDocument,"html"),i);const e=c.call(this,i,n);try{if(!i.getAttribute(ve)){const e=i.contentWindow.document.createElement("script");e.type="text/javascript",e.innerHTML=`Array.prototype.slice.call(window.parent.frames).some(iframe => {if(iframe.name === '${l}'){window.parent = iframe;return true};return false})`,i.contentDocument.head.insertBefore(e,i.contentDocument.head.firstChild)}}catch(y){et(y)}return e}default:}}}function _n(e,t){e.head.appendChild=En({rawDOMAppendOrInsertBefore:mn,wujieId:t}),e.head.insertBefore=En({rawDOMAppendOrInsertBefore:dn,wujieId:t}),e.body.appendChild=En({rawDOMAppendOrInsertBefore:mn,wujieId:t}),e.body.insertBefore=En({rawDOMAppendOrInsertBefore:fn,wujieId:t})}var Un=function(e,t,n,o){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function c(e){try{s(o.next(e))}catch(t){i(t)}}function l(e){try{s(o["throw"](e))}catch(t){i(t)}}function s(e){e.done?n(e.value):r(e.value).then(c,l)}s((o=o.apply(e,t||[])).next())}))};const xn={":root":":host"};class jn extends HTMLElement{connectedCallback(){if(this.shadowRoot)return;const e=this.attachShadow({mode:"open"}),t=Gt(this.getAttribute(ve));no(e,t.iframe.contentWindow),t.shadowRoot=e}disconnectedCallback(){const e=Gt(this.getAttribute(ve));e.unmount()}}function Wn(){customElements.get("wujie-app")||customElements.define("wujie-app",jn)}function Ln(e){const t=window.document.createElement("wujie-app");return t.setAttribute(ve,e),t.classList.add(be),t}function Mn(e,t){const n=Ge(t);return n&&!n.contains(e)&&(Rn(n),e&&an.call(n,e)),n}function On(e,t){return Un(this,void 0,void 0,(function*(){const n=e.iframe.contentDocument,{plugins:o,replace:r}=e,i=(e,t)=>ot(o.map(e=>e.cssLoader))(r?r(e):e,t),c=e.plugins.map(e=>e.cssBeforeLoaders).reduce((e,t)=>e.concat(t),[]).filter(e=>"object"===typeof e).reverse(),l=e.plugins.map(e=>e.cssAfterLoaders).reduce((e,t)=>e.concat(t),[]).filter(e=>"object"===typeof e);return yield Promise.all([Promise.all(Vt(c,e.fetch,e.lifecycles.loadError).map(({src:e,contentPromise:t})=>t.then(t=>({src:e,content:t})))).then(e=>{e.forEach(({src:e,content:o})=>{var r;if(!o)return;const c=n.createElement("style");c.setAttribute("type","text/css"),c.appendChild(n.createTextNode(o?i(o,e):o));const l=t.querySelector("head");null===l||void 0===l||l.insertBefore(c,null===(r=t.querySelector("head"))||void 0===r?void 0:r.firstChild)})}),Promise.all(Vt(l,e.fetch,e.lifecycles.loadError).map(({src:e,contentPromise:t})=>t.then(t=>({src:e,content:t})))).then(e=>{e.forEach(({src:e,content:o})=>{if(!o)return;const r=n.createElement("style");r.setAttribute("type","text/css"),r.appendChild(n.createTextNode(o?i(o,e):o)),t.appendChild(r)})})]).then(()=>t,()=>t)}))}function Cn(e,t){const n=e.document,o=n.createElement("html");o.innerHTML=t;const r=n.createTreeWalker(o,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;while(i){no(i,e);const t=cn[i.tagName],n=i[t];t&&i.setAttribute(t,new URL(n,i.baseURI||"").href),i=r.nextNode()}if(!o.querySelector("head")){const e=n.createElement("head");o.appendChild(e)}if(!o.querySelector("body")){const e=n.createElement("body");o.appendChild(e)}return o}function Pn(e,t,n){return Un(this,void 0,void 0,(function*(){const o=Cn(t,n),r=yield On(t.__WUJIE,o);e.appendChild(r);const i=document.createElement("div");i.setAttribute("style",_e),r.insertBefore(i,r.firstChild),e.head=e.querySelector("head"),e.body=e.querySelector("body"),Object.defineProperty(e.firstChild,"parentNode",{enumerable:!0,configurable:!0,get:()=>t.document}),_n(e,t.__WUJIE.id)}))}function In(e){const t=document.createElement("iframe");return t.setAttribute("style","width: 100%; height:100%"),t.setAttribute(ve,e),t}function Sn(e,t,n){return Un(this,void 0,void 0,(function*(){Rn(e);const o=Cn(t,n),r=yield On(t.__WUJIE,o);e.appendChild(r),Object.defineProperty(e.firstElementChild,"parentNode",{enumerable:!0,configurable:!0,get:()=>t.document}),_n(e,t.__WUJIE.id)}))}function Rn(e){while(e.firstChild)un.call(e,e.firstChild)}function An(e){var t,n;const o=[],r=/:root/g;for(let i=0;i<e.length;i++){const c=null!==(n=null===(t=e[i])||void 0===t?void 0:t.cssRules)&&void 0!==n?n:[];for(let e=0;e<c.length;e++){const t=c[e].cssText;r.test(t)&&o.push(t.replace(r,e=>xn[e]))}}if(o.length){const e=window.document.createElement("style");return e.innerHTML=o.join(""),e}}function Tn(e){const{sync:t,id:n,prefix:o}=e.__WUJIE;if(!t)return;const r=e.location.pathname+e.location.search+e.location.hash;let i="";o&&Object.keys(o).forEach(e=>{const t=o[e];r.startsWith(t)&&(!i||t.length>o[i].length)&&(i=e)});let c=qe(window.location.href);const l=Ye(c);l[n]=window.encodeURIComponent(i?r.replace(o[i],`{${i}}`):r);const s="?"+Object.keys(l).map(e=>e+"="+l[e]).join("&");c.search=s,c.href!==window.location.href&&window.history.replaceState(null,"",c.href),c=null}function Dn(e){const{pathname:t,search:n,hash:o}=e.location,{id:r,url:i,sync:c,execFlag:l,prefix:s,inject:a}=e.__WUJIE,u=c&&!l?Ke(r,s):i,d=(/^http/.test(u)?null:u)||i,{appRoutePath:f}=Qe(d),h=t+n+o;h!==f&&e.history.replaceState(null,"",a.mainHostPath+f)}function Jn(){let e=qe(window.location.href);const t=Ye(e);Object.keys(t).forEach(e=>{var n;const o=Gt(e);if(!o)return;const r=o.degrade?!window.document.contains(He(o.id)):!window.document.contains(null===(n=null===o||void 0===o?void 0:o.shadowRoot)||void 0===n?void 0:n.host);o.execFlag&&o.sync&&!o.hrefFlag&&r&&delete t[e]});const n="?"+Object.keys(t).map(e=>e+"="+t[e]).join("&");e.search=n,e.href!==window.location.href&&window.history.replaceState(null,"",e.href),e=null}function $n(e,t){let n=qe(window.location.href);const o=Ye(n);o[e]=window.encodeURIComponent(t);const r="?"+Object.keys(o).map(e=>e+"="+o[e]).join("&");n.search=r,window.history.pushState(null,"",n.href),n=null}function kn(){window.addEventListener("popstate",()=>{let e=qe(window.location.href);const t=Ye(e);e=null,Object.keys(t).map(e=>Gt(e)).filter(e=>e).forEach(e=>{const n=t[e.id],o=yn.call(e.iframe.contentDocument,"body");if(/http/.test(n))e.degrade?(Mn(e.document.firstElementChild,o),io(window.decodeURIComponent(n),He(e.id).parentElement)):io(window.decodeURIComponent(n),e.shadowRoot.host.parentElement),e.hrefFlag=!0;else if(e.hrefFlag){if(e.degrade){const t=In(e.id);Mn(t,e.el),Rn(t.contentDocument),zn(t.contentWindow,e.iframe.contentWindow),t.contentWindow.onunload=()=>{e.unmount()},t.contentDocument.appendChild(o.firstElementChild),e.document=t.contentDocument}else Mn(e.shadowRoot.host,e.el);e.hrefFlag=!1}})})}function Nn(e){e.addEventListener=function(t,n,o){if(it(e.__WUJIE.plugins,"windowAddEventListenerHook",e,t,n,o),rn.includes(t))return hn.call(e,t,n,o);hn.call(window.window,t,n,o)},e.removeEventListener=function(t,n,o){if(it(e.__WUJIE.plugins,"windowRemoveEventListenerHook",e,t,n,o),rn.includes(t))return pn.call(e,t,n,o);pn.call(window.window,t,n,o)}}function Bn(e,t){e.__WUJIE_PUBLIC_PATH__=t+"/",e.$wujie=e.__WUJIE.provide,e.__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR__=e.Document.prototype.querySelector,e.__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR_ALL__=e.Document.prototype.querySelectorAll}function Fn(e,t,n){const o=e.history,r=o.pushState,i=o.replaceState;o.pushState=function(i,c,l){const s=n+e.location.pathname+e.location.search+e.location.hash,a=new URL(null===l||void 0===l?void 0:l.replace(t,""),s).href,u=void 0===l;r.call(o,i,c,u?void 0:a),u||(Hn(e,t,n),Tn(e))},o.replaceState=function(r,c,l){const s=n+e.location.pathname+e.location.search+e.location.hash,a=new URL(null===l||void 0===l?void 0:l.replace(t,""),s).href,u=void 0===l;i.call(o,r,c,u?void 0:a),u||(Hn(e,t,n),Tn(e))}}function Hn(e,t,n){var o;const r=new URL(null===(o=e.location.href)||void 0===o?void 0:o.replace(n,""),t),i=yn.call(e.document,"base");i&&i.setAttribute("href",t+r.pathname)}function Qn(e){function t(t){const n=e[t];try{return"function"!==typeof n||Be(n)?e[t]=window[t]:e[t]=window[t].bind(window),!0}catch(o){return Ze(o.message),!1}}Object.getOwnPropertyNames(e).forEach(n=>{"getSelection"!==n?ln.includes(n)?t(n):sn.some(o=>!(!o.test(n)||!(n in e.parent))&&t(n)):Object.defineProperty(e,n,{get:()=>e.document[n]})});const n=Object.getOwnPropertyNames(window).filter(e=>/^on/.test(e));n.forEach(t=>{const n=Object.getOwnPropertyDescriptor(e,t)||{enumerable:!0,writable:!0};try{Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:!0,get:()=>window[t],set:function(o){(n.writable||n.set)&&(window[t]=null===o||void 0===o?void 0:o.bind(e))}})}catch(t){Ze(t.message)}}),it(e.__WUJIE.plugins,"windowPropertyOverride",e)}function qn(e){const t=e.EventTarget.prototype.addEventListener,n=e.EventTarget.prototype.removeEventListener,o=e.__WUJIE;e.EventTarget.prototype.addEventListener=function(e,n,r){const i=o.elementEventCacheMap.get(this);return i?i.find(e=>e.handler===n)||i.push({type:e,handler:n,options:r}):o.elementEventCacheMap.set(this,[{type:e,handler:n,options:r}]),t.call(this,e,n,r)},e.EventTarget.prototype.removeEventListener=function(e,t,r){const i=o.elementEventCacheMap.get(this);if(i){const e=null===i||void 0===i?void 0:i.findIndex(e=>e.handler===t);i.splice(e,1)}return(null===i||void 0===i?void 0:i.length)||o.elementEventCacheMap.delete(this),n.call(this,e,t,r)}}function Yn(e,t){const n=t.__WUJIE,o=new WeakMap,r=document.createTreeWalker(e);let i=r.currentNode;while(i){const e=n.elementEventCacheMap.get(i);(null===e||void 0===e?void 0:e.length)&&(o.set(i,e),e.forEach(e=>{i.addEventListener(e.type,e.handler,e.options)})),i=r.nextNode()}n.elementEventCacheMap=o}function Vn(e,t,n){const o=n.__WUJIE,r=new WeakMap,i=o.elementEventCacheMap.get(e);(null===i||void 0===i?void 0:i.length)&&(r.set(t,i),i.forEach(e=>{t.addEventListener(e.type,e.handler,e.options)})),o.elementEventCacheMap=r}function zn(e,t){Object.defineProperty(e.Event.prototype,"timeStamp",{get:()=>t.document.createEvent("Event").timeStamp})}function Kn(e){const t=e.__WUJIE,n=new WeakMap,o=new WeakMap;e.Document.prototype.addEventListener=function(r,i,c){let l=n.get(i);const s=o.get(i);return l||(l="function"===typeof i?i.bind(this):i,n.set(i,l)),s?s.includes(r)||s.push(r):o.set(i,[r]),it(e.__WUJIE.plugins,"documentAddEventListenerHook",e,r,l,c),t.degrade?t.document.firstElementChild.addEventListener(r,l,c):nn.includes(r)?window.document.addEventListener(r,l,c):on.includes(r)?(window.document.addEventListener(r,l,c),void t.shadowRoot.addEventListener(r,l,c)):void t.shadowRoot.addEventListener(r,l,c)},e.Document.prototype.removeEventListener=function(r,i,c){const l=n.get(i),s=o.get(i);if(l){if((null===s||void 0===s?void 0:s.includes(r))&&(s.splice(s.indexOf(r),1),s.length||(n.delete(i),o.delete(i))),it(e.__WUJIE.plugins,"documentRemoveEventListenerHook",e,r,l,c),t.degrade)return t.document.firstElementChild.removeEventListener(r,l,c);if(nn.includes(r))return window.document.removeEventListener(r,l,c);if(on.includes(r))return window.document.removeEventListener(r,l,c),void t.shadowRoot.removeEventListener(r,l,c);t.shadowRoot.removeEventListener(r,l,c)}else Ze(Me)};const r=Object.keys(e.HTMLElement.prototype).filter(e=>/^on/.test(e)),i=Object.keys(e.Document.prototype).filter(e=>/^on/.test(e));r.filter(e=>i.includes(e)).forEach(n=>{const o=Object.getOwnPropertyDescriptor(e.Document.prototype,n)||{enumerable:!0,writable:!0};try{Object.defineProperty(e.Document.prototype,n,{enumerable:o.enumerable,configurable:!0,get:()=>(t.degrade?t.document:t.shadowRoot).firstElementChild[n],set:o.writable?o=>{t.degrade?t.document.firstElementChild[n]=o.bind(e.document):t.shadowRoot.firstElementChild[n]=o.bind(e.document)}:void 0})}catch(n){Ze(n.message)}});const{ownerProperties:c,modifyProperties:l,shadowProperties:s,shadowMethods:a,documentProperties:u,documentMethods:d,documentEvents:f}=tn;l.concat(s,a,u,d).forEach(n=>{const o=Object.getOwnPropertyDescriptor(e.Document.prototype,n)||{enumerable:!0,writable:!0};try{Object.defineProperty(e.Document.prototype,n,{enumerable:o.enumerable,configurable:!0,get:()=>t.proxyDocument[n],set:void 0})}catch(r){Ze(r.message)}}),f.forEach(n=>{const o=Object.getOwnPropertyDescriptor(e.Document.prototype,n)||{enumerable:!0,writable:!0};try{Object.defineProperty(e.Document.prototype,n,{enumerable:o.enumerable,configurable:!0,get:()=>(t.degrade?t:window).document[n],set:o.writable?o=>{(t.degrade?t:window).document[n]=o.bind(e.document)}:void 0})}catch(r){Ze(r.message)}}),c.forEach(n=>{Object.defineProperty(e.document,n,{enumerable:!0,configurable:!0,get:()=>t.proxyDocument[n],set:void 0})}),it(e.__WUJIE.plugins,"documentPropertyOverride",e)}function Xn(e){const t=e.Node.prototype.getRootNode;e.Node.prototype.getRootNode=function(n){const o=t.call(this,n);return o===e.__WUJIE.shadowRoot?e.document:o}}function Gn(e){ze(e,e.HTMLImageElement,"src"),ze(e,e.HTMLAnchorElement,"href"),ze(e,e.HTMLSourceElement,"src"),ze(e,e.HTMLLinkElement,"href"),ze(e,e.HTMLScriptElement,"src")}function Zn(e,t){const n=e.document,o=n.createElement("base"),r=qe(e.location.href),i=qe(t);o.setAttribute("href",i.protocol+"//"+i.host+r.pathname),n.head.appendChild(o)}function eo(e){const t=e.document;Rn(t);const n=t.createElement("html");n.innerHTML="<head></head><body></body>",t.appendChild(n),Zn(e,e.__WUJIE.url),Qn(e),Kn(e),Xn(e),Gn(e)}function to(e,t){e.__WUJIE.iframeReady=new Promise(n=>{function o(){setTimeout(()=>{"about:blank"===e.location.href?o():(e.stop(),eo(e),Ve(e.__WUJIE.id)||e.history.replaceState(null,"",t),n())},0)}o()})}function no(e,t){const n=t.__WUJIE.proxyLocation;Object.defineProperty(e,"baseURI",{configurable:!0,get:()=>n.protocol+"//"+n.host+n.pathname,set:void 0}),Object.defineProperty(e,"ownerDocument",{configurable:!0,get:()=>t.document})}function oo(e){e.addEventListener("hashchange",()=>Tn(e)),e.addEventListener("popstate",()=>{Tn(e)})}function ro(e,t){const{src:n,module:o,content:r,crossorigin:i,crossoriginType:c,callback:l}=e,s=t.document.createElement("script"),a=t.document.createElement("script"),{replace:u,plugins:d}=t.__WUJIE;let f=ot(d.map(e=>e.jsLoader))(u?u(r):r,n);r?t.__WUJIE.degrade||o||(f=`(function(window, self, global, location) {\n      ${f}\n}).bind(window.__WUJIE.proxy)(\n  window.__WUJIE.proxy,\n  window.__WUJIE.proxy,\n  window.__WUJIE.proxy,\n  window.__WUJIE.proxyLocation,\n);`):(n&&s.setAttribute("src",n),i&&s.setAttribute("crossorigin",c)),o&&s.setAttribute("type","module"),s.textContent=f||"",a.textContent="if(window.__WUJIE.execQueue && window.__WUJIE.execQueue.length){ window.__WUJIE.execQueue.shift()()}";const h=yn.call(t.document,"head");if(/^<!DOCTYPE html/i.test(f))return et(Ce,e),h.appendChild(a);h.appendChild(s),null===l||void 0===l||l(t),h.appendChild(a)}function io(e,t){const n=window.document.createElement("iframe");n.setAttribute("src",e),n.setAttribute("style","height:100%;width:100%"),Mn(n,t)}function co(e,t,n,o,r){const i=window.document.createElement("iframe"),c=n+r,l=Object.assign(Object.assign({src:n},t),{style:"display: none",name:e.id,[we]:""});Object.keys(l).forEach(e=>i.setAttribute(e,l[e])),window.document.body.appendChild(i);const s=i.contentWindow;return s.__WUJIE=e,Bn(s,o),to(s,c),Fn(s,o,n),Nn(s),s.__WUJIE.degrade&&qn(s),oo(s),i}function lo(e,t,n){const{shadowRoot:o,id:r,degrade:i,document:c}=e.contentWindow.__WUJIE;let l=t;if(!/^http/.test(l)){let e=qe(l);l=n+e.pathname+e.search+e.hash,e=null}if(e.contentWindow.__WUJIE.hrefFlag=!0,i){const t=yn.call(e.contentDocument,"body");Mn(c.firstElementChild,t),io(window.decodeURIComponent(l),He(r).parentElement)}else io(l,o.host.parentElement);return $n(r,l),!0}function so(e,t,n,o){const r=new Proxy(e.contentWindow,{get:(e,t)=>"location"===t?e.__WUJIE.proxyLocation:"self"===t?e.__WUJIE.proxy:"__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR__"===t||"__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR_ALL__"===t?e[t]:Fe(e,t),set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>t in e}),i=new Proxy({},{get:function(t,n){var o;const r=window.document,i=e.contentWindow.__WUJIE.shadowRoot;if("createElement"===n||"createTextNode"===n)return new Proxy(r[n],{apply(t,n,o){const r=t.apply(e.contentDocument,o);return no(r,e.contentWindow),r}});if("documentURI"===n||"URL"===n)return e.contentWindow.__WUJIE.proxyLocation.href;if("getElementsByTagName"===n||"getElementsByClassName"===n||"getElementsByName"===n)return new Proxy(i.querySelectorAll,{apply(t,o,r){let c=r[0];return"getElementsByTagName"===n&&"script"===c?e.contentDocument.scripts:("getElementsByClassName"===n&&(c="."+c),"getElementsByName"===n&&(c=`[name="${c}"]`),t.call(i,c))}});if("getElementById"===n)return new Proxy(i.querySelector,{apply(e,t,n){return e.call(i,`[id="${n[0]}"]`)}});if("querySelector"===n||"querySelectorAll"===n)return i[n].bind(i);if("documentElement"===n||"scrollingElement"===n)return i.firstElementChild;if("forms"===n)return i.querySelectorAll("form");if("images"===n)return i.querySelectorAll("img");if("links"===n)return i.querySelectorAll("a");const{ownerProperties:c,shadowProperties:l,shadowMethods:s,documentProperties:a,documentMethods:u}=tn;return c.concat(l).includes(n.toString())?"activeElement"===n&&null===i.activeElement?i.body:i[n]:s.includes(n.toString())?null!==(o=Fe(i,n))&&void 0!==o?o:Fe(r,n):a.includes(n.toString())?r[n]:u.includes(n.toString())?Fe(r,n):void 0}}),c=new Proxy({},{get:function(r,i){const c=e.contentWindow.location;return"host"===i||"hostname"===i||"protocol"===i||"port"===i?t[i]:"href"===i?c[i].replace(n,o):"reload"===i?(Ze(xe),()=>null):Fe(c,i)},set:function(t,n,r){return"href"===n?lo(e,r,o):(e.contentWindow.location[n]=r,!0)},ownKeys:function(){return Object.keys(e.contentWindow.location).filter(e=>"reload"!==e)},getOwnPropertyDescriptor:function(e,t){return{enumerable:!0,configurable:!0,value:this[t]}}});return{proxyWindow:r,proxyDocument:i,proxyLocation:c}}function ao(e,t,n,o){const r={},i=e.contentWindow.__WUJIE;Object.defineProperties(r,{createElement:{get:()=>function(...t){const n=window.document.createElement.apply(e.contentDocument,t);return no(n,e.contentWindow),n}},createTextNode:{get:()=>function(...t){const n=window.document.createTextNode.apply(e.contentDocument,t);return no(n,e.contentWindow),n}},documentURI:{get:()=>i.proxyLocation.href},URL:{get:()=>i.proxyLocation.href},getElementsByTagName:{get(){return function(...t){const n=t[0];return"script"===n?e.contentDocument.scripts:i.document.getElementsByTagName(n)}}}});const{modifyLocalProperties:c,modifyProperties:l,ownerProperties:s,shadowProperties:a,shadowMethods:u,documentProperties:d,documentMethods:f}=tn;l.filter(e=>!c.includes(e)).concat(s,a,u,d,f).forEach(e=>{Object.defineProperty(r,e,{get:()=>Je(i.document[e])?i.document[e].bind(i.document):i.document[e]})});const h={},p=e.contentWindow.location,m=Object.keys(p),y=["host","hostname","port","protocol","port"];return y.forEach(e=>{h[e]=t[e]}),Object.defineProperties(h,{href:{get:()=>p.href.replace(n,o),set:t=>{lo(e,t,o)}},reload:{get(){return Ze(xe),()=>null}}}),m.filter(e=>!y.concat(["href","reload"]).includes(e)).forEach(e=>{Object.defineProperty(h,e,{get:()=>Je(p[e])?p[e].bind(p):p[e]})}),{proxyDocument:r,proxyLocation:h}}const uo=window.__POWERED_BY_WUJIE__?window.__WUJIE.inject.appEventObjMap:new Map;class fo{constructor(e){this.id=e,this.$clear(),uo.get(this.id)||uo.set(this.id,{}),this.eventObj=uo.get(this.id)}$on(e,t){const n=this.eventObj[e];return n?(n.includes(t)||n.push(t),this):(this.eventObj[e]=[t],this)}$onAll(e){return this.$on(Ee,e)}$once(e,t){const n=function(...o){this.$off(e,n),t(...o)}.bind(this);this.$on(e,n)}$off(e,t){const n=this.eventObj[e];if(!e||!n||!n.length)return Ze(`${e} ${We}`),this;let o,r=n.length;while(r--)if(o=n[r],o===t){n.splice(r,1);break}return this}$offAll(e){return this.$off(Ee,e)}$emit(e,...t){let n=[],o=[];if(uo.forEach(t=>{t[e]&&(n=n.concat(t[e])),t[Ee]&&(o=o.concat(t[Ee]))}),!e||0===n.length&&0===o.length)Ze(`${e} ${We}`);else try{for(let e=0,o=n.length;e<o;e++)n[e](...t);for(let n=0,r=o.length;n<r;n++)o[n](e,...t)}catch(r){et(r)}return this}$clear(){var e;const t=null!==(e=uo.get(this.id))&&void 0!==e?e:{},n=Object.keys(t);return n.forEach(e=>delete t[e]),this}}var ho=function(e,t,n,o){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function c(e){try{s(o.next(e))}catch(t){i(t)}}function l(e){try{s(o["throw"](e))}catch(t){i(t)}}function s(e){e.done?n(e.value):r(e.value).then(c,l)}s((o=o.apply(e,t||[])).next())}))};class po{constructor(e){this.elementEventCacheMap=new WeakMap,window.__POWERED_BY_WUJIE__?this.inject=window.__WUJIE.inject:this.inject={idToSandboxMap:Xt,appEventObjMap:uo,mainHostPath:window.location.protocol+"//"+window.location.host};const{name:t,url:n,attrs:o,fiber:r,degrade:i,lifecycles:c,plugins:l}=e;this.id=t,this.fiber=r,this.degrade=i||!Ae,this.bus=new fo(this.id),this.url=n,this.provide={bus:this.bus},this.styleSheetElements=[],this.execQueue=[],this.lifecycles=c,this.plugins=Array.isArray(l)?l:[];const{urlElement:s,appHostPath:a,appRoutePath:u}=Qe(n),{mainHostPath:d}=this.inject,f=co(this,o,d,a,u);if(this.iframe=f,this.degrade){const{proxyDocument:e,proxyLocation:t}=ao(f,s,d,a);this.proxyDocument=e,this.proxyLocation=t}else{const{proxyWindow:e,proxyDocument:t,proxyLocation:n}=so(f,s,d,a);this.proxy=e,this.proxyDocument=t,this.proxyLocation=n}this.provide.location=this.proxyLocation,Zt(this.id,this)}active(e){return ho(this,void 0,void 0,(function*(){const{sync:t,url:n,el:o,template:r,props:i,alive:c,prefix:l,fetch:s,replace:a}=e;this.url=n,this.sync=t,this.alive=c,this.hrefFlag=!1,this.prefix=null!==l&&void 0!==l?l:this.prefix,this.replace=null!==a&&void 0!==a?a:this.replace,this.provide.props=null!==i&&void 0!==i?i:this.provide.props,yield this.iframeReady;const u=this.iframe.contentWindow,d=s?(e,t)=>s("string"===typeof e?new URL(e,this.proxyLocation.href).href:e,t):this.fetch;if(d&&(u.fetch=d,this.fetch=d),this.execFlag&&this.alive||Dn(u),Tn(u),this.template=null!==r&&void 0!==r?r:this.template,this.degrade){const e=In(this.id),t=yn.call(u.document,"body");return this.el=Mn(e,null!==o&&void 0!==o?o:t),Rn(e.contentDocument),o&&Rn(t),zn(e.contentWindow,u),e.contentWindow.onunload=()=>{this.unmount()},this.document?this.alive?(e.contentDocument.appendChild(this.document.firstElementChild),Yn(e.contentDocument.firstElementChild,u)):(yield Sn(e.contentDocument,this.iframe.contentWindow,this.template),Vn(this.document.firstElementChild,e.contentDocument.firstElementChild,u)):yield Sn(e.contentDocument,this.iframe.contentWindow,this.template),void(this.document=e.contentDocument)}if(this.shadowRoot){if(this.el=Mn(this.shadowRoot.host,o),this.alive)return}else{const e=yn.call(u.document,"body");this.el=Mn(Ln(this.id),null!==o&&void 0!==o?o:e)}yield Pn(this.shadowRoot,u,this.template),this.provide.shadowRoot=this.shadowRoot}))}start(e){return ho(this,void 0,void 0,(function*(){this.execFlag=!0;const t=yield e();if(!this.iframe)return;const n=this.iframe.contentWindow;n.__POWERED_BY_WUJIE__=!0;const o=this.plugins.map(e=>e.jsBeforeLoaders).reduce((e,t)=>e.concat(t),[]).filter(e=>"object"===typeof e),r=this.plugins.map(e=>e.jsAfterLoaders).reduce((e,t)=>e.concat(t),[]).filter(e=>"object"===typeof e),i=[],c=[],l=[];return t.forEach(e=>{e.defer?l.push(e):e.async?c.push(e):i.push(e)}),o.forEach(e=>{this.execQueue.push(()=>this.fiber?Xe(()=>ro(e,n)):ro(e,n))}),i.concat(l).forEach(e=>{this.execQueue.push(()=>e.contentPromise.then(t=>this.fiber?Xe(()=>ro(Object.assign(Object.assign({},e),{content:t}),n)):ro(Object.assign(Object.assign({},e),{content:t}),n)))}),c.forEach(e=>{e.contentPromise.then(t=>{this.fiber?Xe(()=>ro(Object.assign(Object.assign({},e),{content:t}),n)):ro(Object.assign(Object.assign({},e),{content:t}),n)})}),this.execQueue.push(this.fiber?()=>Xe(()=>this.mount()):()=>this.mount()),r.forEach(e=>{this.execQueue.push(()=>this.fiber?Xe(()=>ro(e,n)):ro(e,n))}),this.execQueue.shift()(),new Promise(e=>{this.execQueue.push(()=>{var t;e(),null===(t=this.execQueue.shift())||void 0===t||t()})})}))}mount(){var e,t,n,o,r,i,c;this.mountFlag||(this.attachHostCssRules(),Se(this.iframe.contentWindow.__WUJIE_MOUNT)&&(null===(t=null===(e=this.lifecycles)||void 0===e?void 0:e.beforeMount)||void 0===t||t.call(e,this.iframe.contentWindow),this.iframe.contentWindow.__WUJIE_MOUNT(),null===(o=null===(n=this.lifecycles)||void 0===n?void 0:n.afterMount)||void 0===o||o.call(n,this.iframe.contentWindow),this.mountFlag=!0),this.alive&&(null===(i=null===(r=this.lifecycles)||void 0===r?void 0:r.activated)||void 0===i||i.call(r,this.iframe.contentWindow)),null===(c=this.execQueue.shift())||void 0===c||c())}unmount(){var e,t,n,o,r,i;this.degrade?setTimeout(()=>Jn()):Jn(),this.alive&&(null===(t=null===(e=this.lifecycles)||void 0===e?void 0:e.deactivated)||void 0===t||t.call(e,this.iframe.contentWindow)),this.mountFlag&&(!Se(this.iframe.contentWindow.__WUJIE_UNMOUNT)||this.alive||this.hrefFlag||(null===(o=null===(n=this.lifecycles)||void 0===n?void 0:n.beforeUnmount)||void 0===o||o.call(n,this.iframe.contentWindow),this.iframe.contentWindow.__WUJIE_UNMOUNT(),null===(i=null===(r=this.lifecycles)||void 0===r?void 0:r.afterUnmount)||void 0===i||i.call(r,this.iframe.contentWindow),this.mountFlag=!1,this.bus.$clear(),this.degrade||Rn(this.shadowRoot)))}destroy(){this.bus.$clear(),this.shadowRoot=null,this.iframe=null,this.proxy=null,this.proxyDocument=null,this.proxyLocation=null,this.execQueue=null,this.provide=null,this.styleSheetElements=null,this.bus=null,this.el=null,this.replace=null,this.fetch=null,this.execFlag=null,this.mountFlag=null,this.hrefFlag=null,this.document=null,this.elementEventCacheMap=null,this.lifecycles=null,this.plugins=null,this.provide=null,this.inject=null,this.execQueue=null,this.prefix=null,(window.__POWERED_BY_WUJIE__?window.__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR_ALL__.call(window.document,"iframe"):window.document.querySelectorAll("iframe")).forEach(e=>{e.name===this.id&&e.parentNode.removeChild(e)}),en(this.id)}rebuildStyleSheets(){this.styleSheetElements&&this.styleSheetElements.length&&this.styleSheetElements.forEach(e=>{an.call(this.degrade?this.document.head:this.shadowRoot.head,e)}),this.attachHostCssRules()}attachHostCssRules(){if(this.degrade)return;if(this.shadowRoot.host.hasAttribute(ge))return;const e=An(Array.from(this.iframe.contentDocument.querySelectorAll("style")).map(e=>e.sheet));e&&(this.shadowRoot.head.appendChild(e),this.styleSheetElements.push(e),this.shadowRoot.host.setAttribute(ge,""))}}var mo=function(e,t,n,o){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function c(e){try{s(o.next(e))}catch(t){i(t)}}function l(e){try{s(o["throw"](e))}catch(t){i(t)}}function s(e){e.done?n(e.value):r(e.value).then(c,l)}s((o=o.apply(e,t||[])).next())}))};const yo=new fo(Date.now().toString());if(window.__WUJIE&&!window.__POWERED_BY_WUJIE__)throw Ze(je),new Error(je);function vo({name:e,url:t,replace:n,el:o,sync:r,prefix:i,alive:c,props:l,attrs:s={},fiber:a=!0,degrade:u,plugins:d,fetch:f,beforeLoad:h,beforeMount:p,afterMount:m,beforeUnmount:y,afterUnmount:v,activated:w,deactivated:g,loadError:b}){var E,_,U,x,j,W,L,M,O,C;return mo(this,void 0,void 0,(function*(){const P=Gt(e),I={beforeLoad:h,beforeMount:p,afterMount:m,beforeUnmount:y,afterUnmount:v,activated:w,deactivated:g,loadError:b};if(P){P.plugins=Array.isArray(d)?d:[],P.lifecycles=I;const e=P.iframe.contentWindow;if(P.preload&&(yield Promise.resolve(P.preload)),c){if(yield P.active({url:t,sync:r,prefix:i,el:o,props:l,alive:c,fetch:f,replace:n}),!P.execFlag){null===(_=null===(E=P.lifecycles)||void 0===E?void 0:E.beforeLoad)||void 0===_||_.call(E,P.iframe.contentWindow);const{getExternalScripts:e}=yield Kt(t,{fetch:f||window.fetch,plugins:P.plugins,loadError:P.lifecycles.loadError});yield P.start(e)}return null===(x=null===(U=P.lifecycles)||void 0===U?void 0:U.activated)||void 0===x||x.call(U,P.iframe.contentWindow),P.destroy}if(Se(e.__WUJIE_MOUNT))return P.unmount(),yield P.active({url:t,sync:r,prefix:i,el:o,props:l,alive:c,fetch:f,replace:n}),null===(W=null===(j=P.lifecycles)||void 0===j?void 0:j.beforeMount)||void 0===W||W.call(j,P.iframe.contentWindow),e.__WUJIE_MOUNT(),null===(M=null===(L=P.lifecycles)||void 0===L?void 0:L.afterMount)||void 0===M||M.call(L,P.iframe.contentWindow),P.mountFlag=!0,P.rebuildStyleSheets(),P.destroy;P.destroy()}const S=new po({name:e,url:t,attrs:s,fiber:a,degrade:u,plugins:d,lifecycles:I});null===(C=null===(O=S.lifecycles)||void 0===O?void 0:O.beforeLoad)||void 0===C||C.call(O,S.iframe.contentWindow);const{template:R,getExternalScripts:A,getExternalStyleSheets:T}=yield Kt(t,{fetch:f||window.fetch,plugins:S.plugins,loadError:S.lifecycles.loadError}),D=yield Ht(S,R,T);return yield S.active({url:t,sync:r,prefix:i,template:D,el:o,props:l,alive:c,fetch:f,replace:n}),yield S.start(A),S.destroy}))}function wo({name:e,url:t,replace:n,props:o,attrs:r={},fiber:i=!0,alive:c,degrade:l,fetch:s,exec:a,plugins:u,beforeLoad:d,beforeMount:f,afterMount:h,beforeUnmount:p,afterUnmount:m,activated:y,deactivated:v,loadError:w}){Xe(()=>{if(Gt(e)||Ve(e))return;const g={beforeLoad:d,beforeMount:f,afterMount:h,beforeUnmount:p,afterUnmount:m,activated:y,deactivated:v,loadError:w},b=new po({name:e,url:t,attrs:r,fiber:i,degrade:l,plugins:u,lifecycles:g});if(b.preload)return b.preload;const E=()=>mo(this,void 0,void 0,(function*(){var e,r;null===(r=null===(e=b.lifecycles)||void 0===e?void 0:e.beforeLoad)||void 0===r||r.call(e,b.iframe.contentWindow);const{template:i,getExternalScripts:l,getExternalStyleSheets:u}=yield Kt(t,{fetch:s||window.fetch,plugins:b.plugins,loadError:b.lifecycles.loadError}),d=yield Ht(b,i,u);yield b.active({url:t,props:o,alive:c,template:d,fetch:s,replace:n}),a&&(yield b.start(l))}));b.preload=E()})}function go(e){const t=Gt(e);t&&t.destroy()}kn(),Wn(),Ae||Ze(Oe);const bo={name:"WujieVue",props:{width:{type:String,default:""},height:{type:String,default:""},name:{type:String,default:""},url:{type:String,default:""},sync:{type:Boolean,default:!1},prefix:{type:Object,default:void 0},alive:{type:Boolean,default:!1},props:{type:Object,default:void 0},attrs:{type:Object,default:void 0},replace:{type:Function,default:void 0},fetch:{type:Function,default:void 0},fiber:{type:Boolean,default:!0},degrade:{type:Boolean,default:!1},plugins:{type:Array,default:null},beforeLoad:{type:Function,default:null},beforeMount:{type:Function,default:null},afterMount:{type:Function,default:null},beforeUnmount:{type:Function,default:null},afterUnmount:{type:Function,default:null},activated:{type:Function,default:null},deactivated:{type:Function,default:null},loadError:{type:Function,default:null}},data(){return{destroy:null,startAppQueue:Promise.resolve()}},mounted(){yo.$onAll(this.handleEmit),this.execStartApp(),this.$watch(()=>this.name+this.url,()=>this.execStartApp())},methods:{handleEmit(e,...t){this.$emit(e,...t)},execStartApp(){this.startAppQueue=this.startAppQueue.then(async()=>{try{this.destroy=await vo({name:this.name,url:this.url,el:this.$refs.wujie,alive:this.alive,fetch:this.fetch,props:this.props,attrs:this.attrs,replace:this.replace,sync:this.sync,prefix:this.prefix,fiber:this.fiber,degrade:this.degrade,plugins:this.plugins,beforeLoad:this.beforeLoad,beforeMount:this.beforeMount,afterMount:this.afterMount,beforeUnmount:this.beforeUnmount,afterUnmount:this.afterUnmount,activated:this.activated,deactivated:this.deactivated,loadError:this.loadError})}catch(et){console.log(et)}})}},beforeDestroy(){yo.$offAll(this.handleEmit)},render(e){return e("div",{style:{width:this.height,height:this.height},ref:"wujie"})}},Eo=o["a"].extend(bo);Eo.preloadApp=wo,Eo.bus=yo,Eo.destroyApp=go,Eo.install=function(e){e.component("WujieVue",Eo)};var _o=Eo,Uo=n("160c"),xo=n("f933"),jo=n("5efb");n("2040"),n("b550"),n("3444"),n("7ef1");const Wo=!0,{preloadApp:Lo,bus:Mo}=_o;if(o["a"].use(_o).use(Uo["a"]).use(xo["a"]).use(jo["a"]),o["a"].config.productionTip=!1,Mo.$on("click",e=>window.alert(e)),"false"!==window.localStorage.getItem("preload")){const e="true"===window.localStorage.getItem("degrade")||!window.Proxy||!window.CustomElementRegistry;Lo({name:"react16",url:E("//localhost:7600"),attrs:Wo?{src:E("//localhost:7600")}:{},exec:!0,fetch:_,degrade:e,plugins:W,...x}),Lo({name:"react17",url:E("//localhost:7100"),attrs:Wo?{src:E("//localhost:7100")}:{},exec:!0,alive:!0,fetch:_,degrade:e,...x}),Lo({name:"vue2",url:E("//localhost:7200"),attrs:Wo?{src:E("//localhost:7200")}:{},exec:!0,fetch:_,degrade:e,...x}),Lo({name:"vue3",url:E("//localhost:7300"),attrs:Wo?{src:E("//localhost:7300")}:{},exec:!0,alive:!0,fetch:(e,t)=>e.includes(E("//localhost:7300"))?_(e,t):window.fetch(e,t),degrade:e,...x}),Lo({name:"angular12",url:E("//localhost:7400"),attrs:Wo?{src:E("//localhost:7400")}:{},exec:!0,fetch:_,degrade:e,...x}),Lo({name:"vite",url:E("//localhost:7500"),attrs:Wo?{src:E("//localhost:7500")}:{},exec:!0,fetch:_,degrade:e,...x})}new o["a"]({router:ye,render:e=>e(u)}).$mount("#app")},5713:function(e,t,n){},"6ebd":function(e,t,n){"use strict";n("b7d3")},"85ec":function(e,t,n){},"97b6":function(e,t,n){"use strict";n("068e")},b563:function(e,t,n){"use strict";n("5713")},b7d3:function(e,t,n){},ed34:function(e,t,n){}});
//# sourceMappingURL=app.929c1b5e.js.map